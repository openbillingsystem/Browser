<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<title>Open Billing System</title>

<link rel="SHORTCUT ICON" href="resources/favicon.ico" />
<link rel="stylesheet" type="text/css" href="resources/allinone.css" />
<link rel="stylesheet" type="text/css"
	href="resources/libs/DataTables-1.9.4/extras/TableTools/media/css/TableTools.css" />

<link rel="stylesheet" type="text/css"
	href="resources/libs/DataTables-1.9.4/media/css/demo_page.css" />
<link rel="stylesheet" type="text/css"
	href="resources/libs/DataTables-1.9.4/media/css/demo_table_jui.css" />
<link rel="stylesheet" type="text/css"
	href="resources/libs/jquery-ui-1.8.16.custom/css/smoothness/jquery-ui-1.8.16.custom.css" />
<link rel="stylesheet" type="text/css"
	href="resources/libs/jquery-ui-timepicker-addon.css" />

<link rel="stylesheet" type="text/css"
	href="resources/stretchyreporting/stretchyreporting.css">
<link rel="stylesheet" type="text/css"
	href="resources/IndividualLendingCode-0.12.0.beta.css" />

<!-- JQuery/JQuery UI is used. JQuery data tables are used to display rows of data - especially in reporting (stretchyreporting) -->
<script type="text/javascript" src="resources/libs/jquery-1.7.min.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/jquery-ui-1.8.16.custom.min.js"></script>
<script type="text/javascript"
	src="resources/libs/DataTables-1.9.4/media/js/jquery.dataTables.min.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery.dataTables.TitleNumeric.js"></script>
<script type="text/javascript"
	src="resources/libs/DataTables-1.8.2/extras/TableTools/media/js/ZeroClipboard.js"></script>
<script type="text/javascript"
	src="resources/libs/DataTables-1.8.2/extras/TableTools/media/js/TableTools.min.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/i18n/jquery.ui.datepicker-en.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/i18n/jquery.ui.datepicker-es.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/i18n/jquery.ui.datepicker-fr.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/i18n/jquery.ui.datepicker-pt.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/i18n/jquery.ui.datepicker-zh.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/i18n/jquery.ui.datepicker-zh.js"></script>
<script src="resources/jquery.ui.autocomplete.selectFirst.js"></script>

<!-- 
JQuery plugins:
   combox(accounting),
   datetime picker(general),
   properties (I18N, general),
   editable tables(code values, general) ,
   ajax file download,
   webcam intergration
-->
<script type="text/javascript" src="resources/libs/jquery.combobox.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery.i18n.properties-min-1.0.9.js"></script>
<script type="text/javascript" src="resources/libs/jquery.jeditable.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery.fileDownload.js"></script>
<script type="text/javascript" src="resources/libs/jquery.webcam.js"></script>

<!-- JQuery Template plug-in and code (for rendering UI functionality) -->
<script type="text/javascript" src="resources/libs/jsrender.js"></script>
<script type="text/javascript" src="resources/libs/jquery.views.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery.observable.min.js"></script>

<!-- JQuery globalize plug-in -->
<script type="text/javascript"
	src="resources/libs/globalize/globalize.js"></script>
<script type="text/javascript"
	src="resources/libs/globalize/cultures/globalize.culture.en.js"></script>
<script type="text/javascript"
	src="resources/libs/globalize/cultures/globalize.culture.es.js"></script>
<script type="text/javascript"
	src="resources/libs/globalize/cultures/globalize.culture.fr.js"></script>
<script type="text/javascript"
	src="resources/libs/globalize/cultures/globalize.culture.pt.js"></script>
<script type="text/javascript"
	src="resources/libs/globalize/cultures/globalize.culture.zh.js"></script>
	
	
	

<!-- JQuery plug-in to show billing  Platform additional data tables -->
<script type="text/javascript"
	src="resources/stretchydatatables-0.12.0.beta.js"></script>

<!-- JQuery plug-in to show billing  Platform reporting -->
<script type="text/javascript"
	src="resources/stretchyreporting/stretchyreporting-0.12.0.beta.js"></script>

<!-- JQuery plug-in to check if links and buttons should be shown in billing X UI -->
<script type="text/javascript" src="resources/MifosXUI-0.12.0.beta.js"></script>

<!-- JQuery plug-in to manage permissions and role permissions in the UI as the UI code is quite elaborate -->
<script type="text/javascript"
	src="resources/MifosXPermissions-0.12.0.beta.js"></script>

<!-- Google charts api (used in stretchyreporting) -->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
	google.load("visualization", "1", {packages:["corechart"]});
</script>

<!--  Added by sarath on 17-Sep-2013 -->
<script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization',
       'version':'1','packages':['timeline']}]}"></script>
       
<!-- This is a single Page javascript app - IndividualLendingCode.js has functions which switch functionality by replacing the html in the #container div -->
<script type="text/javascript"
	src="resources/IndividualLendingCode-0.12.0.beta.js"></script>

<script type="text/javascript"
	src="resources/SetTenantLoadTenantConfig-0.12.0.beta.js"></script>

</head>

<body>

	<div id="container"></div>
	<script>
$(document).ready(function() {

//IndividualLendingCode.js is the file to look at
	initialiseAndShowLogon();
});
</script>



	<!-- Everything below here is just templates for jsrender to process in order to display the various pages -->
	<!-- Normally this would be put in a server side include... but you need to run the html through a web server for those to work -->
	<!-- If anyone knows how to include this text without the need for a web server that would help a lot. -->
	<!-- I guess I could just read the file and write it into the DOM but probably not worth it -->

	<script id="bulkLoanApplicationMemberPartial" type="text/x-jquery-tmpl">
<table>
<tr>
        <td>
            {{=$ctx.doI18N("label.group.loan.product.name")}}
        </td>
        <td>
            <select name="productId" id="productId" class="productId">
                <option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
                {{#each productOptions}}
                    {{#if $ctx.number($parent.parent.data.loanProductId)===$ctx.number(id)}}
                    <option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
                    {{#else}}
                    <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                    {{/if}}
                {{/each}}
            </select>
        </td>
        <td>
           Calendar 
        </td>
        <td> drop-down</td>
    </tr>
</table>
<br/>

{{#if loanProductId}}
<table width="100%" >
<tr>
    <td>
        <fieldset>
            <legend>&nbsp;{{=$ctx.doI18N("legend.loanTerms")}}&nbsp;</legend>
            <table>
                <tr>
                    <td valign="top" style="padding-right: 25px; border-right: 1px solid;">
                        <table>
                            <tr>
                                <td>{{=$ctx.doI18N("label.submittedOn")}}</td>
                                <td>
                                <input id="submittedOnDate" name="submittedOnDate" title="" type="text" class="datepickerfieldnoconstraint" value="" style="width:172px;"/>
                                </td>
                            </tr>
                            <tr>
                                <td>{{=$ctx.doI18N("label.expectedDisbursementOn")}}</td>
                                <td>
                                <input id="expectedDisbursementDate" name="expectedDisbursementDate" title="" type="text" class="datepickerfieldnoconstraint" value="" style="width:172px;"/>
                                </td>
                            </tr>
                            <tr>
                                <td>{{=$ctx.doI18N("label.interestChargedFrom")}}</td>
                                <td>
                                <input id="interestChargedFromDate" name="interestChargedFromDate" title="" type="text" class="datepickerfieldnoconstraint" value="" style="width:172px;"/>
                                </td>
                            </tr>

                            <tr>
                                <td>{{=$ctx.doI18N("label.firstRepaymentOn")}}</td>
                                <td>
                                <input id="repaymentsStartingFromDate" name="repaymentsStartingFromDate" title="" type="text" class="datepickerfieldnoconstraint" value="" style="width:172px;"/>
                                </td>
                            </tr>
                            {{#if $ctx.showTask("VIEWFUNDS")}}
                            <tr>
                                <td>{{=$ctx.doI18N("label.fund")}}</td>
                                <td>
                                    <select id="fundId" name="fundId" title="">
                                        <option value="">{{=$ctx.doI18N("option.fund.first.choice")}}</option>
                                    {{#each fundOptions}}
                                        {{#if $ctx.number($parent.parent.data.fundId)===$ctx.number(id)}}
                                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
                                        {{#else}}
                                            <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                                        {{/if}}
                                        {{/each}}
                                    </select>
                                </td>
                            </tr>
                            {{/if}}
                        </table>
                    </td>
                    <!-- charge details cell -->
                    <td colspan=2 valign="top" style="padding-left: 25px; padding-right: 5px">
                    <form id="charges" class="chargesEntityform">
                    <table>
                        {{#each charges}}
                            <tr>
                                <input id="charges[{{=$itemNumber}}][id]" name="charges[{{=$itemNumber}}][id]" class="id" title="" type="hidden" value="{{=id}}" />
                                <input id="charges[{{=$itemNumber}}][chargeId]" name="charges[{{=$itemNumber}}][chargeId]" class="chargeId" title="" type="hidden" value="{{=$ctx.number(chargeId)}}" />
                                <td>{{=name}}, {{=currency.displaySymbol}}</td>
                                <td>
                                    <select id="charges[{{=$itemNumber}}][chargeCalculationType]" name="charges[{{=$itemNumber}}][chargeCalculationType]" title="" style="width: 180px" disabled="disabled">
                                    <option value="{{=$ctx.number(chargeCalculationType.id)}}">{{=$ctx.doI18N(chargeCalculationType.code)}}</option>
                                    </select>
                                </td>
                                <td><input id="charges[{{=$itemNumber}}][amount]" name="charges[{{=$itemNumber}}][amount]" class="chargeAmount" title="" type="text" value="{{=$ctx.decimal(amount, 2)}}" style="width: 125px;" /></td>
                                <td>
                                    <select id="charges[{{=$itemNumber}}][chargeTimeType]" name="charges[{{=$itemNumber}}][chargeTimeType]" title="" style="width: 180px" disabled="disabled">
                                    <option value="{{=$ctx.number(chargeTimeType.id)}}">{{=$ctx.doI18N(chargeTimeType.code)}}</option>
                                    </select>
                                </td>
                                <td>
                                    <input id="charges[{{=$itemNumber}}][dueDate]" name="charges[{{=$itemNumber}}][dueDate]" class="dueDate datepickerfieldnoconstraint" title="" value="{{=$ctx.globalDate(dueDate)}}" />
                                </td>
                                <td><button id="loanproduct-removeLoanCharge{{=$itemNumber}}" class="loanproduct-removeLoanCharge">{{=$ctx.doI18N("widget.multiselect.button.remove")}}</button></td>
                            </tr>
                            {{/each}}
                    </table>
                    </form>
                    </td>
                    <td>
                    </td>
                </tr>
            </table>
        </fieldset>
    </td>
</tr>
</table>
{{/if}}
<br/>
<table class="pretty displayschedule" id="jlgloansbyclient">
                <thead>
                    <tr>
                        <th width="5%" scope="col"><input type="checkbox" name="alljlgclients" id="alljlgclients" value=""></th>
                        <th width="25%" scope="col">{{=$ctx.doI18N("label.group.client.loan.applicant.name")}}</th>
                        <th width="20%" scope="col">{{=$ctx.doI18N("label.group.client.loan.principal")}}</th>
                        <th width="15%" scope="col">{{=$ctx.doI18N("label.group.client.loan.tenure")}}</th>
                        <th width="35%" scope="col">{{=$ctx.doI18N("label.group.client.loan.purpose")}}</th>
                    </tr>
                </thead>
</table>                
                {{#each group.clientMembers}}
                    <form id="client{{=id}}" class="entityform">
                    <table class="pretty displayschedule" id="jlgloansbyclient">
                    <tbody>
                        <tr>
                            <td colspan="5"><div class="formerrors"></div>
                                                    {{#if $parent.parent.data.loanProductId }}
                                    
                                    <input type="hidden" value="{{=id}}" name="clientId" id="clientId">
                                    <input type="hidden" value="dd MMMM yyyy" name="dateFormat" id="dateFormat">
                                    <input type="hidden" value="en" name="locale" id="locale">
                                    
                                    <input type="hidden" id="loanTermFrequency" name="loanTermFrequency" value="{{=$ctx.number($parent.parent.parent.data.termFrequency)}}" />
                                    <input type="hidden" id="loanTermFrequencyType" name="loanTermFrequencyType" value="{{=$ctx.number($parent.parent.parent.data.termPeriodFrequencyType.id)}}" />
                                    <input id="repaymentEvery" name="repaymentEvery" title="" type="hidden" value="{{=$ctx.number($parent.parent.parent.data.repaymentEvery)}}" />
                                    <input id="repaymentFrequencyType" name="repaymentFrequencyType" title="" type="hidden" value="{{=$ctx.number($parent.parent.parent.data.repaymentFrequencyType.id)}}" />
                                    <input id="transactionProcessingStrategyId" name="transactionProcessingStrategyId" title="" type="hidden" value="{{=$ctx.number($parent.parent.parent.data.transactionProcessingStrategyId)}}" />
                                    <input id="interestRatePerPeriod" name="interestRatePerPeriod" title="" type="hidden" value="{{=$ctx.number($parent.parent.parent.data.interestRatePerPeriod)}}" />
                                    <input id="interestRateFrequencyType" name="interestRateFrequencyType" title="" type="hidden" value="{{=$ctx.number($parent.parent.parent.data.interestRateFrequencyType.id)}}" />
                                    <input id="amortizationType" name="amortizationType" title="" type="hidden" value="{{=$ctx.number($parent.parent.parent.data.amortizationType.id)}}" />
                                    <input id="interestType" name="interestType" title="" type="hidden" value="{{=$ctx.number($parent.parent.parent.data.interestType.id)}}" />
                                    <input id="interestCalculationPeriodType" name="interestCalculationPeriodType" title="" type="hidden" value="{{=$ctx.number($parent.parent.parent.data.interestCalculationPeriodType.id)}}" />
                                    <input id="inArrearsTolerance" name="inArrearsTolerance" title="" type="hidden" value="{{=$ctx.number($parent.parent.parent.data.inArrearsTolerance)}}" />

                                 {{/if}}

                            </td>
                        </tr>
                        <tr>
                            <td width="5%"><input type="checkbox" name="jlgclient" class="jlgclient"  value="{{=id}}"></td>
                            <td width="25%"><span id="client{{=id}}">{{=displayName}}</span></td>
                            <td width="20%">
                            {{#if $parent.parent.data.loanProductId }}
                                <input id="principal" name="principal" title="" type="text" value="{{=$parent.parent.parent.data.principal}}" style="width: 125px;" />
                                <input id="principalCurrencyCode" name="principalCurrencyCode" title="" type="text" value="{{=$parent.parent.parent.data.currency.displaySymbol}}" style="width: 40px;" disabled="disabled" />
                            {{#else}}        
                                    <input id="principal" name="principal" title="" type="text" value="0.00" style="width: 125px;" />
                            {{/if}}
                            </td>
                            <td width="15%">
                            {{#if $parent.parent.data.loanProductId}}
                                <input id="numberOfRepayments" name="numberOfRepayments" title="" type="text" value="{{=$parent.parent.parent.data.numberOfRepayments}}" style="width: 50px;" />
                            {{#else}}        
                                <input id="numberOfRepayments" name="numberOfRepayments" title="" type="text" value="" style="width: 50px;" />
                            {{/if}}
                            </td>
                            <td width="35%">
                                Loan Purpose
                            </td>
                        </tr>
                    </tbody>
                    </table>
                    </form>
                  {{/each}}  
            <br/>
            <br/>
            <div style="float:right">
                <span id="toolbar" class="ui-widget-header ui-corner-all">
                    <button type="submit" class="submitjlgloanapps" id="submitjlgloanapps" name="_eventId_submit"  title="Submit loan application.">Submit loan application</button>
                    <button type="submit" class="cancelloanapp" id="cancelloanapp" name="_eventId_cancel" title="Cancel loan application.">Cancel</button>
                </span>
            </div>
</script>

	<script id="noteListViewTemplate" type="text/x-jquery-tmpl">
{{#if notes.length > 0}}
	<div class="ui-widget .ui-widget-content ui-corner-all notecontainer">
		<div class="ui-widget-header">
			<span class="ui-icon ui-icon-info" style="float: left; margin-right: 5px;" ></span>
			<span>{{=title}}</span>
		</div>
		<div class="ui-widget ui-widget-content ui-corner-all">
		
		{{#each notes}}
			<div>
				<div class="notespacer">
					<span class="ui-icon ui-icon-note" style="float: left; margin-right: 5px;"></span>
					<span>{{=noteType.value}}:</span>
					<span><a href="#" class="editnote" id="editnotelink{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</a></span>
				</div>
				<div class="notecontent">{{=note}}</div>
				<div class="notespacer">
					<span class="ui-icon ui-icon-person" style="float: left; margin-right: 5px;" ></span>
					<span class="noteusername">{{=updatedByUsername}}</span>
					<span>&nbsp;{{=$ctx.globalDateTime(updatedOn)}}</span>
				</div>
			</div>
		{{/each}}
		</div>
	</div>
{{/if}}
</script>

	<script id="noteFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="10" cols="75" id="note" name="note" cssClass="text ui-widget-content ui-corner-all">{{=note}}</textarea>
</form>
</script>

	<!-- Search screens and templates for sections of search screen -->
	<script id="groupSearchTabTemplate" type="text/x-jquery-tmpl">
<div>	
	<form method="post" id="viewGroup">
		<div style="width:100%">
			<h1 align="center">{{=$ctx.doI18N("tab.group.search.title")}}</h1>
		</div>
		<div id="officesInScopeDiv">
		</div>
	</form>	
	<div id="groupTableDiv">
	</div>
</div>
</script>

	<script id="allGroupsDropdownTemplate" type="text/x-jquery-tmpl">
	<label for="group">{{=$ctx.doI18N("label.group.search")}}</label>
	<select name="group" id="group" onChange="showGroup(options[selectedIndex].value);">
		<option value="0">{{=$ctx.doI18N("option.group.search.first.choice")}}</option>
		{{#each crudRows}}
			<option value="{{=id}}">{{=name}}&nbsp;-&nbsp;({{=officeName}})</option>
	    {{/each}}
	</select>
</script>

	<script id="groupTableTemplate" type="text/x-jquery-tmpl">
	<table id='groupstable' width='100%' class="display">
		<thead>
			<tr>
				<th>{{=$ctx.doI18N("table.heading.officename")}}</th>
				<th>{{=$ctx.doI18N("table.heading.displayname")}}</th>
			</tr>
		</thead>
		<tbody>
			<tr>
                <td colspan="5" class="dataTables_empty">Loading data from server</td>
            </tr>	
		</tbody>
	</table>
</script>

	<script id="clientSearchTabTemplate" type="text/x-jquery-tmpl">
<div>	
	<form method="post" id="viewClient" name="viewClient" action="switchToClient">
		<div id="officesInScopeDiv">
		</div>
	</form>	
    <div id="clientTableDiv">
    </div>
</div>
</script>

	<script id="allClientsDropdownTemplate" type="text/x-jquery-tmpl">
	<label for="client">{{=$ctx.doI18N("label.client.search")}}</label>
	
	<select name="client" id="client" onChange="showILClient(options[selectedIndex].value);">
		<option value="0">{{=$ctx.doI18N("option.client.search.first.choice")}}</option>
		{{#each crudRows}}
			<option value="{{=id}}">{{=displayName}}&nbsp;-&nbsp;({{=officeName}})</option>
	    {{/each}}
	</select>
</script>

	<script id="officesDropdownTemplate" type="text/x-jquery-tmpl">
	{{#if crudRows.length > 1 }}
		<div style="width:100%">
				<label for="office">{{=$ctx.doI18N("label.data.scope")}}
    				<select id="officeId" name="officeId">
    					{{#each crudRows}}
    						{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
    							<option value="{{=hierarchy}}" selected="selected">{{=nameDecorated}}</option>
    						{{#else}}
    							<option value="{{=hierarchy}}">{{=nameDecorated}}</option>
    						{{/if}}
    			        {{/each}}
    				</select>
                </label>
		</div>
	{{/if}}
</script>

	<script id="clientsTableTemplate" type="text/x-jquery-tmpl">
	<table id='clientstable' width='100%' class="display">
		<thead>
			<tr>

				<th>{{=$ctx.doI18N("table.heading.officename")}}</th>
				<th>{{=$ctx.doI18N("table.heading.client.accountNo")}}</th>
				<th>{{=$ctx.doI18N("table.heading.displayname")}}</th>
                <th>{{=$ctx.doI18N("table.heading.balance")}}</th>
			</tr>
		</thead>
		<tbody>
            <tr>
                <td colspan="6" class="dataTables_empty">Loading data from server</td>
            </tr>			
		</tbody>
	</table>
</script>

	<script id="centerManageTabTemplate" type="text/x-jquery-tmpl">
<div class="groupcontainer">
	<form method="post" id="viewGroup" name="viewGroup" action="switchToGroup">
        <input type="hidden" id="officeId" name="officeId" value="" />
        <div class="right80 clearright marginB20">
            <div>
                <div>
                	<label for="group">{{=$ctx.doI18N("label.group.search.by.name")}}</label>
                    <input type="text" maxlength="30" id="groupSearchInput"/>
                    <button id="searchGroupBtn" style="clear: both;" style="height:10px">{{=$ctx.doI18N("button.group.search")}}</button>
                </div>
            </div>
            <br/>
            <hr/>

            <div id="groupTableDiv">
                <table width="100%" cellspacing="0" cellpadding="2" border="0" >
                <tbody>
                    <tr>
                    <td valign="top">
                        <table width="100%" cellspacing="0" cellpadding="2" border="0" class="bluetableborder">
                            <tbody>
                            <tr>
                                <td class="bluetablehead05"><span class="fontnormalbold">{{=$ctx.doI18N("label.group.offices")}}</span></td>
                            </tr>
                            <tr>
                                <td class="paddingL10">
                                    <div style="max-height:300px;overflow:auto;" id="officesInScopeDiv"></div>
                                </td>
                            </tr>
                            </tbody>
                        </table>                
                    </td> 
                    <td valign="top"></td>   
                    <td valign="top">
                        <table width="100%" cellspacing="0" cellpadding="2" border="0" class="bluetableborder">
                            <tbody>
                            <tr>
                                <td class="bluetablehead05"><span class="fontnormalbold">{{=$ctx.doI18N("label.centers")}}</span></td>
                            </tr>
                            <tr>
                                <td class="paddingL10">
                                    <div style="max-height:300px;overflow:auto;" id="centersInScopeDiv"></div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </td>
                    </tr>
                </tbody>
            </table>
            </div>
        </div>
        <div class="left">
            <table width="100%" cellspacing="0" cellpadding="4" border="0" >
                <tbody>
                    <tr class="fontnormal">
                            <td class="witoutpadding">
                                <span class="headingorange">{{=$ctx.doI18N("label.group.client.tasks")}}</span>
                            </td>
                    </tr>
                    <tr class="fontnormal">
                            <td>
                                </br>
                            </td>
                    </tr>
                    <tr class="fontnormal">
                            <td class="witoutpadding">
                                <b>{{=$ctx.doI18N("label.group.manage")}}</b>
                            </td>
                    </tr>
                    <tr class="fontnormal">
                            <td class="witoutpadding">
                                    <ul>
                                        <li><a href="#" class="addgroup" onClick="addCenterGroup();return false;">{{=$ctx.doI18N("label.group.manage.create")}}</a></li>
                                        <li><a href="#" class="addcenter" onClick="addCenter();return false;">{{=$ctx.doI18N("label.center.manage.create")}}</a></li>
                                    </ul>   
                        </td>
                    </tr>
                 </tbody>
            </table>
        </div>
	</form>
</div>	
</script>
	<!-- All Groups List-->
	<script id="allCentersListTemplate" type="text/x-jquery-tmpl">
   <ul>
        {{#each crudRows}}
            <li><a href="#" class="group" onClick="showCenter({{=id}});">{{=name}}&nbsp;-&nbsp;({{=officeName}})</a></li>
        {{/each}}
    </ul>   
</script>

	<script id="allOfficesListTemplate" type="text/x-jquery-tmpl">
   <ul>
        {{#each crudRows}}
            <li><a href="#" class="group" onClick="applyCenterSearchFilter('{{=hierarchy}}');">{{=name}}</a></li>
        {{/each}}
    </ul>   
</script>

	<script id="groupsTableTemplate" type="text/x-jquery-tmpl">
	<table id='groupstable' width='100%'>
		<thead>
			<tr>
				<th>{{=$ctx.doI18N("table.heading.officename")}}</th>
				<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			</tr>
		</thead>
		<tbody>
			{{#each crudRows}}
			<tr>
				<td>{{=officeName}}</td>
				<td><a id='navigateToGroup{{=id}}' href='#' style='margin-right: 5px;' onclick="showGroup({{=id}}); return false;">{{=name}}</a></td>				
			</tr>
			{{/each}}
		</tbody>
	</table>
</script>

	<script id="centerGroupBlankFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<div>
				<label for="officeId">{{=$ctx.doI18N("label.office")}}</label>
				<select id="officeId" name="officeId" title="">
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each officeOptions}}
						{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
						{{/if}}
					{{/each}}
				</select>
				</div>
			</td>
			<td>
			<div>
				<label for="centerId">{{=$ctx.doI18N("label.center")}}</label>
				<select id="centerId" name="centerId" title="">
                    <option value="">{{=$ctx.doI18N("option.group.select.parent.first.choice")}}</option>
					{{#each centerOptions}}
                        {{#if $ctx.number($parent.parent.data.centerId)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                        {{/if}}                            
					{{/each}}
				</select>
				</div>
			</td>
		</tr>
		<tr>
			<td colspan="2">
				<label for="staffId">{{=$ctx.doI18N("label.group.staff")}}</label>
				<select id="staffId" name="staffId" title="">
                    <option value="">{{=$ctx.doI18N("option.group.select.staff.first.choice")}}</option>
                    {{#each staffOptions}}
                        {{#if $ctx.number($parent.parent.data.staffId)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
                        {{/if}}                              
					{{/each}}
				</select>
			</td>
		</tr>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("form.label.group.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
			<td>
				<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
				<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}"/>
			</td>
		</tr>
		<tr>
			<td>
                <div class="multiselectwidget">
                    <label for="notSelectedClients">{{=$ctx.doI18N("form.label.group.available.clients")}}</label>
                    <select id="notSelectedClients" name="notSelectedClients" title="" class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:400px;height:125px;">
                    {{#each clientOptions}}
                        <option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
                    {{/each}}
                    </select>
                    <a href="#" id="addclientmembers" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
                </div>
            </td>
            <td>
                <div class="multiselectwidget">
                    <label for="clientMembers">{{=$ctx.doI18N("form.label.group.selected.clients")}}</label>
                    <select id="clientMembers" name="clientMembers" title="" class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:400px;height:125px;">
                    {{#each clientMembers}}
                        {{#if officeName}}
                            <option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
                        {{else}}
                            <option value="{{=id}}">{{=displayName}}, {{=$parent.parent.parent.data.officeName}}</option>
                        {{/if}}
                    {{/each}}
                    </select>
                    <a href="#" id="removeclientmembers" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
                </div>
            </td>
		</tr>
	</table>
</form>
</script>

	<script id="centerGroupFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
    <input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
    <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<table>
		<tr>
			<td>
				<div>
				<input type="hidden" id="officeId" name="officeId" value="{{=officeId}}" />
				<label for="office">{{=$ctx.doI18N("label.office")}}</label>
				<select id="office" name="office" title="" disabled=disabled>
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each officeOptions}}
						{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
						{{/if}}
					{{/each}}
				</select>
				</div>
			</td>
			<td>
			<div>
				<input type="hidden" id="centerId" name="centerId" value="{{=centerId}}" />
				<label for="center">{{=$ctx.doI18N("label.center")}}</label>
				<select id="center" name="center" title="" disabled=disabled>
                    <option value="">{{=$ctx.doI18N("option.group.select.parent.first.choice")}}</option>
					{{#each centerOptions}}
                        {{#if $ctx.number($parent.parent.data.centerId)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                        {{/if}}                            
					{{/each}}
				</select>
				</div>
			</td>
		</tr>
		<tr>
			<td colspan="2">
				<label for="staffId">{{=$ctx.doI18N("label.group.staff")}}</label>
				<select id="staffId" name="staffId" title="">
                    <option value="">{{=$ctx.doI18N("option.group.select.staff.first.choice")}}</option>
                    {{#each staffOptions}}
                        {{#if $ctx.number($parent.parent.data.staffId)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
                        {{/if}}                              
					{{/each}}
				</select>
			</td>
		</tr>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("form.label.group.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
			<td>
				<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
				<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="activeCheckbox">{{=$ctx.doI18N("label.active")}}</label>
				{{#if active}}
				<input type="hidden" id="active" name="active" value="true" />
				<input id="activeCheckbox" type="checkbox" name="active" value="true" checked disabled=disabled/>
				{{else}}
				<input id="activeCheckbox" type="checkbox" name="active" value="false" />
				{{/if}}
			</td>
			<td>
				<label for="activationDate">{{=$ctx.doI18N("label.activationDate")}}</label>
				{{#if active}}
				<input id="activationDate" name="activationDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(activationDate)}}" />    
				{{else}}
				<input id="activationDate" name="activationDate" title="" type="text" class="datepickerfield" value="" />
				{{/if}}
			</td>
		</tr>
		<tr>
			<td>
				<div class="multiselectwidget">
					<label for="notSelectedClients">{{=$ctx.doI18N("form.label.group.available.clients")}}</label>
					<select id="notSelectedClients" name="notSelectedClients" title="" class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:400px;height:125px;">
					{{#each clientOptions}}
						<option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
		            {{/each}}
					</select>
					<a href="#" id="addclientmembers" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
				</div>
			</td>
			<td>
				<div class="multiselectwidget">
					<label for="clientMembers">{{=$ctx.doI18N("form.label.group.selected.clients")}}</label>
					<select id="clientMembers" name="clientMembers" title="" class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:400px;height:125px;">
					{{#each clientMembers}}
						{{#if officeName}}
							<option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
		            	{{else}}
		            		<option value="{{=id}}">{{=displayName}}, {{=$parent.parent.parent.data.officeName}}</option>
		            	{{/if}}
		            {{/each}}
					</select>
					<a href="#" id="removeclientmembers" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
				</div>
			</td>
		</tr>
	</table>
</form>
</script>

	<script id="centerGroupEditFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
    <input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
    <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<table>
		<tr>
			<td>
				<div>
				<label for="office">{{=$ctx.doI18N("label.office")}}</label>
				<select id="office" name="office" title="" disabled=disabled>
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each officeOptions}}
						{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
						{{/if}}
					{{/each}}
				</select>
				</div>
			</td>
			<td>
			<div>
				<label for="center">{{=$ctx.doI18N("label.center")}}</label>
				<select id="center" name="center" title="" disabled=disabled>
                    <option value="">{{=$ctx.doI18N("option.group.select.parent.first.choice")}}</option>
					{{#if centerName}}
                        <option value="{{=centerId}}" selected="selected">{{=centerName}}</option>
                    {{/if}}
                    <!-- Do not allow to change center
                    {{#each centerOptions}}
                        {{#if $ctx.number($parent.parent.data.centerId)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                        {{/if}}                            
					{{/each}}
                    -->
				</select>
				</div>
			</td>
		</tr>
		<tr>
			<td colspan="2">
				<label for="staffId">{{=$ctx.doI18N("label.group.staff")}}</label>
				<select id="staffId" name="staffId" title="">
                    <option value="">{{=$ctx.doI18N("option.group.select.staff.first.choice")}}</option>
                    {{#each staffOptions}}
                        {{#if $ctx.number($parent.parent.data.staffId)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
                        {{/if}}                              
					{{/each}}
				</select>
			</td>
		</tr>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("form.label.group.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
			<td>
				<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
				<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}"/>
			</td>
		</tr>
		{{#if active}}
		<tr>
			<td>
			<label for="activeCheckbox">{{=$ctx.doI18N("label.active")}}</label>
			<input type="hidden" id="active" name="active" value="true" />
			<input id="activeCheckbox" type="checkbox" name="active" value="true" checked disabled=disabled/>
			</td>
			<td>
			<label for="activationDate">{{=$ctx.doI18N("label.activationDate")}}</label>
			<input id="activationDate" name="activationDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(activationDate)}}" />
			</td>
		</tr>
		{{/if}}
		<tr>
			<td>
				<div class="multiselectwidget">
					<label for="notSelectedClients">{{=$ctx.doI18N("form.label.group.available.clients")}}</label>
					<select id="notSelectedClients" name="notSelectedClients" title="" class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:400px;height:125px;">
					{{#each clientOptions}}
						<option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
		            {{/each}}
					</select>
					<a href="#" id="addclientmembers" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
				</div>
			</td>
			<td>
				<div class="multiselectwidget">
					<label for="clientMembers">{{=$ctx.doI18N("form.label.group.selected.clients")}}</label>
					<select id="clientMembers" name="clientMembers" title="" class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:400px;height:125px;">
					{{#each clientMembers}}
						{{#if officeName}}
							<option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
		            	{{else}}
		            		<option value="{{=id}}">{{=displayName}}, {{=$parent.parent.parent.data.officeName}}</option>
		            	{{/if}}
		            {{/each}}
					</select>
					<a href="#" id="removeclientmembers" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
				</div>
			</td>
		</tr>
	</table>
</form>
</script>

	<script id="standardGroupFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<table>
		<tr>
			<td>
				<label for="officeId">{{=$ctx.doI18N("label.office")}}</label>
				<select id="officeId" name="officeId" title="">
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each officeOptions}}
						{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
						{{/if}}
					{{/each}}
				</select>
			</td>
			<td>
				<label for="staffId">{{=$ctx.doI18N("label.group.staff")}}</label>
				<select id="staffId" name="staffId" title="">
                    <option value="">{{=$ctx.doI18N("option.group.select.staff.first.choice")}}</option>
                    {{#each staffOptions}}
                        {{#if $ctx.number($parent.parent.data.staffId)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
                        {{/if}}                              
					{{/each}}
				</select>
			</td>
		</tr>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("form.label.group.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
			<td>
				<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
				<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}"/>
			</td>
		</tr>

		<tr>
			<td>
				<label for="activeCheckbox">{{=$ctx.doI18N("label.active")}}</label>
				{{#if active}}
				<input type="hidden" id="active" name="active" value="true" />
				<input id="activeCheckbox" type="checkbox" name="active" value="true" checked disabled=disabled/>
				{{else}}
				<input id="activeCheckbox" type="checkbox" name="active" value="false" />
				{{/if}}
			</td>
			<td>
				<label for="activationDate">{{=$ctx.doI18N("label.activationDate")}}</label>
				{{#if active}}
				<input id="activationDate" name="activationDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(activationDate)}}" />    
				{{else}}
				<input id="activationDate" name="activationDate" title="" type="text" class="datepickerfield" value="" />
				{{/if}}
			</td>
		</tr>

		<tr>
			<td>
				<div class="multiselectwidget">
					<label for="notSelectedClients">{{=$ctx.doI18N("form.label.group.available.clients")}}</label>
					<select id="notSelectedClients" name="notSelectedClients" title="" class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:400px;height:125px;">
					{{#each clientOptions}}
						<option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
		            {{/each}}
					</select>
					<a href="#" id="addclientmembers" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
				</div>
			</td>
			<td>
				<div class="multiselectwidget">
					<label for="clientMembers">{{=$ctx.doI18N("form.label.group.selected.clients")}}</label>
					<select id="clientMembers" name="clientMembers" title="" class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:400px;height:125px;">
					{{#each clientMembers}}
						{{#if officeName}}
							<option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
		            	{{else}}
		            		<option value="{{=id}}">{{=displayName}}, {{=$parent.parent.parent.data.officeName}}</option>
		            	{{/if}}
		            {{/each}}
					</select>
					<a href="#" id="removeclientmembers" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
				</div>
			</td>
		</tr>
	</table>
</form>
</script>

	<script id="standardGroupEditFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<table>
		<tr>
			<td>
				<label for="officeId">{{=$ctx.doI18N("label.office")}}</label>
				<select id="officeId" name="officeId" title="" disabled="disabled">
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each officeOptions}}
						{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
						{{/if}}
					{{/each}}
				</select>
			</td>
			<td>
				<label for="staffId">{{=$ctx.doI18N("label.group.staff")}}</label>
				<select id="staffId" name="staffId" title="">
                    <option value="">{{=$ctx.doI18N("option.group.select.staff.first.choice")}}</option>
                    {{#each staffOptions}}
                        {{#if $ctx.number($parent.parent.data.staffId)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
                        {{/if}}                              
					{{/each}}
				</select>
			</td>
		</tr>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("form.label.group.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
			<td>
				<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
				<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}"/>
			</td>
		</tr>
	
		{{#if active}}
		<tr>
			<td>
			<label for="activeCheckbox">{{=$ctx.doI18N("label.active")}}</label>
			<input type="hidden" id="active" name="active" value="true" />
			<input id="activeCheckbox" type="checkbox" name="active" value="true" checked disabled=disabled/>
			</td>
			<td>
			<label for="activationDate">{{=$ctx.doI18N("label.activationDate")}}</label>
			<input id="activationDate" name="activationDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(activationDate)}}" />
			</td>
		</tr>
		{{/if}}

		<tr>
			<td>
				<div class="multiselectwidget">
					<label for="notSelectedClients">{{=$ctx.doI18N("form.label.group.available.clients")}}</label>
					<select id="notSelectedClients" name="notSelectedClients" title="" class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:400px;height:125px;">
					{{#each clientOptions}}
						<option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
		            {{/each}}
					</select>
					<a href="#" id="addclientmembers" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
				</div>
			</td>
			<td>
				<div class="multiselectwidget">
					<label for="clientMembers">{{=$ctx.doI18N("form.label.group.selected.clients")}}</label>
					<select id="clientMembers" name="clientMembers" title="" class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:400px;height:125px;">
					{{#each clientMembers}}
						{{#if officeName}}
							<option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
		            	{{else}}
		            		<option value="{{=id}}">{{=displayName}}, {{=$parent.parent.parent.data.officeName}}</option>
		            	{{/if}}
		            {{/each}}
					</select>
					<a href="#" id="removeclientmembers" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
				</div>
			</td>
		</tr>
	</table>
</form>
</script>

	<script id="centerFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

 	<label for="officeId">{{=$ctx.doI18N("label.office")}}</label>
 	<select id="officeId" class="officeId" name="officeId" title="">
     <option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
     {{#each officeOptions}}
         {{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
             <option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
         {{#else}}
             <option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
         {{/if}}
     {{/each}}
 	</select>

 	<label for="staffId">{{=$ctx.doI18N("label.group.staff")}}</label>
 	<select id="staffId" name="staffId" title="">
     <option value="">{{=$ctx.doI18N("option.group.select.staff.first.choice")}}</option>
     {{#each staffOptions}}
         {{#if $ctx.number($parent.parent.data.staffId)===$ctx.number(id)}}
             <option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
         {{#else}}
             <option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
         {{/if}}                              
     {{/each}}
 	</select>

 	<label for="name">{{=$ctx.doI18N("form.label.group.name")}}</label>
 	<input id="name" name="name" title="" type="text" value="{{=name}}"/>

 	<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
 	<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}"/>

	<label for="activeCheckbox">{{=$ctx.doI18N("label.active")}}</label>
	{{#if active}}
	<input type="hidden" id="locale" name="active" value="true" />
	<input id="activeCheckbox" type="checkbox" name="active" value="true" checked disabled=disabled/>
	{{else}}
	<input id="activeCheckbox" type="checkbox" name="active" value="false" />
	{{/if}}
	
	<label for="activationDate">{{=$ctx.doI18N("label.activationDate")}}</label>
	{{#if active}}
	<input id="activationDate" name="activationDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(activationDate)}}" />    
	{{else}}
	<input id="activationDate" name="activationDate" title="" type="text" class="datepickerfield" value="" />
	{{/if}}       
</form>
</script>
	<!-- end of center,group templates. -->

	<script id="clientIdentifiersTemplate" type="text/x-jquery-tmpl">
	{{#if $ctx.showTask("ADDCLIENTIDENTIFIER")}}
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   		<button id="addclientidentifier{{=clientId}}">{{=$ctx.doI18N("button.add.identityType")}}</button>
			</span>
		</td>
	</table>
    {{/if}}
	<hr/>
	<table style="vertical-align: top;width: 100%">
		{{#each crudRows}}
				<tr>
					<td colspan="3" align="center"><b>{{=$ctx.doI18N("label.clientIdentityDocumentType")}} {{=documentType.name}}</b></td>
				</tr>
				<tr>
					<td colspan="1">
						<label for="documentKey">{{=$ctx.doI18N("label.identityDocumentNumber")}}</label>
					</td>
					<td>{{=documentKey}}</td>
				<tr>
				<tr>
				   	<td><label for="description">{{=$ctx.doI18N("label.description")}}</label></td>
					<td><textarea readonly="true" id="description" name="description" cols="75" rows="5">{{=description}}</textarea></td>
					<td>
						<span id="modifycellToolbar" class="ui-widget-header ui-corner-all">
							<button id="addclientIdentifierdocument{{=id}}">{{=$ctx.doI18N("link.action.upload")}}</button>
					   		<button id="editclientidentifier{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</button>
					   		<button id="deleteclientidentifier{{=id}}">{{=$ctx.doI18N("link.action.delete")}}</button>
						</span>
					</td>
				</tr>
				<tr>
				   	<td><label for="documents">{{=$ctx.doI18N("label.identityDocuments")}}</label></td>
				</tr>
				<tr>
					<td colspan="2" id="clientidentifier{{=id}}documents"></td>
				</tr>
				<tr>
					<td colspan="2">
						<hr/>
					</td>
				</tr>
		{{/each}}
	</table>
</script>

	<script id="clientIdentifiersFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="documentTypeId">{{=$ctx.doI18N("label.identityDocumentType")}}</label>
				 <!--Show select one dropdown only while creating new client Identifiers-->
				<select id="documentTypeId" name="documentTypeId" title="">
				    {{#if documentType}}
					{{#else}}
					   <option value="">{{=$ctx.doI18N("label.identityDocumentType.option.first.choice")}}</option>
					{{/if}} 
					{{#each allowedDocumentTypes}}
					    {{#if $parent.parent.data.documentType}}
				            {{#if $ctx.number($parent.parent.parent.data.documentType.id)===$ctx.number(id)}}
					           <option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
						    {{#else}}
                                <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                            {{/if}}
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=name}}</option>
						{{/if}}
					{{/each}}
				</select>
			</td>
			<td>
				<label for="documentKey">{{=$ctx.doI18N("label.identityDocumentNumber")}}</label>
				<input id="documentKey" name="documentKey" title="" type="text" value="{{=documentKey}}"/>
			</td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="description">{{=$ctx.doI18N("label.description")}}</label>
				<textarea cols="75" rows="5" id="description" name="description">{{=description}}</textarea>
			</td>
		</tr>
	</table>
 </form>
</script>

	<!--Client identifier documents section begins here -->

	<script id="clientIdentifierDocumentsTemplate"
		type="text/x-jquery-tmpl">
	<table style="vertical-align: top;width: 100%">
		{{#each crudRows}}
				<tr>
					<td>{{=name}} ({{=fileName}})</td>
					<td>
						<span id="modifycellToolbar" class="ui-widget-header ui-corner-all">
							<button id="downloadclientIdentifierdocument{{=id}}">{{=$ctx.doI18N("link.action.download")}}</button>
					   		<button id="editclientIdentifierdocument{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</button>
					   		<button id="deleteclientIdentifierdocument{{=id}}">{{=$ctx.doI18N("link.action.delete")}}</button>
						</span>
					</td>
				</tr>
		{{/each}}
	</table>
</script>

	<script id="clientIdentifierDocumentsFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("label.name")}}</label>
				<input id="name" name="name" title="" type="text"/>
			</td>
		</tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.select.new.file")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>

	<script id="editClientIdentifierDocumentsFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("label.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("clientIdentifier.document.current.file.name")}}</label>
				{{=fileName}}
			</td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("clientIdentifier.document.file.new.select")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>
	<!-- Clients Identifier Document section ends here-->

	<!-- Client document section begins here-->
	<script id="clientDocumentsTemplate" type="text/x-jquery-tmpl">
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   		<button id="addclientdocument{{=clientId}}">{{=$ctx.doI18N("button.document.add")}}</button>
			</span>
		</td>
	</table>
	<hr/>
	<table style="vertical-align: top;width: 100%">
		{{#each crudRows}}
				<tr>
					<td>{{=$ctx.doI18N("label.name")}}</td>
					<td>{{=name}}</td>
				</tr>
				<tr>
				   	<td><label for="description">{{=$ctx.doI18N("label.description")}}</label></td>
					<td><textarea readonly="true" id="description" name="description" cols="75" rows="5">{{=description}}</textarea></td>
					<td>
						<span id="modifycellToolbar" class="ui-widget-header ui-corner-all">
							<button id="downloadclientdocument{{=id}}">{{=$ctx.doI18N("link.action.download")}}</button>
					   		<button id="editclientdocument{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</button>
					   		<button id="deleteclientdocument{{=id}}">{{=$ctx.doI18N("link.action.delete")}}</button>
						</span>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.filename")}}</td>
					<td>{{=fileName}}</td>
				</tr>
				<tr>
					<td colspan="2">
						<hr/>
					</td>
				</tr>
		{{/each}}
	</table>
</script>

	<script id="clientDocumentsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("label.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("label.description")}}</label>
				<textarea cols="75" rows="5" id="description" name="description">{{=description}}</textarea>
			</td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.upload.browse")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>

	<script id="editClientDocumentsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("label.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("label.description")}}</label>
				<textarea cols="75" rows="5" id="description" name="description">{{=description}}</textarea>
			</td>
		<tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("label.current.filename")}}</label>
				{{=fileName}}
			</td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.select.new.file")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>

	<script id="groupDetailsTemplate" type="text/x-jquery-tmpl">
<div class="breadcrumb">
    <span class="rowvalue">{{=officeName}}</span> 
	{{#if centerId}}>> <span><a href="#" onClick="showCenter({{=centerId}});">{{=centerName}}</a></span>{{/if}}
</div>

<div style="padding-left: 25px;">
	<input type="hidden" id="staffId" name="staffId" value="{{=staffId}}" />
	<table style="width:100%">
		<tbody>
			<tr><td><div class="rowvalue heading">{{=name}}</div></td>
			<td valign="top" style="text-align: right">
    			<span id="toolbar" class="ui-widget-header ui-corner-all">
	{{#if activationDate}}
		{{#if centerId}}
			<button id="editcentergroupbtn{{=id}}" class="editcentergroupbtn">{{=$ctx.doI18N("label.group.edit")}}</button>
		{{#else}}
			<button id="editstandardgroupbtn{{=id}}" class="editstandardgroupbtn">{{=$ctx.doI18N("label.group.edit")}}</button>
		{{/if}}

 		<button id="newgrouploanbtn{{=id}}" class="newgrouploanbtn">{{=$ctx.doI18N("label.group.new.loan.account")}}</button>
        <!--<button class="groupsavingsbtn">{{=$ctx.doI18N("label.group.new.saving.account")}}</button>-->
		<button id="newbulkloanbtn{{=id}}" class="newbulkloanbtn">{{=$ctx.doI18N("label.group.new.bulk.loan.account")}}</button>
	{{#else}}
		{{#if $ctx.showTask("ActivateGroup")}}
		<button id="activategroup{{=id}}" class="activategroup">Activate</button>
		{{/if}}
		{{#if centerId}}
			<button id="editcentergroupbtn{{=id}}" class="editcentergroupbtn">{{=$ctx.doI18N("label.group.edit")}}</button>
		{{#else}}
			<button id="editstandardgroupbtn{{=id}}" class="editstandardgroupbtn">{{=$ctx.doI18N("label.group.edit")}}</button>
		{{/if}}
		<button id="deletegroupbtn{{=id}}" class="deletegroupbtn">{{=$ctx.doI18N("label.group.delete")}}</button>
		{{/if}}
        <button id="addclientbtn{{=id}}" class="addclientbtn">{{=$ctx.doI18N("label.group.add.client")}}</button>
        {{#if centerId}}
        
        {{#else}}
            <button id="addcalendarbtn{{=id}}" class="addcalendarbtn">{{=$ctx.doI18N("label.group.attach.meeting")}}</button>   
        {{/if}}

        {{#if $ctx.showTask("AddGroupNote")}}
            <button id="addgroupnotebtn{{=id}}" class="addgroupnotebtn">Add note</button>
    {{/if}}
    			</span>
			</td>
		</tr>
		</tbody>
	</table>
	<br/>
	<br/>
</div>
</script>

	<script id="groupClientsTabTemplate" type="text/x-jquery-tmpl">
<span><b>{{=$ctx.doI18N("label.group.clients.assigned")}}</b></span>
<div class="row">
    <span class="rowvalue">
        <table>
        {{#if clientMembers}}
        	{{#each clientMembers}}
                <tr>
                    <td>
            		<span class="loanaccount"><a href="#" onCLick="showILClient({{=id}});"><span class="rowvalue">{{=displayName}} : # {{=accountNo}}</span></a></span>
                    </td>
                    <td>
                    <button id="addnewjlgloanbtn{{=id}}" class="addnewjlgloanbtn">{{=$ctx.doI18N("label.group.new.client.loan.account")}}</button>
                    </td>
                </tr>
            {{/each}}
        {{/if}}
    </span>
</div>
</script>

	<script id="groupSummaryTabTemplate" type="text/x-jquery-tmpl">
{{#if groupSummaryData}}
<table width="100%" cellspacing="0" cellpadding="2" border="0" class="bluetableborder">
<tbody>
    <tr>
        <td class="bluetablehead05"><span class="fontnormalbold">{{=$ctx.doI18N("label.group.performance.history")}}</span></td>
    </tr>
    <tr>
        <td class="paddingL10"><span class="fontnormal8pt">{{=$ctx.doI18N("label.group.active.client")}} {{=groupSummaryData.totalActiveClients}}</span></td>
    </tr>
    {{#if clients}}
    <tr>
        <td class="paddingL10"><span class="fontnormal8pt">{{=$ctx.doI18N("label.group.active.groups")}} Clients? : {{=groupSummaryData.totalChildGroups}}</span></td>
    </tr>
    {{/if}}
    <tr>
        <td class="paddingL10"><span class="fontnormal8pt">{{=$ctx.doI18N("label.group.total.loan.portfolio")}}</span>
            {{#each groupSummaryData.totalLoanPortfolio}}
                <br/><span class="fontnormal">{{=code}} : {{=amount}}</span>
            {{/each}}
        </td>
    </tr>
    <tr>
        <td class="paddingL10"><span class="fontnormal8pt">{{=$ctx.doI18N("label.group.total.savings")}} </span></td>
    </tr>
</tbody>
</table>
{{/if}}
</script>

	<script id="groupDataTabTemplate" type="text/x-jquery-tmpl">
<div class="groupcontainer">
    <div class="right clearright marginB20" id="groupnotescontainer">
        <div id="groupnotes">
        </div>
        <div>
            <br>
            <table width="100%" cellspacing="0" cellpadding="2" border="0" class="bluetableborder">
                <tbody>
                    <tr>
                        <td class="bluetablehead05">
                            <span class="fontnormalbold">{{=$ctx.doI18N("label.group.calendar.details")}}</span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div id="centerCalendarContent">
                            </div>
                        </td>
                    </tr>
                     
                </tbody>
            </table>
        </div>
    </div>
    <div class="left">
    	<div id="grouptabcontent">
    		<div id="grouptableftpane" style="float:left;width:100%">
				<div class="row">
					<span class="longrowlabel">{{=$ctx.doI18N("label.name")}}</span>
					<span class="rowvalue">{{=name}}</span>
				</div>
				{{#if externalId}}
				<div class="row">
					<span class="longrowlabel">{{=$ctx.doI18N("label.externalId")}}</span>
					<span class="rowvalue">{{=externalId}}</span>
				</div>
				{{/if}}
				<div class="row">
					<span class="longrowlabel">{{=$ctx.doI18N("label.status")}}</span>
					<span class="rowvalue">{{=$ctx.doI18N(status.code)}}</span>
				</div>
				{{#if activationDate}}
					<div class="row">
						<span class="longrowlabel">{{=$ctx.doI18N("label.activationDate")}}</span>
						<span class="rowvalue">{{=$ctx.globalDate(activationDate)}}</span>
					</div>
				{{/if}}
				<div class="row">
					<span class="longrowlabel">{{=$ctx.doI18N("label.office")}}</span>
					<span class="rowvalue">{{=officeName}}</span>
				</div>
                {{#if staffName}}
				<div class="row">
					<span class="longrowlabel">{{=$ctx.doI18N("label.group.staff")}}</span>
					<span class="rowvalue">{{=staffName}}</span>
					<span style="margin-left:10px;"><a href="#" id="unassignstafftogroup{{=id}}" class="unassignstafftogroup">
					{{=$ctx.doI18N("label.group.unassign.staff")}}</a></span>
				</div>
                {{/if}}
				<br>
				<div class="row">
					<span class="rowvalue heading">{{=$ctx.doI18N("label.group.account.information")}}</span>
				</div>
				<br/>
				<div id="groupaccountssummary"></div>
                <br/>
            </div>
			<!-- end of left pane content -->
		</div>
    </div>
</div>		
</script>

	<script id="groupAccountSummariesTemplate" type="text/x-jquery-tmpl">
{{#if $ctx.numberGreaterThanZero(anyLoanCount)}}

<p><b>{{=$ctx.doI18N("heading.group.account.loanaccount.overview")}}</b></p>
{{#if $ctx.numberGreaterThanZero(pendingApprovalLoanCount)}}
<div class="row">
    <span class="longrowlabel">{{=$ctx.doI18N("label.pending.approval")}} ({{=$ctx.number(pendingApprovalLoanCount)}}):</span>
    <span class="rowvalue">
    {{#each pendingApprovalLoans}}
        <span class="loanaccount"><a href="unknown.html" onclick="showGroupLoan({{=id}}, '{{=productName}}', '{{=accountNo}}'); return false;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
    {{/each}}
    </span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(awaitingDisbursalLoanCount)}}
<div class="row">
    <span class="longrowlabel">{{=$ctx.doI18N("label.pending.disbursal")}} ({{=$ctx.number(awaitingDisbursalLoanCount)}}):</span>
    <span class="rowvalue">
    {{#each awaitingDisbursalLoans}}
        <span class="loanaccount"><a href="unknown.html" onclick="showGroupLoan({{=id}}, '{{=productName}}', '{{=accountNo}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
    {{/each}}
    </span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(activeLoanCount)}}
<div class="row">
    <span class="longrowlabel">{{=$ctx.doI18N("label.active")}} ({{=$ctx.number(activeLoanCount)}}):</span>
    <span class="rowvalue">
    {{#each openLoans}}
        <span class="loanaccount"><a href="unknown.html" onclick="showGroupLoan({{=id}}, '{{=productName}}', '{{=accountNo}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
    {{/each}}
    </span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(closedLoanCount)}}
<div class="row">
    <div class="longrowlabel">{{=$ctx.doI18N("label.closed")}} ({{=$ctx.number(closedLoanCount)}}):</div>
    <div class="rowvalue">
    {{#each closedLoans}}
        <span class="loanaccount"><a href="unknown.html" onclick="showGroupLoan({{=id}}, '{{=productName}}', '{{=accountNo}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
    {{/each}}
    </div>
</div>
{{/if}}

{{/if}}

</script>

	<script id="memberLoanDetailsPartialTemplate" type="text/x-jquery-tmpl">
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.client.account.name")}}</span>
		<span class="rowvalue">{{=clientName}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.status")}}</span>
		<span class="rowvalue">{{=$ctx.doI18N(status.code)}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.product")}}</span>
		<span class="rowvalue">{{=loanProductName}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.externalId")}}</span>
		<span class="rowvalue">{{=externalId}}</span>
	</div>
	<br/>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.currency")}}</span>
		<span class="rowvalue">{{=currency.name}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.principal")}}</span>
		<span class="rowvalue">{{=$ctx.moneyFormatted(currency, principal)}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.repayments")}}</span>
		<span class="rowvalue">{{=numberOfRepayments}} every {{=repaymentEvery}}&nbsp;{{=repaymentFrequencyType.value}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.amortization")}}</span>
		<span class="rowvalue">{{=amortizationType.value}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.interest")}}</span>
		<span class="rowvalue">{{=$ctx.decimal(annualInterestRate, 4)}}% per annum ({{=$ctx.decimal(interestRatePerPeriod, 4)}}%&nbsp; {{=interestRateFrequencyType.value}}) - {{=interestType.value}}</span>
	</div>
	<div class="row">
		{{#if permissions.pendingApproval}}
			{{#if $ctx.showTask("APPROVELOAN")}}
			<button id="approvebtn{{=$parent.parent.data.id}}" class="approveloan">Approve</button>
			{{/if}}
			{{#if $ctx.showTask("DELETELOAN")}}
			<button id="deletebtn{{=$parent.parent.data.id}}" class="deleteloan">Delete</button>
			{{/if}}
		{{/if}}
		{{#if permissions.undoApprovalAllowed}}
			{{#if $ctx.showTask("UNDOLOANAPPROVAL")}}
			<button id="undoapprovebtn{{=$parent.parent.data.id}}" class="undoapproveloan">Undo Approval</button>
			{{/if}}
		{{/if}}
		{{#if permissions.disbursalAllowed}}
			{{#if $ctx.showTask("DISBURSELOAN")}}
			<button id="disbursebtn{{=$parent.parent.data.id}}" class="disburseloan">Disburse</button>
			{{/if}}
		{{/if}}
		{{#if permissions.undoDisbursalAllowed}}
			{{#if $ctx.showTask("UNDOLOANDISBURSAL")}}
			<button id="undodisbursalbtn{{=$parent.parent.data.id}}" class="undodisbursalloan">Undo Disbursal</button>
			{{/if}}
		{{/if}}
	</div>
</script>

	<script id="formErrorsTemplate" type="text/x-jquery-tmpl">
<div class="ui-widget">
	<div class="ui-state-error ui-corner-all">
		<span class="ui-icon ui-icon-alert" style="float: left; margin-right: 5px;" ></span>
		<span>{{=title}}</span>
		<div style="margin-left: 5px;">
		{{#each errors}}
			<div>
				<em>{{=message}}</em>
			</div>
		{{/each}}
		</div>
	</div>
</div>
</script>

	<!-- end of portfolio template section -->

	<!-- admin templates below here -->
	<script id="savingproductFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" /> 
		<input type="hidden" id="interestCalculationMethod" name="interestCalculationMethod" value="1" /> 
		<legend>{{=$ctx.doI18N("form.legend.saving.product.information")}}</legend> 
		<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("form.label.saving.product.name")}}</label></td><td>
				<input id="name" name="name" type="text" title="" value="{{=name}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="savingProductType">{{=$ctx.doI18N("form.label.saving.product.savingProductType")}}</label></td><td>
				<select name="savingProductType" id="savingProductType"  title="" style="width: 121px;">
							{{#each savingsProductTypeOptions}}
								{{#if $ctx.number($parent.parent.data.savingProductType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        					{{/each}}
  						</select>
			</td>
		</tr>
		</table>
		<label for="description">{{=$ctx.doI18N("form.label.saving.product.description")}}</label>
		<textarea cols="73" rows="3" id="description" name="description" title="">{{=description}}</textarea>
	</fieldset>

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.saving.product.currency")}}</legend>
		<label for="currencyCode">{{=$ctx.doI18N("form.label.saving.product.currency")}}</label>
		<select id="currencyCode" name="currencyCode" title="" style="width: 300px;" onChange="$('#digitsAfterDecimal').val($('#currencyCode option:selected').attr('digitsad'));">
            	<option value="" digitsad="0">{{=$ctx.doI18N("option.currency.first.choice")}}</option>
			{{#each currencyOptions}}
                {{#if $parent.parent.data.currency.code===code}}
					<option value="{{=code}}" digitsad="{{=$ctx.number(decimalPlaces)}}" selected="selected">{{=name}}</option>
				{{#else}}
					<option value="{{=code}}" digitsad="{{=$ctx.number(decimalPlaces)}}" >{{=name}}</option>
				{{/if}}
          		{{/each}}
		</select>
		<label for="digitsAfterDecimal">{{=$ctx.doI18N("form.label.saving.product.decimalplaces")}}</label>
		<input id="digitsAfterDecimal" name="digitsAfterDecimal" title="" style="width: 300px;" value="{{=$ctx.number(digitsAfterDecimal)}}" />
	</fieldset>

	<fieldset>
	<legend>{{=$ctx.doI18N("form.legend.saving.product.deposit.terms")}}</legend>
	<table>
	<tr>
		<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
			<table>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.product.amount.per.period")}}</td>
					<td>
						<input id="savingsDepositAmount" name="savingsDepositAmount" title="" style="width: 125px;" value="{{=$ctx.decimal(savingsDepositAmount, 2)}}" />
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.product.minbalforwithdrawal")}}</td>
					<td>
						<input id="minimumBalanceForWithdrawal" name="minimumBalanceForWithdrawal" title="" style="width: 125px;" value="{{=$ctx.decimal(minimumBalanceForWithdrawal, 2)}}" />
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.product.tenure")}}</td>
					<td>
						<input id="tenure" name="tenure" title="" style="width: 50px;" value="{{=$ctx.number(tenure)}}"/>
						<select name="tenureType" id="tenureType"  title="">
							{{#each tenureTypeOptions}}
								{{#if $ctx.number($parent.parent.data.tenureType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        					{{/each}}
  						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.account.isLockinPeriodAllowed")}}</td>
					<td>
						{{#if isLockinPeriodAllowed}}
						<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" checked=checked />
						{{#else}}
						<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" />
						{{/if}}
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.account.ispartialdepositallowed")}}</td>
					<td>
						{{#if isPartialDepositAllowed}}
						<input type="checkbox" id="isPartialDepositAllowed" name="isPartialDepositAllowed" title="" style="width: 125px;" checked=checked />
						{{#else}}
						<input type="checkbox" id="isPartialDepositAllowed" name="isPartialDepositAllowed" title="" style="width: 125px;" />
						{{/if}}
					</td>
				</tr>
			</table>
		</td>
		<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
			<table>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.product.interestRate")}}</td>
					<td>
						<input id="interestRate" name="interestRate" title="" style="width: 90px;" value="{{=$ctx.decimal(interestRate,2)}}"/>%-
						<select name="interestType" id="interestType"  title="">
							{{#each savingsInterestTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        					{{/each}}
  						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.deposit.product.minInterestRate")}}</td>
					<td>
						<input id="minInterestRate" name="minInterestRate" title="" style="width: 125px;" value="{{=$ctx.decimal(minInterestRate,2)}}"/>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.deposit.product.maxInterestRate")}}</td>
					<td>
						<input id="maxInterestRate" name="maxInterestRate" title="" style="width: 125px;" value="{{=$ctx.decimal(maxInterestRate,2)}}"/>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.product.deposit.every")}}</td>
					<td>
						<input id="depositEvery" name="depositEvery" title="" type="text" value="{{=$ctx.number(depositEvery)}}" style="width: 50px;" />
							
							<select name="frequency" id="frequency"  title="" style="width: 121px;">
								{{#each savingFrequencyOptions}}
								{{#if $ctx.number($parent.parent.data.savingFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  							</select>
					</td>
				</tr>
				<tr id="lockinPeriodRow">
					<td>{{=$ctx.doI18N("form.label.saving.product.lockin.period")}}</td>
					<td>
						<input id="lockinPeriod" name="lockinPeriod" title="" type="text" value="{{=$ctx.number(lockinPeriod)}}" style="width: 50px;" />
						<select name="lockinPeriodType" id="lockinPeriodType"  title="" style="width: 121px;">
							{{#each lockinPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.lockinPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        					{{/each}}
  						</select>
					</td>
				</tr>
			</table>	
		</td>
	</tr>
	</table>	
</fieldset>	
</form>
</script>

	<script id="officeListTemplate" type="text/x-jquery-tmpl">
<table id='officestable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.externalId")}}</th>
			<th>{{=$ctx.doI18N("table.heading.openedOn")}}</th>
			<th>{{=$ctx.doI18N("table.heading.office.parent")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=nameDecorated}}</td>
	<td>{{=externalId}}</td>
	<td>{{=$ctx.globalDate(openingDate)}}</td>
	<td>{{=parentName}}</td>
	<td>
		<a id='editoffice{{=id}}' class='editoffice' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteoffice{{=id}}' class='deleteoffice' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="officeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.office.details")}}</legend>
		<label for="name">{{=$ctx.doI18N("label.office")}}</label>
		<input id="name" name="name" title="" type="text" value="{{=name}}" size="75"/>

        {{#if allowedParents.length > 0}}
		<label for="parentId">{{=$ctx.doI18N("form.label.office.parent")}}</label>
		<select id="parentId" name="parentId" title="">
            <option value="-1">{{=$ctx.doI18N("option.office.first.choice")}}</option>
			{{#each allowedParents}}
				{{#if $ctx.number($parent.parent.data.parentId)===$ctx.number(id)}}
					<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
				{{#else}}
					<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
				{{/if}}
            {{/each}}
		</select>
		{{/if}}

		<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
		<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		<label for="openingDate">{{=$ctx.doI18N("form.label.openedOn")}}</label>
		<input id="openingDate" name="openingDate" title="" type="text" value="{{=$ctx.globalDate(openingDate)}}" size="75" class="datepickerfield" />

		<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
		<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}" size="75"/>
	</fieldset>
</form>
</script>

	<script id="officetransactionListTemplate" type="text/x-jquery-tmpl">
<table id='officetransactionstable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.officetransaction.transactionDate")}}</th>
			<th>{{=$ctx.doI18N("table.heading.officetransaction.fromOfficeName")}}</th>
			<th>{{=$ctx.doI18N("table.heading.officetransaction.toOfficeName")}}</th>
			<th>{{=$ctx.doI18N("table.heading.officetransaction.currency")}}</th>
			<th>{{=$ctx.doI18N("table.heading.officetransaction.transactionAmount")}}</th>
			<th>{{=$ctx.doI18N("table.heading.officetransaction.description")}}</th>
			{{#if $ctx.showTask("DELETEOFFICEMONEYTXN")}}
			<th>&nbsp;</th>
			{{/if}}
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=$ctx.globalDate(transactionDate)}}</td>
	<td>{{=fromOfficeName}}</td>
	<td>{{=toOfficeName}}</td>
	<td>{{=currency.displayLabel}}</td>
	<td align="right">{{=$ctx.decimal(transactionAmount, currency.decimalPlaces)}}</td>
	<td>{{=description}}</td>
	{{#if $ctx.showTask("DELETEOFFICEMONEYTXN")}}
	<td>
		<a id='deleteofficetransaction{{=id}}' class='deleteofficetransaction' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
	{{/if}}
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="officetransactionFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.officetransaction.details")}}</legend>

	<table>
	 <tr>
	  <td>
		<label for="fromOfficeId">{{=$ctx.doI18N("form.label.officetransaction.fromOfficeId")}}</label>
		<select id="fromOfficeId" name="fromOfficeId" title="">
            <option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
			{{#each allowedOffices}}
				<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
            	{{/each}}
		</select>
	  </td>
	  <td>
		<label for="toOfficeId">{{=$ctx.doI18N("form.label.officetransaction.toOfficeId")}}</label>
		<select id="toOfficeId" name="toOfficeId" title="">
            <option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
			{{#each allowedOffices}}
				<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
            	{{/each}}
		</select>
	  </td>
	 </tr>
	 <tr>
	  <td>
		<label for="transactionDate">{{=$ctx.doI18N("form.label.officetransaction.transactionDate")}}</label>
		<input id="transactionDate" name="transactionDate" title="" type="text" value="{{=$ctx.globalDate(transactionDate)}}" size="20" class="datepickerfield" />
	  </td>
	  <td>
		<label for="description">{{=$ctx.doI18N("form.label.officetransaction.description")}}</label>
		<input id="description" name="description" title="" type="text" value="{{=description}}" size="70"/>
	  </td>
	 </tr>
	 <tr>
	  <td>

		<label for="currencyCode">{{=$ctx.doI18N("form.label.officetransaction.currency")}}</label>
		<select id="currencyCode" name="currencyCode" title="" style="width: 300px;">
            <option value="">{{=$ctx.doI18N("option.currency.first.choice")}}</option>
			{{#each currencyOptions}}
					<option value="{{=code}}">{{=name}}</option>
          		{{/each}}
		</select>
	  </td>
	  <td>
		<label for="transactionAmount">{{=$ctx.doI18N("form.label.officetransaction.transactionAmount")}}</label>
		<input id="transactionAmount" name="transactionAmount" title="" type="text" style="width: 125px;" />
	  </td>
	 </tr>
	</table>
	</fieldset>
</form>
</script>

	<script id="configurationListTemplate" type="text/x-jquery-tmpl">
<table id='configurationstable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.enabled")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=name}}</td>
	<td>
	{{#if enabled}}
		{{=$ctx.doI18N("boolean.true")}}
	{{#else}}
		{{=$ctx.doI18N("boolean.false")}}
	{{/if}}
	</td>
	<td>
		{{#if enabled}}
			<a id='disableconfiguration-{{=name}}' class='disableconfiguration' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.disable")}}</a>
		{{#else}}
			<a id='enableconfiguration-{{=name}}' class='enableconfiguration' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.enable")}}</a>
		{{/if}}
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="codeListTemplate" type="text/x-jquery-tmpl">
<table id='codestable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.code.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.code.systemdefined")}}</th>
			<th>&nbsp;</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=name}}</td>
	<td>
	{{#if systemDefined}}
		{{=$ctx.doI18N("boolean.true")}}
	{{#else}}
		{{=$ctx.doI18N("boolean.false")}}
	{{/if}}
	</td>
	<td>
		<a id='editcode{{=id}}' class='editcode' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		{{#if systemDefined}}
			&nbsp;
		{{#else}}
			<a id='deletecode{{=id}}' class='deletecode' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
		{{/if}}
		
	</td>
    <td>
        <a id='editcodevalue{{=id}}' class='editcodevalue' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.addedit.code.value")}}</a>
    </td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="codeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.code.details")}}</legend>
		<label for="name">{{=$ctx.doI18N("label.name")}}</label>
		<input id="name" name="name" title="" type="text" value="{{=name}}" size="75"/>
	</fieldset>
</form>
</script>
	<script id="codeValueFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
    </div>
    <fieldset>
        <legend>{{=$ctx.doI18N("form.legend.add.code.value")}}</legend>
        <div>
            <label for="name">{{=$ctx.doI18N("label.code.value.name")}}</label>
            <input id="name" name="name" title="" type="text" value="" size="75"/>
            <label for="position">{{=$ctx.doI18N("label.code.value.position")}}</label>
            <input id="position" name="position" title="" type="text" value="" size="30"/>
            <button id="addCodeValue" data-codeId='{{=codeId}}'>{{=$ctx.doI18N("button.add.code.value")}}</button>
        </div>
    </fieldset>

</form>
    <div id='codeValue-table'></div>
</script>
	<script id="codeValueTableTemplate" type="text/x-jquery-tmpl">
    <fieldset>
        <legend>{{=$ctx.doI18N("form.legend.code.value.details")}}</legend>
        {{#if crudRows.length > 0 }}
            <label>Click to edit Code Values</label>
            <table width="100%" cellpadding="10" cellspacing="15" >
                <thead>
                    <tr>
                        <th><b><label for="name">{{=$ctx.doI18N("label.code.value.name")}}</label></b></th>
                        <th><b><label for="name">{{=$ctx.doI18N("label.code.value.position")}}</label></b></th>
                        <th>&nbsp;</th>
                    </tr>
                </thead>
            {{#each crudRows}}
                <tr>
                    <td id="name{{=id}}" name="name{{=id}}" class="codeValueName" width="150" style="border-bottom: 1px solid">{{=name}}</td>
                    <td id="position{{=id}}" name="position{{=id}}" class="codeValuePosition" width="100" style="border-bottom: 1px solid">{{=position undef 0}}</td>
                    <td><button id="deleteCodeValue{{=id}}" class="deleteCodeValue" data-codeId='{{=codeId}}'>{{=$ctx.doI18N("button.application.delete")}}</button></td>
                </tr>
            {{/each}}
    
            </table>
        {{#else}}
            <label>No Records exist for edit</label>
        {{/if}}
    </fieldset>
</form>
</script>

	<!-- FIN -->

	<script id="fundListTemplate" type="text/x-jquery-tmpl">
<table id='fundstable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.externalId")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=name}}</td>
	<td>{{=externalId}}</td>
	<td>
		<a id='editfund{{=id}}' class='editfund' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletefund{{=id}}' class='deletefund' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="fundFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.fund.details")}}</legend>
		<label for="name">{{=$ctx.doI18N("label.name")}}</label>
		<input id="name" name="name" title="" type="text" value="{{=name}}" size="75"/>
		<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
		<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}" size="75"/>
	</fieldset>
</form>
</script>

	<script id="employeeListTemplate" type="text/x-jquery-tmpl">

<table id='employeestable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.officename")}}</th>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.isLoanOfficer")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=officeName}}</td>
	<td>{{=displayName}}</td>
	<td>
		{{#if isLoanOfficer}}
			Yes
		{{#else}}
			No
		{{/if}}
	</td>
	<td>
		<a id='editemployee{{=id}}' class='editemployee' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		{{#if isLoanOfficer}}
			<a id='bulkloanreassignment' class='bulkloanreassignment' href='#' style='margin-right: 5px;' data-officeid="{{=officeId}}" data-fromloanofficerid="{{=id}}">{{=$ctx.doI18N("link.action.bulkloanreassignment")}}</a>	
		{{/if}}
		<a id='deleteemployee{{=id}}' class='deleteemployee' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="employeeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.employee.details")}}</legend>
		<table cellspacing="4px" cellpadding="8px">
			<tr>
				<td colspan="2">
					<label for="office">{{=$ctx.doI18N("label.office")}}</label>
					<select id="officeId" name="officeId" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each crudRows}}
							{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
								<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
							{{#else}}
								<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
							{{/if}}
				        {{/each}}
					</select>
				</td>
			</tr>
			<tr>
				<td>
					<label for="firstname">{{=$ctx.doI18N("label.firstname")}}</label>
					<input id="firstname" name="firstname" title="" type="text" value="{{=firstname}}" size="15"/>
				</td>
				<td>	
					<label for="lastname">{{=$ctx.doI18N("label.lastname")}}</label>
					<input id="lastname" name="lastname" title="" type="text" value="{{=lastname}}" size="15"/>
				</td>
			</tr>
			<tr>
				<td colspan="2">
					<label for="isLoanOfficer">{{=$ctx.doI18N("table.heading.isLoanOfficer")}}</label>
					<input id="isLoanOfficer" name="isLoanOfficer" type="checkbox" value="{{=isLoanOfficer}}"/>
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>

	<script id="employeeFormEditTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<table cellspacing="4px" cellpadding="8px">
			<tr>
				<td colspan="2">
					<label for="office">{{=$ctx.doI18N("label.office")}}</label>
					<select id="officeId" name="officeId" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each allowedOffices}}
							{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
								<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
							{{#else}}
								<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
							{{/if}}
				        {{/each}}
					</select>
				</td>
			</tr>
			<tr>
				<td>
					<label for="firstname">{{=$ctx.doI18N("label.firstname")}}</label>
					<input id="firstname" name="firstname" title="" type="text" value="{{=firstname}}" size="15"/>
				</td>
				<td>	
					<label for="lastname">{{=$ctx.doI18N("label.lastname")}}</label>
					<input id="lastname" name="lastname" title="" type="text" value="{{=lastname}}" size="15"/>
				</td>
			</tr>
			<tr>
				<td colspan="2">
					<label for="isLoanOfficer">{{=$ctx.doI18N("table.heading.isLoanOfficer")}}</label>
					{{#if isLoanOfficer}}
						<input id="isLoanOfficer" name="isLoanOfficer" type="checkbox" value="{{=isLoanOfficer}}" checked="true"/>
					{{#else}}
						<input id="isLoanOfficer" name="isLoanOfficer" type="checkbox" value="{{=isLoanOfficer}}"/>
					{{/if}}
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>

	<script id="loanReassignmentFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.loan.reassignment")}}</legend>
		<table cellspacing="4px" cellpadding="8px">
			<tr>
				<td>
					<input type="hidden" id="fromLoanOfficerId" name="fromLoanOfficerId" value="{{=fromLoanOfficerId}}" />
					<label for="toLoanOfficer">{{=$ctx.doI18N("form.label.loan.officer.to")}}</label>
					<select id="toLoanOfficerId" name="toLoanOfficerId" title="">
						<option value="">{{=$ctx.doI18N("option.loanOfficer.first.choice")}}</option>
						{{#each loanOfficerOptions}}
							{{#if $ctx.number($parent.parent.data.fromLoanOfficerId)===$ctx.number(id)}}
								<option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
							{{#else}}
								<option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
							{{/if}}
				        {{/each}}
					</select>
				</td>
				<td>
					<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
					<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
					<label for="assignmentDate">{{=$ctx.doI18N("form.label.aassignment.date")}}</label>
					<input id="assignmentDate" name="assignmentDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(assignmentDate)}}"/>
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>

	<script id="loanUnassignmentFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.loan.unassign.loanofficer")}}</legend>
		<table cellspacing="4px" cellpadding="8px">
			<tr>
				<td>
					<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
					<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
					<label for="unassignedDate">{{=$ctx.doI18N("form.label.unassignment.date")}}</label>
					<input id="unassignedDate" name="unassignedDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(unassignedDate)}}"/>
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>

	<script id="bulkLoanReassignmentFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.bulk.loan.reassignment")}}</legend>
		<table cellspacing="4px" cellpadding="8px">
			<tr>
				<td colspan="3">
					<label for="office">{{=$ctx.doI18N("label.office")}}</label>
					<select id="officeId" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each officeOptions}}
							{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
								<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
							{{#else}}
								<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
							{{/if}}
				        {{/each}}
					</select>
				</td>	
			</tr>
			<tr>
				<td colspan="3">
					<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
					<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
					<label for="assignmentDate">{{=$ctx.doI18N("form.label.aassignment.date")}}</label>
					<input id="assignmentDate" name="assignmentDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(assignmentDate)}}"/>
				</td>
			</tr>
			<tr>
				<td colspan="2">
					<label for="fromLoanOfficer">{{=$ctx.doI18N("form.label.loan.officer.from")}}</label>
					<select id="fromLoanOfficerId" name="fromLoanOfficerId" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each loanOfficerOptions}}
							{{#if $ctx.number($parent.parent.data.fromLoanOfficerId)===$ctx.number(id)}}
								<option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
							{{#else}}
								<option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
							{{/if}}
				        {{/each}}
					</select>
				</td>
				<td>
					<label for="toLoanOfficer">{{=$ctx.doI18N("form.label.loan.officer.to")}}</label>
					<select id="toLoanOfficerId" name="toLoanOfficerId" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each loanOfficerOptions}}
							{{#if $ctx.number($parent.parent.data.fromLoanOfficerId)!==$ctx.number(id)}}}
								<option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
							{{/if}}
				        {{/each}}
					</select>
				</td>
			</tr>
			{{#if accountSummaryCollection}}
				{{#if accountSummaryCollection.clients.length > 0 }}
					<tr>
						<td>{{=$ctx.doI18N("label.clients")}}</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
					</tr>
					{{#each accountSummaryCollection.clients}}
						<tr>
							<td><input type="checkbox" class="parentCheckBox" data-id="{{=id}}"/></td>
							<td>{{=displayName}}</td>
							<td>&nbsp;</td>
						</tr>
						{{#each loans}}
							<tr>
								<td>&nbsp;</td>
								<td><input type="checkbox" name="loans" value="{{=id}}" data-parentid="{{=$parent.parent.data.id}}"/></td>
								<td>{{=productName}}: &#35;{{=id}}</td>
							</tr>
						{{/each}}
					{{/each}}
				{{/if}}
				{{#if accountSummaryCollection.groups.length > 0 }}
					<tr>
						<td>{{=$ctx.doI18N("label.groups")}}</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
					</tr>
					{{#each accountSummaryCollection.groups}}
						<tr>
							<td><input type="checkbox" class="parentCheckBox" data-id="{{=id}}"/></td>
							<td>{{=name}}</td>
							<td>&nbsp;</td>
						</tr>
						{{#each loans}}
						<tr>
							<td>&nbsp;</td>
							<td><input type="checkbox" name="loans" value="{{=id}}" data-parentid="{{=$parent.parent.data.id}}"/></td>
							<td>{{=productName}}: &#35;{{=id}}</td>
						</tr>
						{{/each}}
					{{/each}}
				{{/if}}
			{{/if}}
		</table>
	</fieldset>
</form>
</script>

	<script id="chargeListTemplate" type="text/x-jquery-tmpl">
<table id='chargestable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.currency")}}</th>
			<th>{{=$ctx.doI18N("table.heading.amount")}}</th>
			<th>{{=$ctx.doI18N("table.heading.charge.chargeAppliesTo")}}</th>
			<th>{{=$ctx.doI18N("table.heading.isPenalty")}}</th>
			<th>{{=$ctx.doI18N("table.heading.calculationType")}}</th>
			<th>{{=$ctx.doI18N("table.heading.charge.chargeTimeType")}}</th>
			<th>{{=$ctx.doI18N("table.heading.active")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=name}}</td>
	<td>{{=currency.displayLabel}}</td>
	<td>{{=$ctx.decimal(amount, currency.decimalPlaces)}}</td>
	<td>{{=$ctx.doI18N(chargeAppliesTo.code)}}</td>
	<td>
		{{#if penalty}} 
			{{=$ctx.doI18N("boolean.true")}}
		{{#else}}
			{{=$ctx.doI18N("boolean.false")}}
		{{/if}}
	</td>
	<td>{{=$ctx.doI18N(chargeCalculationType.code)}}</td>
	<td>{{=$ctx.doI18N(chargeTimeType.code)}}</td>
	<td>
		{{#if active}} 
			{{=$ctx.doI18N("boolean.true")}}
		{{#else}}
			{{=$ctx.doI18N("boolean.false")}}
		{{/if}}
	</td>
	<td>
		<a id='editcharge{{=id}}' class='editcharge' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletecharge{{=id}}' class='deletecharge' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="chargeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		<legend>{{=$ctx.doI18N("form.legend.charge.details")}}</legend>
		<label for="name">{{=$ctx.doI18N("label.name")}}</label>
		<input id="name" name="name" title="" type="text" value="{{=name}}" size="25"/>
		<label for="currencyCode">{{=$ctx.doI18N("label.currency")}}</label>
		<select id="currencyCode" name="currencyCode" title="" style="width: 300px;">
        	<option value="">{{=$ctx.doI18N("option.currency.first.choice")}}</option>
			{{#if currency}}
				{{#each currencyOptions}}
	              	{{#if $parent.parent.data.currency.code===code}}
						<option value="{{=code}}" selected="selected">{{=name}}</option>
					{{#else}}
						<option value="{{=code}}">{{=name}}</option>
					{{/if}}
				{{/each}}
			{{#else}}
				{{#each currencyOptions}}
					<option value="{{=code}}">{{=name}}</option>
				{{/each}}
			{{/if}}
		</select>
		<label for="chargeAppliesTo">{{=$ctx.doI18N("form.label.charge.applies.to")}}</label>
		<select id="chargeAppliesTo" name="chargeAppliesTo" title="" style="width: 300px">
			<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
			{{#if chargeAppliesTo}}
				{{#each chargeAppliesToOptions}}
	              	{{#if $ctx.number($parent.parent.data.chargeAppliesTo.id)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
					{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
					{{/if}}
				{{/each}}
			{{#else}}
				{{#each chargeAppliesToOptions}}
					<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
				{{/each}}
			{{/if}}
		</select>
		<label for="chargeTimeType">{{=$ctx.doI18N("form.label.charge.time")}}</label>
		<select id="chargeTimeType" name="chargeTimeType" title="" style="width: 300px">
			<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
			{{#if chargeTimeType}}
				{{#each chargeTimeTypeOptions}}
	              	{{#if $ctx.number($parent.parent.data.chargeTimeType.id)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
					{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
					{{/if}}
				{{/each}}
			{{#else}}
				{{#each chargeTimeTypeOptions}}
					<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
				{{/each}}
			{{/if}}
		</select>
		<label for="chargeCalculationType">{{=$ctx.doI18N("form.label.charge.calculation.type")}}</label>
		<select id="chargeCalculationType" name="chargeCalculationType" title="" style="width: 300px">
			<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
			{{#if chargeCalculationType}}
				{{#each chargeCalculationTypeOptions}}
	              	{{#if $ctx.number($parent.parent.data.chargeCalculationType.id)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
					{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
					{{/if}}
				{{/each}}
			{{#else}}
				{{#each chargeCalculationTypeOptions}}
					<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
				{{/each}}
			{{/if}}
		</select>
        <label for="amount">{{=$ctx.doI18N("label.amount")}}</label>
        <input id="amount" name="amount" title="" type="text" value="{{=$ctx.decimal(amount, 2)}}" size="25"/>
		<label for="active">{{=$ctx.doI18N("label.active")}}</label>
		{{#if active}}
			<input type="checkbox" id="active" name="active" title="" style="width: 125px;" checked=checked />
		{{#else}}
			<input type="checkbox" id="active" name="active" title="" style="width: 125px;" />
		{{/if}}

		<label for="penalty">{{=$ctx.doI18N("label.isPenalty")}}</label>
		{{#if penalty}}
			<input type="checkbox" id="penalty" name="penalty" title="" style="width: 125px;" checked=checked />
		{{#else}}
			<input type="checkbox" id="penalty" name="penalty" title="" style="width: 125px;" />
		{{/if}}
	</fieldset>
</form>
</script>

	<script id="orgCurrencyFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("legend.currency")}}</legend>

		<div class="multiselectwidget" style="width:400px;height:125px;">
			<label for="notSelectedCurrencies">{{=$ctx.doI18N("form.label.configuration.available.currencies")}}</label>
			<select id="notSelectedCurrencies" name="notSelectedCurrencies" title="" class="multiselectwidget" multiple="multiple" style="width:400px;height:125px;">
			{{#each currencyOptions}}
				{{#if $ctx.number($parent.parent.data.code)===code}}
					<option value="{{=code}}" selected="selected">{{=displayLabel}}</option>
				{{#else}}
					<option value="{{=code}}">{{=displayLabel}}</option>
				{{/if}}
            {{/each}}
			</select>
			<a href="unknown.html" id="addcurrencies" class="multiselectwidget">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
		</div>
				  
		<div class="multiselectwidget">
			<label for="currencies">{{=$ctx.doI18N("form.label.configuration.allowed.currencies")}}</label>
			<select id="currencies" name="currencies" title="" class="multiselectwidget" multiple="multiple" style="width:400px;height:125px;">
			{{#each selectedCurrencyOptions}}
				{{#if $ctx.number($parent.parent.data.code)===code}}
					<option value="{{=code}}" selected="selected">{{=displayLabel}}</option>
				{{#else}}
					<option value="{{=code}}">{{=displayLabel}}</option>
				{{/if}}
            {{/each}}
			</select>
			<a href="unknown.html" id="removecurrencies" class="multiselectwidget">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
		</div>
	</fieldset>
</form>
</script>

	<script id="changePasswordFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" name="changePasswordForm">
    <div id="formerrors"></div>
        <label for="password">{{=$ctx.doI18N("form.label.new.password")}}</label>
		<input id="password" name="password" title="" type="password" value="{{=password}}" size="75"/>

        <label for="repeatPassword">{{=$ctx.doI18N("form.label.repeat.new.password")}}</label>
		<input id="repeatPassword" name="repeatPassword" title="" type="password" value="{{=passwordrepeat}}" size="75"/>
</form>
</script>

	<script id="userSettingsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" name="changeUserSettingsForm">
    <div id="formerrors"></div>
		<label for="username">{{=$ctx.doI18N("label.username")}}</label>
		<input id="username" name="username" title="" type="text" value="{{=username}}" size="75"/>

        <label for="firstname">{{=$ctx.doI18N("label.firstname")}}</label>
		<input id="firstname" name="firstname" title="The first name of user." type="text" value="{{=firstname}}" size="75"/>

        <label for="lastname">{{=$ctx.doI18N("label.lastname")}}</label>
		<input id="lastname" name="lastname" title="The last name of user." type="text" value="{{=lastname}}" size="75"/>

		<label for="email">{{=$ctx.doI18N("label.email")}}</label>
		<input id="email" name="email" title="" type="text" value="{{=email}}" size="75"/>
</form>
</script>

	<script id="userSettingsTemplate" type="text/x-jquery-tmpl">
<h2>{{=$ctx.doI18N("label.office")}}</h2>
<div class="row">
	<span class="rowlabel">{{=$ctx.doI18N("label.office")}}</span>
	<span class="rowvalue">{{=officeName}}</span>
</div>
<br/>

<h2>{{=$ctx.doI18N("form.label.heading.details")}}</h2>
<div class="row">
	<span class="rowlabel">{{=$ctx.doI18N("label.name")}}</span>
	<span class="rowvalue">{{=firstname}}&nbsp;{{=lastname}}</span>
</div>
<div class="row">
	<span class="rowlabel">{{=$ctx.doI18N("label.username")}}</span>
	<span class="rowvalue">{{=username}}</span>
</div>
<div class="row">
	<span class="rowlabel">{{=$ctx.doI18N("label.email")}}</span>
	<span class="rowvalue">{{=email}}</span>
</div>
<div class="row">
	<span class="rowlabel">&nbsp;</span>
	<span class="rowvalue"><a href="#" id="changedetails">{{=$ctx.doI18N("form.link.changedetails")}}</a></span>
</div>
<br/>

<h2>{{=$ctx.doI18N("form.label.heading.security")}}</h2>
<div class="row">
	<span class="rowlabel">{{=$ctx.doI18N("form.label.password")}}</span>
	<span class="rowvalue"><a href="#" id="changepassword">{{=$ctx.doI18N("form.link.changepassword")}}</a></span>
</div>
<br/>

<h2>{{=$ctx.doI18N("form.label.heading.roles")}}</h2>
{{#each selectedRoles}}
<div class="row">
	<span class="rowlabel">&nbsp;</span>
	<span class="rowvalue"><b>{{=name}}</b> - <i>{{=description}}</i></span>
</div>
{{/each}}
</script>

	<script id="permissionListTemplate" type="text/x-jquery-tmpl">
		<div id=permissionsDiv></div>
</script>

	<script id="permissionFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.role.maintainMC")}}</legend>
		<div id=makerCheckerPermissionsDiv></div>
	</fieldset>
</form>
</script>

	<script id="rolePermissionsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.role.permissions")}}</legend>
		<table width="100%">
		  <tr>
		    <td valign="top" width="50%">
			<label for="name">{{=$ctx.doI18N("label.name")}}</label>
			<input title="" type="text" readonly="readonly" value="{{=name}}" size="50"/>
		    </td>
		    <td valign="top" width="50%">
			<label for="description">{{=$ctx.doI18N("form.label.role.description")}}</label>
			<textarea cols="50" rows="2" title="" readonly="readonly" >{{=description}}</textarea>
		    <td>
		  </tr>
		</table>
		<div id=rolePermissionsDiv></div>
	</fieldset>
</form>
</script>

	<script id="roleFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.role.details")}}</legend>

		<label for="name">{{=$ctx.doI18N("label.name")}}</label>
		<input id="name" name="name" title="" type="text" value="{{=name}}" size="75"/>

		<label for="description">{{=$ctx.doI18N("form.label.role.description")}}</label>
		<textarea cols="73" rows="3" id="description" name="description" title="">{{=description}}</textarea>
	</fieldset>
</form>
</script>

	<script id="roleListTemplate" type="text/x-jquery-tmpl">
<table id='rolestable' width='100%'>
<thead>
	<tr>
		<th>{{=$ctx.doI18N("table.heading.name")}}</th>
		<th>{{=$ctx.doI18N("table.heading.description")}}</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=name}}</td>
	<td>{{=description}}</td>
	<td>
		<a id='editrole{{=id}}' class='editrole' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='permissionsrole{{=id}}' class='permissionsrole' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.permissionsrole")}}</a>
		<a id='deleterole{{=id}}' class='deleterole' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="userListTemplate" type="text/x-jquery-tmpl">
<table id='userstable' width='100%'>
<thead>
	<tr>
		<th>{{=$ctx.doI18N("table.heading.officename")}}</th>
		<th>{{=$ctx.doI18N("table.heading.username")}}</th>
        	<th>{{=$ctx.doI18N("table.heading.name")}}</th>
		<th>{{=$ctx.doI18N("table.heading.email")}}</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=officeName}}</td>
	<td>{{=username}}</td>
    <td>{{=lastname}}, {{=firstname}}</td>
	<td>{{=email}}</td>
	<td>
		<a id='edituser{{=id}}' class='edituser' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteuser{{=id}}' class='deleteuser' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
		<a id='changepassworduser{{=id}}' class='changepassworduser' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.changepassword")}}</a>
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="userFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.user.details")}}</legend>

		<label for="username">{{=$ctx.doI18N("label.username")}}</label>
		<input id="username" name="username" title="" type="text" value="{{=username}}" size="75"/>

        <label for="firstname">{{=$ctx.doI18N("label.firstname")}}</label>
		<input id="firstname" name="firstname" title="" type="text" value="{{=firstname}}" size="75"/>

        <label for="lastname">{{=$ctx.doI18N("label.lastname")}}</label>
		<input id="lastname" name="lastname" title="" type="text" value="{{=lastname}}" size="75"/>

		<label for="email">{{=$ctx.doI18N("label.email")}}</label>
		<input id="email" name="email" title="" type="text" value="{{=email}}" size="75"/>

		<label for="officeId">{{=$ctx.doI18N("label.office")}}</label>
		<select id="officeId" name="officeId" title="">
			<option value="-1">{{=$ctx.doI18N("option.office.first.choice")}}</option>
			{{#each allowedOffices}}
				{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
					<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
				{{#else}}
					<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
				{{/if}}
            {{/each}}
		</select>
		<br/>

		<div class="multiselectwidget">
			<label for="notSelectedRoles">{{=$ctx.doI18N("form.label.user.available.roles")}}</label>
			<select id="notSelectedRoles" name="notSelectedRoles" title="Available application roles." class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:450px;height:125px;">
			{{#each availableRoles}}
				<option value="{{=id}}">{{=name}}</option>
            {{/each}}
			</select>
			<a href="#" id="addroles" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
		</div>
		
		<div class="multiselectwidget">
			<label for="roles">{{=$ctx.doI18N("form.label.user.selected.roles")}}</label>
			<select id="roles" name="roles" title="User selected roles." class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:450px;height:125px;">
			{{#each selectedRoles}}
				<option value="{{=id}}" selected="selected">{{=name}}</option>
            {{/each}}
			</select>
			<a href="#" id="removeroles" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
		</div>
	</fieldset>
</form>
</script>

	<script id="datatableListTemplate" type="text/x-jquery-tmpl">
<table id='datatablestable' width='100%'>
<thead>
	<tr>
		<th>{{=$ctx.doI18N("table.heading.application.table")}}</th>
		<th>{{=$ctx.doI18N("table.heading.registered.datatable")}}</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=applicationTableName}}</td>
	<td>{{=registeredTableName}}</td>
	<td>
		{{#if $ctx.showTask("DEREGISTERDATATABLE")}}
		<a id='deregisterdatatable{{=registeredTableName}}' class='deregisterdatatable' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.deregister")}}</a>
		{{#else}}
		&nbsp;
		{{/if}}
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>


	<script id="datatableFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" name="registerDatatableForm">
    <div id="formerrors"></div>
	<label for="registeredTableName">{{=$ctx.doI18N("form.label.registeredTableName")}}</label>
	<input id="registeredTableName" name="registeredTableName" title="" type="text" value="{{=registeredTableName}}" size="75"/>

       <label for="applicationTableName">{{=$ctx.doI18N("form.label.applicationTableName")}}</label>
	<input id="applicationTableName" name="applicationTableName" title="" type="text" value="{{=applicationTableName}}" size="75"/>
</form>
</script>

	<!-- end of admin templates -->

	<!-- Audit Search -->
	<script id="auditSearchTemplate" type="text/x-jquery-tmpl">
<table width=100%>
<tr>
<td valign="top">
	<button type="submit" class="searchaudit" id="searchaudit" name="_eventId_submit">{{=$ctx.doI18N("button.search")}}</button>
</td>
<td>
	<table width="100%">
	<tr>
		{{#if useType==="audit"}}
		<td>
			<label for="auditprocessingresult">{{=$ctx.doI18N("processingResult")}}</label>
			<select name="auditprocessingresult" id="auditprocessingresult" >
				<option value="ALL" selected="selected">{{=$ctx.doI18N("option.all")}}</option>
			{{#each crudRows.processingResults}}
				<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(processingResult)}}</option>
	    		{{/each}}
			</select>
		</td>
		{{/if}}
		<td>
			<label for="auditdatetimefrom">{{=$ctx.doI18N("madeOnDateFrom")}}</label>
			<input id="auditdatetimefrom" name="auditdatetimefrom" type="text" class="datepickerfield" />
		</td>
		<td>
			<label for="auditdatetimeto">{{=$ctx.doI18N("madeOnDateTo")}}</label>
			<input id="auditdatetimeto" name="auditdatetimeto" type="text" class="datepickerfield" />
		</td>
		<td>
			<label for="auditmaker">{{=$ctx.doI18N("maker")}}</label>
			<select name="auditmaker" id="auditmaker" >
				<option value="ALL" selected="selected">{{=$ctx.doI18N("option.all")}}</option>
			{{#each crudRows.appUsers}}
				<option value="{{=id}}">{{=username}}</option>
	    		{{/each}}
			</select>
		</td>
		<td>
			<label for="auditaction">{{=$ctx.doI18N("actionName")}}</label>
			<select name="auditaction" id="auditaction" >
				<option value="ALL" selected="selected">{{=$ctx.doI18N("option.all")}}</option>
			{{#each crudRows.actionNames}}
				<option value="{{=$data}}">{{=$ctx.doI18N($data)}}</option>
	    		{{/each}}
			</select>
		</td>
		<td>
			<label for="auditentity">{{=$ctx.doI18N("entityName")}}</label>
			<select name="auditentity" id="auditentity" >
				<option value="ALL" selected="selected">{{=$ctx.doI18N("option.all")}}</option>
			{{#each crudRows.entityNames}}
				<option value="{{=$data}}">{{=$ctx.doI18N($data)}}</option>
	    		{{/each}}
			</select>
		</td>
	</tr>
	<tr>
		<td>
			<label for="auditresourceId">{{=$ctx.doI18N("resourceId")}}</label>
			<input id="auditresourceId" name="auditresourceId" type="text" size="10" value="" />
		</td>

		{{#if useType==="audit"}}
		<td>
			<label for="auditchecker">{{=$ctx.doI18N("checker")}}</label>
			<select name="auditchecker" id="auditchecker" >
				<option value="ALL" selected="selected">{{=$ctx.doI18N("option.all")}}</option>
			{{#each crudRows.appUsers}}
				<option value="{{=id}}">{{=username}}</option>
	    		{{/each}}
			</select>
		</td>
		<td>
			<label for="auditcheckeddatetimefrom">{{=$ctx.doI18N("checkedOnDateFrom")}}</label>
			<input id="auditcheckeddatetimefrom" name="auditcheckeddatetimefrom" type="text" class="datepickerfield" />
		</td>
		<td>
			<label for="auditcheckeddatetimeto">{{=$ctx.doI18N("checkedOnDateTo")}}</label>
			<input id="auditcheckeddatetimeto" name="auditcheckeddatetimeto" type="text" class="datepickerfield" />
		</td>
		{{/if}}

	</tr>
	</table>
</td>
</table>
	<div id="auditSearchResults"></div>
	
</script>

	<script id="auditListTemplate" type="text/x-jquery-tmpl">
<table id='auditstable' width='100%'>
	<thead>
		<tr>

			<th><b>{{=$ctx.doI18N("id")}}</b></th>
			{{#if useType==="audit"}}
				<th><b>{{=$ctx.doI18N("processingResult")}}</b></th>
			{{/if}}
			<th><b>{{=$ctx.doI18N("madeOnDate")}}</b></th>
			<th><b>{{=$ctx.doI18N("maker")}}</b></th>
			<th><b>{{=$ctx.doI18N("officeName")}}</b></th>
			<th><b>{{=$ctx.doI18N("actionName")}}</b></th>
			<th><b>{{=$ctx.doI18N("entityName")}}</b></th>
			<th><b>{{=$ctx.doI18N("resourceId")}}</b></th>
			<th><b>{{=$ctx.doI18N("subresourceId")}}</b></th>
			{{#if useType==="audit"}}
				<th><b>{{=$ctx.doI18N("checkedOnDate")}}</b></th>
				<th><b>{{=$ctx.doI18N("checker")}}</b></th>
			{{/if}}
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	{{#if $parent.parent.data.useType==="audit"}}
		<td>{{=$ctx.doI18N(processingResult)}}</td>
	{{/if}}
	<td>{{=$ctx.globalDateTime(madeOnDate)}}</td>
	<td>{{=maker}}</td>
	<td>{{=officeName}}</td>
	<td>{{=$ctx.doI18N(actionName)}}</td>
	<td>{{=$ctx.doI18N(entityName)}}</td>
	<td>{{=resourceId}}</td>
	<td>{{=subresourceId}}</td>
	{{#if $parent.parent.data.useType==="audit"}}
		<td>{{=$ctx.globalDateTime(checkedOnDate)}}</td>
		<td>{{=checker}}</td>
	{{/if}}
	<td>
		<a id='viewaudit{{=id}}' class='viewaudit' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewaudit")}}</a>
		{{#if $parent.parent.data.useType==="makerchecker"}}
			<a id='deletemc{{=id}}' class='deletemc' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
			<a id='approvemc{{=id}}' class='approvemc' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.approve")}}</a>
		{{/if}}
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>


	<script id="auditEntryTemplate" type="text/x-jquery-tmpl">

<table width='100%'>
	<thead>
		<tr>
		{{#if crudRows.officeName}}
			<th><b>{{=$ctx.doI18N("officeName")}}</b></th>
		{{/if}}
		{{#if crudRows.groupName}}
			<th><b>{{=$ctx.doI18N(crudRows.groupLevelName)}}</b></th>
		{{/if}}
		{{#if crudRows.clientName}}
			<th><b>{{=$ctx.doI18N("clientName")}}</b></th>
		{{/if}}
		{{#if crudRows.loanAccountNo}}
			<th><b>{{=$ctx.doI18N("loanAccountNo")}}</b></th>
		{{/if}}
		{{#if crudRows.savingsAccountNo}}
			<th><b>{{=$ctx.doI18N("savingsAccountNo")}}</b></th>
		{{/if}}
		</tr>
	</thead>
	<tbody>
	<tr>
	{{#if crudRows.officeName}}
		<td>{{=crudRows.officeName}}</td>
	{{/if}}
	{{#if crudRows.groupName}}
		<td>{{=crudRows.groupName}}</td>
	{{/if}}
	{{#if crudRows.clientName}}
		<td>{{=crudRows.clientName}}</td>
	{{/if}}
	{{#if crudRows.loanAccountNo}}
		<td>{{=crudRows.loanAccountNo}}</td>
	{{/if}}
	{{#if crudRows.savingsAccountNo}}
		<td>{{=crudRows.savingsAccountNo}}</td>
	{{/if}}
</tr>
	</tbody>
</table>
<hr>

<table width='100%'>
	<thead>
		<tr>
			<th><b>{{=$ctx.doI18N("id")}}</b></th>
			<th><b>{{=$ctx.doI18N("processingResult")}}</b></th>
			<th><b>{{=$ctx.doI18N("madeOnDate")}}</b></th>
			<th><b>{{=$ctx.doI18N("maker")}}</b></th>
			<th><b>{{=$ctx.doI18N("resourceId")}}</b></th>
			<th><b>{{=$ctx.doI18N("subresourceId")}}</b></th>
			<th><b>{{=$ctx.doI18N("checkedOnDate")}}</b></th>
			<th><b>{{=$ctx.doI18N("checker")}}</b></th>
		</tr>
	</thead>
	<tbody>
<tr>
	<td>{{=crudRows.id}}</td>
	<td>{{=$ctx.doI18N(crudRows.processingResult)}}</td>
	<td>{{=$ctx.globalDateTime(crudRows.madeOnDate)}}</td>
	<td>{{=crudRows.maker}}</td>
	<td>{{=crudRows.resourceId}}</td>
	<td>{{=crudRows.subresourceId}}</td>
	<td>{{=$ctx.globalDateTime(crudRows.checkedOnDate)}}</td>
	<td>{{=crudRows.checker}}</td>
</tr>
	</tbody>
</table>
<hr>
<br>
{{=$ctx.showJson(crudRows.commandAsJson))!}}

</script>



	<!--GK Risk Analysis View/Add/Edit-->
	<script id="clientRiskAnalysisFormTemplate" type="text/x-jquery-tmpl">

<div id=GKRiskAnalysis>

{{#if displayMode != "view"}}
<form id="entityform">
    	<div id="formerrors"></div>
{{/if}}

	<fieldset>
		<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />


	<table width="100%">
		<tr>
			<td width="30%">(0) {{=$ctx.doI18N("proposed_loan_amount")}}</td>
			<td width="1%"></td>
			<td width="9%">{{=$ctx.GKRA_MakeAmountInputField("proposed_loan_amount", proposed_loan_amount, displayMode)!}}</td>
			<td width="20%"></td>
			<td width="40%" align="right" colspan="3">
{{#if displayMode == "view"}}
  {{#if displayButtons == "editDelete"}}
	<span id="modifycellToolbar" class="ui-widget-header ui-corner-all">

	{{#if $ctx.hasDataTablePermission("UPDATE_risk_analysis")}}
		<button id="editclientriskanalysis">{{=$ctx.doI18N("Datatables.Edit")}}</button>
	{{/if}}
	{{#if $ctx.hasDataTablePermission("DELETE_risk_analysis")}}
		<button id="deleteclientriskanalysis">{{=$ctx.doI18N("Datatables.Delete")}}</button>
	{{/if}}
	</span>
  {{#else}}
	<span id="toolbar" class="ui-widget-header ui-corner-all">
	{{#if $ctx.hasDataTablePermission("CREATE_risk_analysis")}}
   		<button id="addclientriskanalysis">{{=$ctx.doI18N("Datatables.Add")}}</button>
	{{/if}}
	</span>
  {{/if}}
{{/if}}
			</td>
		</tr>
	</table>
	<hr>
	<table width="100%">
		<tr>
			<td width="30%"><b>{{=$ctx.doI18N("riskanalysis.label.assets")}}</b></td>
			<td width="1%"></td>
			<td width="9%"></td>
			<td width="20%"></td>
			<td width="30%"></td>
			<td width="1%"></td>
			<td width="9%"></td>
		</tr>
		<tr>
			<td>(1) {{=$ctx.doI18N("assets_cash")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("assets_cash", assets_cash, displayMode)!}}</td>
			<td></td>
			<td>(2) {{=$ctx.doI18N("assets_bank_accounts")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("assets_bank_accounts", assets_bank_accounts, displayMode)!}}</td>
		</tr>
		<tr>
			<td>(3) {{=$ctx.doI18N("assets_accounts_receivable")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("assets_accounts_receivable", assets_accounts_receivable, displayMode)!}}</td>
			<td></td>
			<td>(4) {{=$ctx.doI18N("assets_inventory")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("assets_inventory", assets_inventory, displayMode)!}}</td>
		</tr>
		<tr>
			<td>(5) {{=$ctx.doI18N("assets_total_fixed_business")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("assets_total_fixed_business", assets_total_fixed_business, displayMode)!}}</td>
			<td></td>
			<td>(6) {{=$ctx.doI18N("assets_total_business")}} (sum 1:5)</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("assets_total_business", assets_total_business, displayMode, "calc")!}}</td>
		</tr>
		<tr>
			<td>(7) {{=$ctx.doI18N("assets_total_household")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("assets_total_household", assets_total_household, displayMode)!}}</td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
	</table>
	<hr>
	<table width="100%">
		<tr>
			<td width="30%"><b>{{=$ctx.doI18N("riskanalysis.label.liabilities")}}</b></td>
			<td width="1%"></td>
			<td width="9%"></td>
			<td width="20%"></td>
			<td width="30%"></td>
			<td width="1%"></td>
			<td width="9%"></td>
		</tr>
		<tr>
			<td>(8) {{=$ctx.doI18N("liabilities_accounts_payable")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("liabilities_accounts_payable", liabilities_accounts_payable, displayMode)!}}</td>
			<td></td>
			<td>(9) {{=$ctx.doI18N("liabilities_business_debts")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("liabilities_business_debts", liabilities_business_debts, displayMode)!}}</td>
		</tr>
		<tr>
			<td>(10) {{=$ctx.doI18N("liabilities_total_business")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("liabilities_total_business", liabilities_total_business, displayMode)!}}</td>
			<td></td>
			<td>(11) {{=$ctx.doI18N("liabilities_equity_working_capital")}} (6-10)</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("liabilities_equity_working_capital", liabilities_equity_working_capital, displayMode, "calc")!}}</td>
		</tr>
		<tr>
			<td>(12) {{=$ctx.doI18N("liabilities_total_household")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("liabilities_total_household", liabilities_total_household, displayMode)!}}</td>
			<td></td>
			<td>(13) {{=$ctx.doI18N("liabilities_household_equity")}} (7 -12)</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("liabilities_household_equity", liabilities_household_equity, displayMode, "calc")!}}</td>
		</tr>
	</table>
	<hr>

	<table width="100%">
		<tr>
			<td width="30%"><b>{{=$ctx.doI18N("riskanalysis.label.cashflow")}}</b></td>
			<td width="1%"></td>
			<td width="9%"></td>
			<td width="20%"></td>
			<td width="30%"></td>
			<td width="1%"></td>
			<td width="9%"></td>
		</tr>
		<tr>
			<td>(14) {{=$ctx.doI18N("cashflow_cash_sales")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_cash_sales", cashflow_cash_sales, displayMode)!}}</td>
			<td></td>
			<td>(15) {{=$ctx.doI18N("cashflow_cash_sales2")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_cash_sales2", cashflow_cash_sales2, displayMode)!}}</td>
		</tr>
		<tr>
			<td>(16) {{=$ctx.doI18N("cashflow_cost_goods_sold")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_cost_goods_sold", cashflow_cost_goods_sold, displayMode)!}}</td>
			<td></td>
			<td>(17) {{=$ctx.doI18N("cashflow_cost_goods_sold2")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_cost_goods_sold2", cashflow_cost_goods_sold2, displayMode)!}}</td>
		</tr>
		<tr>
			<td>(18) {{=$ctx.doI18N("cashflow_gross_profit")}} ((14+15)-(16+17))</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_gross_profit", cashflow_gross_profit, displayMode, "calc")!}}</td>
			<td></td>
			<td>(19) {{=$ctx.doI18N("cashflow_other_income1")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_other_income1", cashflow_other_income1, displayMode)!}}</td>
		</tr>
		<tr>
			<td>(20) {{=$ctx.doI18N("cashflow_total_income2")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_total_income2", cashflow_total_income2, displayMode)!}}</td>
			<td></td>
			<td>(21) {{=$ctx.doI18N("cashflow_household_expense")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_household_expense", cashflow_household_expense, displayMode)!}}</td>
		</tr>
		<tr>
			<td>(22) {{=$ctx.doI18N("cashflow_payments_to_savings")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_payments_to_savings", cashflow_payments_to_savings, displayMode)!}}</td>
			<td></td>
			<td>(23) {{=$ctx.doI18N("cashflow_operational_expenses")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_operational_expenses", cashflow_operational_expenses, displayMode)!}}</td>
		</tr>
		<tr>
			<td>(24) {{=$ctx.doI18N("cashflow_disposable_income")}} ((18+19+20)-(21+22+23))</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_disposable_income", cashflow_disposable_income, displayMode, "calc")!}}</td>
			<td></td>
			<td>(25) {{=$ctx.doI18N("cashflow_amount_loan_installment")}}</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_amount_loan_installment", cashflow_amount_loan_installment, displayMode)!}}</td>
		</tr>
		<tr>
			<td>(26) {{=$ctx.doI18N("cashflow_available_surplus")}} (24-25)</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("cashflow_available_surplus", cashflow_available_surplus, displayMode, "calc")!}}</td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
	</table>
	<hr>

	<table width="100%">
		<tr>
			<td width="30%"><b>{{=$ctx.doI18N("riskanalysis.label.financial.indicators")}}</b></td>
			<td width="1%"></td>
			<td width="9%"></td>
			<td width="20%"></td>
			<td width="30%"></td>
			<td width="1%"></td>
			<td width="9%"></td>
		</tr>
		<tr>
			<td>(27) {{=$ctx.doI18N("fi_inventory_turnover")}} (16/4)</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("fi_inventory_turnover", fi_inventory_turnover, displayMode, "calc")!}}</td>
			<td></td>
			<td>(28) {{=$ctx.doI18N("fi_gross_margin")}} ((14+15-16)/14)</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("fi_gross_margin", fi_gross_margin, displayMode, "calc")!}}</td>
		</tr>
		<tr>
			<td>(29) {{=$ctx.doI18N("fi_indebtedness")}} (10/11)</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("fi_indebtedness", fi_indebtedness, displayMode, "calc")!}}</td>
			<td></td>
			<td>(30) {{=$ctx.doI18N("fi_loan_recommendation")}} ((10 + 0)/11)</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("fi_loan_recommendation", fi_loan_recommendation, displayMode, "calc")!}}</td>
		</tr>
		<tr>
			<td>(31) {{=$ctx.doI18N("fi_roe")}} (18/11) </td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("fi_roe", fi_roe, displayMode, "calc")!}}</td>
			<td></td>
			<td>(32) {{=$ctx.doI18N("fi_repayment_capacity")}} (25/24)</td>
			<td></td>
			<td>{{=$ctx.GKRA_MakeAmountInputField("fi_repayment_capacity", fi_repayment_capacity, displayMode, "calc")!}}</td>
		</tr>
	</table>

	</fieldset>


{{#if displayMode != "view"}}
</form>
{{/if}}

</div>
</script>


	<!--Ceda client additional data-->
	<script id="ceda_client_additional_data_template"
		type="text/x-jquery-tmpl">

	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Gender_cd", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Date of Birth", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "EducationLevel_cd", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "MaritalStatus_cd", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Number of children", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Citizenship", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "PovertyStatus_cd", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Home address", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Telephone number", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Telephone number (2nd)", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Email address", displayMode)!}}</tr>
			</table>
		  </td>
		</tr>
	</table>
	<hr>

	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Employed", displayMode, 'onChange="CEDA_Functions.onChangeCADEmployed()"')!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "FieldOfEmployment_cd_Field of employment", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Employer name", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Number of years", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Monthly salary", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Self employed", displayMode, 'onChange="CEDA_Functions.onChangeCADSelfEmployed()"')!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "FieldOfEmployment_cd_Field of self-employment", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Business address", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Number of employees", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Monthly salaries paid", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Monthly net income of business activity", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Monthly rent", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Other income generating activities", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Bookkeeping", displayMode)!}}</tr>
			</table>
		  </td>
		</tr>
	</table>
	<hr>

	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Loans with other institutions", displayMode, 'onChange="CEDA_Functions.onChangeCADLoansOther()"')!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "From whom", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Amount", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Interest rate pa", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Number of people depending on overal income", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Bank account", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Business plan provided", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Access to internet", displayMode)!}}</tr>
			</table>
		  </td>
		</tr>
	</table>
	<hr>

	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Introduced by", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Known to introducer since", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Last visited by", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Last visited on", displayMode)!}}</tr>
			</table>
		  </td>
		</tr>
	</table>

</script>
	<script id="ceda_loan_additional_data_template"
		type="text/x-jquery-tmpl">

	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "PurposeOfLoan_cd", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "CollateralType_cd", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Collateral notes", displayMode)!}}</tr>
			</table>
		  </td>
		</tr>
	</table>
	<hr>

	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Guarantor", displayMode, 'onChange="CEDA_Functions.onChangeLADGuarantor()"')!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Guarantor name", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Guarantor relation", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Guarantor address", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Guarantor telephone number", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr><td></td></tr>
			</table>
		  </td>
		</tr>
	</table>

</script>


	<script id="ceda_impact_measurement_template" type="text/x-jquery-tmpl">
	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_RepaidOnSchedule", displayMode, 'onChange="CEDA_Functions.onChangeIMRepaid()"')!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "ReasonNotRepaidOnSchedule", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "How was Loan Amount Invested", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Additional Income Generated", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Additional Income Used For", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_NewJobsCreated", displayMode, 'onChange="CEDA_Functions.onChangeIMJobs()"')!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Number of Jobs Created", displayMode)!}}</tr>
			</table>
		  </td>
		</tr>
	</table>
</script>

	<!--Accounting section starts here-->
	<script id="accountingHomeTemplate" type="text/x-jquery-tmpl">
<div id="accountingtabs">
    <ul>
        <li><a href="#journalentry-tab">{{=$ctx.doI18N("Journal Entries")}}</a></li>
        <li><a href="#accountingclosure-tab">{{=$ctx.doI18N("Accounting Closures")}}</a></li>
        <li><a href="#coa-tab">{{=$ctx.doI18N("Chart Of Accounts")}}</a></li>
    </ul>
    <div id="journalentry-tab">
    </div>
    <div id="accountingclosure-tab">
    </div>
    <div id="coa-tab">
    </div>
</div>
</script>

	<script id="chartOfAccountsTemplate" type="text/x-jquery-tmpl">
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   		<button id="addglaccount">{{=$ctx.doI18N("button.addGlAccount")}}</button>
			</span>
		</td>
	</table>
	<hr/>
	<div id="coatabs-main">
	    <ul>
	    	<li><a href="#coatabs-all">{{=$ctx.doI18N("tabs.all")}}</a></li>
	        <li><a href="#coatabs-asset">{{=$ctx.doI18N("tabs.assets")}}</a></li>
	        <li><a href="#coatabs-liabilities">{{=$ctx.doI18N("tabs.liabilities")}}</a></li>
	        <li><a href="#coatabs-equity">{{=$ctx.doI18N("tabs.equity")}}</a></li>
	        <li><a href="#coatabs-income">{{=$ctx.doI18N("tabs.income")}}</a></li>
	        <li><a href="#coatabs-expenses">{{=$ctx.doI18N("tabs.expenses")}}</a></li>
	    </ul>
	    <div id="coatabs-all">
	    </div>
	    <div id="coatabs-asset">
	    </div>
	    <div id="coatabs-liabilities">
	    </div>
	    <div id="coatabs-equity">
	    </div>
	    <div id="coatabs-income">
	    </div>
	    <div id="coatabs-expenses">
	    </div>
	</div>	
</script>

	<!--Accounts table results table-->
	<script id="accountsTableTemplate" type="text/x-jquery-tmpl">
	<table id="accountstable" width="100%" >
		<thead>
			<tr>
				<th>{{=$ctx.doI18N("table.heading.accountName")}}</th>
				<th>{{=$ctx.doI18N("table.heading.glCode")}}</th>
				<th>{{=$ctx.doI18N("table.heading.accountType")}}</th>
				<th>{{=$ctx.doI18N("table.heading.disabled")}}</th>
				<th>{{=$ctx.doI18N("table.heading.manualEntriesAllowed")}}</th>
				<th>{{=$ctx.doI18N("table.heading.usedAs")}}</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			{{#each crudRows}}
			<tr>
				<td>{{=name}}</td>
				<td>{{=glCode}}</td>
				<td>{{=$ctx.doI18N(type.code)}}</td>
				<td>
					{{#if disabled == true}}
						{{=$ctx.doI18N("boolean.true")}}
					{{#else}}
						{{=$ctx.doI18N("boolean.false")}}	
					{{/if}}
				</td>
				<td>
					{{#if manualEntriesAllowed == true}}
						{{=$ctx.doI18N("boolean.true")}}
					{{#else}}
					    {{=$ctx.doI18N("boolean.false")}}
					{{/if}}
				</td>
				<td>{{=$ctx.doI18N(usage.code)}}</td>
				<td>
						<span>	
							<button id="glaccountinfo{{=id}}">{{=$ctx.doI18N("label.help.accountInfo")}}</button>
					   		<button id="glaccountedit{{=id}}">{{=$ctx.doI18N("label.help.editAccountInfo")}}</button>
					   		{{#if disabled == true}}
					   			<button id="glaccountenable{{=id}}">{{=$ctx.doI18N("label.help.enableAccountInfo")}}</button>
					   		{{#else}}
					   			<button id="glaccountdisable{{=id}}">{{=$ctx.doI18N("label.help.disableAccountInfo")}}</button>
					   		{{/if}}
					   		<button id="glaccountdelete{{=id}}">{{=$ctx.doI18N("label.help.deleteAccountInfo")}}</button>
					   	</span>
				</td>
			</tr>
			{{/each}}
		</tbody>
	</table>
</script>

	<!--GL Accounts info table-->
	<script id="glAccountsInfoFormTemplate" type="text/x-jquery-tmpl">
<table width="100%" >
	<tr>
		<td>{{=$ctx.doI18N("label.accountName")}}</td>
		<td>{{=name}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.glCode")}}</td>
		<td>{{=glCode}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.classification")}}</td>
		<td>{{=$ctx.doI18N(type.code)}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.description")}}</td>
		<td><textarea readonly rows="7" cols="50">{{=description}}</textarea></td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.manualEntriesAllowed")}}</td>
		<td>
			{{#if manualEntriesAllowed == true}}
				{{=$ctx.doI18N("boolean.true")}}
			{{#else}}
				{{=$ctx.doI18N("boolean.false")}}
			{{/if}}
		</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.isDisabled")}}</td>
		<td>
			{{#if disabled == true}}
				{{=$ctx.doI18N("boolean.true")}}
			{{#else}}
				{{=$ctx.doI18N("boolean.false")}}
			{{/if}}	
		</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.accountUsage")}}</td>
		<td>{{=$ctx.doI18N(usage.code)}}</td>
	</tr>
</table>
</script>

	<!--Add a GL Account form-->
	<script id="glAccountsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td><label for="name">{{=$ctx.doI18N("label.accountName")}}</label></td>	
			<td><input id="name" name="name" value="{{=name}}" type="text" style="width: 250px"/></td>
		</tr>
		<tr>
			<td><label for="glCode">{{=$ctx.doI18N("label.glCode")}}</label></td>
			<td><input id="glCode" name="glCode" title="" type="text" value="{{=glCode}}"/></td>
		</tr>
		<tr>
			<td><label for="type">{{=$ctx.doI18N("label.classification")}}</label></td>
			<td>
				<select name="type" id="type">
				  {{#each accountTypeOptions}}
						{{#if $parent.parent.data.type.value === value}}
							<option value="{{=id}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
						{{#else}}
							<option value="{{=id}}">{{=$ctx.doI18N(code)}}</option>
						{{/if}}
			      {{/each}}
				</select>
			</td>
		</tr> 
		<tr>
			<td><label for="usage">{{=$ctx.doI18N("label.accountUsage")}}</label></td>
			<td>
				<select name="usage" id="usage">
				  {{#each usageOptions}}
						{{#if $parent.parent.data.usage.value === value}}
							<option value="{{=id}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
						{{#else}}
							<option value="{{=id}}">{{=$ctx.doI18N(code)}}</option>
						{{/if}}
			      {{/each}}
				</select>
			</td>
		</tr>
		<tr>
			<td><label for="manualEntriesAllowed">{{=$ctx.doI18N("label.manualEntriesAllowed")}}</label></td>
			<td>
				{{#if manualEntriesAllowed}}
					<input id="manualEntriesAllowed" name="manualEntriesAllowed" type="checkbox" checked="checked" value="{{=manualEntriesAllowed}}"/>
				{{#else}}
				 	<input id="manualEntriesAllowed" name="manualEntriesAllowed" type="checkbox" value="{{=manualEntriesAllowed}}"/>
				{{/if}} 
			</td>
		</tr>
		<tr>
			<td><label for="description">{{=$ctx.doI18N("label.description")}}</label></td>
			<td><textarea id="description" name="description" rows="8" cols="35">{{=description}}</textarea></td>
		</tr>
	</table>
 </form>
</script>

	<!--Accounting Closures Main page template-->
	<script id="glAccountClosuresTemplate" type="text/x-jquery-tmpl">
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   		<button id="addglclosure">{{=$ctx.doI18N("button.addClosureDate")}}</button>
			</span>
		</td>
	</table>
	<hr/>
	<div>
	   <table width="100%">
	   		<td><label for="accountClosuresOfficeId">{{=$ctx.doI18N("label.office")}}</label></td>	
			<td>
				<select id="accountClosuresOfficeId" name="accountClosuresOfficeId" title="">
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each crudRows}}
						<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
			        {{/each}}
				</select>
				<button id="searchglclosure">{{=$ctx.doI18N("button.searchClosures")}}</button>
			</td>
		</table>
	    <div id="glaccountclosuressearchresults">
	    </div>
	</div>	
</script>

	<!--GL Closures table-->
	<script id="glAccountClosuresTableTemplate" type="text/x-jquery-tmpl">
	<table id="closurestable" width="100%" >
		<thead>
			<tr>
				<th>{{=$ctx.doI18N("table.heading.officename")}}</th>
				<th>{{=$ctx.doI18N("table.heading.closureDate")}}</th>
				<th>{{=$ctx.doI18N("table.heading.closedBy")}}</th>
				<th>{{=$ctx.doI18N("table.heading.closedOn")}}</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			{{#each crudRows}}
			<tr>
				<td>{{=officeName}}</td>
				<td>{{=$ctx.globalDate(closingDate)}}</td>
				<td>{{=createdByUsername}}</td>
				<td>{{=$ctx.globalDate(createdDate)}}</td>
				<td>
					<span>
							<button id="glclosureinfo{{=id}}">View closure details</button>
					   		<button id="glclosureedit{{=id}}">Edit closure comment</button>
					   		<button id="glclosuredelete{{=id}}">Delete this closure</button>
					</span>
				</td>
			</tr>
			{{/each}}
		</tbody>
	</table>
</script>

	<!-- GL Closure Info div-->
	<script id="glAccountClosuresInfoTemplate" type="text/x-jquery-tmpl">
<table id="closurestable" width="100%" >
	<tr>
		<td>{{=$ctx.doI18N("label.office")}}</td>
		<td>{{=officeName}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.closureDate")}}</td>
		<td>{{=$ctx.globalDate(closingDate)}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.comments")}}</td>
		<td><textarea readonly rows="7" cols="50">{{=comments}}</textarea></td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.closedBy")}}</td>
		<td>{{=createdByUsername}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.acc.closedOn")}}</td>
		<td>{{=$ctx.globalDate(createdDate)}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.updatedBy")}}</td>
		<td>{{=lastUpdatedByUsername}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.updatedOn")}}</td>
		<td>{{=$ctx.globalDate(lastUpdatedDate)}}</td>
	</tr>
</table>
</script>

	<!--Add a GL closure form-->
	<script id="glAccountClosuresFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td><label for="name">{{=$ctx.doI18N("label.office")}}</label></td>
			<td>
				<select id="officeId" name="officeId" title="">
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each crudRows}}
						<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
			        {{/each}}
				</select>
			</td>
		</tr>
		<tr>
			<td><label for="closingDate">{{=$ctx.doI18N("label.closureDate")}}</label></td>
			<td>
				<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
				<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
				<input id="closingDate" name="closingDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(closingDate)}}"/>
			</td>
		</tr>
		<tr>
			<td><label for="comments">{{=$ctx.doI18N("label.comments")}}</label></td>
			<td><textarea id="comments" name="comments" rows="8" cols="35">{{=description}}</textarea></td>
		</tr>
	</table>
 </form>
</script>

	<!--Edit a GL Closure form-->
	<script id="glAccountClosuresEditFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td><label for="name">{{=$ctx.doI18N("label.office")}}</label></td>	
			<td>{{=officeName}}</td>
		</tr>
		<tr>
			<td><label for="closingDate">{{=$ctx.doI18N("label.closureDate")}}</label></td>
			<td>{{=$ctx.globalDate(closingDate)}}</td>
		</tr>
		<tr>
			<td><label for="comments">{{=$ctx.doI18N("label.comments")}}</label></td>
			<td><textarea id="comments" name="comments" rows="8" cols="35">{{=comments}}</textarea></td>
		</tr>
	</table>
 </form>
</script>

	<!--Journal Entries Main page template-->
	<script id="journalEntriesTemplate" type="text/x-jquery-tmpl">
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   		<button id="addjournalentry">{{=$ctx.doI18N("button.addjournalentry")}}</button>
			</span>
		</td>
	</table>
	<hr/>
	<div>
	   <input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	   <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		
	   	<table width="100%">
	   		<tr>
		   		<td>
		   			<label for="accountId">{{=$ctx.doI18N("label.accountName")}}</label>
					<select id="accountId" name="accountId" title="" >
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each accounts}}
							<option value="{{=id}}">{{=name}}({{=glCode}})</option>
				        {{/each}}
				    </select>
				</td>
		   		<td>
		   			<label for="journalEntryOfficeId">{{=$ctx.doI18N("label.office")}}</label>	
					<select id="journalEntryOfficeId" name="officeId" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each offices}}
							<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
				        {{/each}}
					</select>
				</td>
				<td>
		   			<label for="onlyManualEntries">{{=$ctx.doI18N("label.onlyManualEntries")}}</label>
					<input id="onlyManualEntries" name="onlyManualEntries" type="checkbox" />
				</td>
				<td>
					<label for="fromDate">{{=$ctx.doI18N("label.fromDate")}}</label>
					<input id="fromDate" name="fromDate" title="" type="text" class="datepickerfieldforaccounting"/>
				</td>
				<td>
					<label for="toDate">{{=$ctx.doI18N("label.toDate")}}</label>
					<input id="toDate" name="toDate" title="" type="text" class="datepickerfieldforaccounting"/>
				</td>
			</tr>
			<tr>
				<td colspan="5" align="center">
					<button id="searchjournalentries">{{=$ctx.doI18N("button.journalentry.search")}}</button>
				</td>
			</tr>
		</table>
		<br/>
	    <div id="journalentriessearchresults">
	    </div>
	</div>	
</script>

	<!--Journal entries table-->
	<script id="journalEntriesTableTemplate" type="text/x-jquery-tmpl">
	<table id="journalentriestable" width="100%" class="display" >
		<thead>
			<tr>
				<th>{{=$ctx.doI18N("table.heading.officename")}}</th>
				<th>{{=$ctx.doI18N("table.heading.transactionDate")}}</th>
				<th>{{=$ctx.doI18N("table.heading.classification")}}</th>
				<th>{{=$ctx.doI18N("table.heading.accountName")}}</th>
				<th>{{=$ctx.doI18N("table.heading.accountCode")}}</th>
				<th>{{=$ctx.doI18N("table.heading.createdBy")}}</th>
				<th>{{=$ctx.doI18N("table.heading.entryId")}}</th>
				<th>{{=$ctx.doI18N("table.heading.transactionId")}}</th>
				<th>{{=$ctx.doI18N("table.heading.debit")}}</th>
				<th>{{=$ctx.doI18N("table.heading.credit")}}</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
              
			<tr>
				<td colspan="5" class="dataTables_empty">Loading data from server</td>
			</tr>	
	

		</tbody>
	</table>
</script>

	<!-- Journal Entry Info template-->

	<script id="journalEntryInfoFormTemplate" type="text/x-jquery-tmpl">
<table width="100%" >
	<tr>
		<td>{{=$ctx.doI18N("label.office")}}</td>
		<td>{{=officeName}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.transactionDate")}}</td>
		<td>{{=$ctx.globalDate(transactionDate)}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.entryId")}}</td>
		<td>{{=id}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.transactionId")}}</td>
		<td>{{=transactionId}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.accountName")}}</td>
		<td>{{=glAccountName}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.classification")}}</td>
		<td>{{=glAccountType.value}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.transactionType")}}</td>
		<td>{{=entryType.value}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.createdBy")}}</td>
		<td>{{=createdByUserName}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.createdDate")}}</td>
		<td>{{=$ctx.globalDate(createdDate)}}</td>
	</tr>
	{{#if referenceNumber}}
	<tr>
		<td>{{=$ctx.doI18N("label.referenceNumber")}}</td>
		<td>{{=referenceNumber}}</td>
	</tr>
	{{/if}}
	<tr>
		<td>{{=$ctx.doI18N("label.comments")}}</td>
		<td><textarea readonly rows="7" cols="50">{{=comments}}</textarea></td>
	</tr>
</table>
</script>

	<!--Add a Journal entry form-->
	<script id="journalEntryFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
	<div id="formerrors"></div>
	<div>
		<b>{{=$ctx.doI18N("label.debit")}}</b>
		<button id="addDebit">{{=$ctx.doI18N("button.debit.add")}}</button>
	</div>
	<div id="debits">
		<p>
			<label for="debitAccountId1" style="display: inline">
				<select id="debitAccountId1"  title="">
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each accounts}}
					<option value="{{=id}}">{{=name}}({{=glCode}})</option>
					{{/each}}
				</select> </label>
			<label for="debitAmount1" style="display: inline">
				<input type="number" id="debitAmount1" size="20" value="" placeholder="Input Amount" />
			</label>
		</p>
	</div>
	<div>
		<b>{{=$ctx.doI18N("label.credit")}}</b>
		<button id="addCredit">{{=$ctx.doI18N("button.credit.add")}}</button>
	</div>
	<div id="credits">
		<p>
			<label for="creditAccountId1" style="display: inline">
				<select id="creditAccountId1"  title="">
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each accounts}}
					<option value="{{=id}}">{{=name}}({{=glCode}})</option>
					{{/each}}
				</select> </label>
			<label for="creditAmount1" style="display: inline">
				<input type="number" id="creditAmount1" size="20" value="" placeholder="Input Amount" />
			</label>
		</p>
	</div>

	<table width="100%">
		<tr>
			<td><label for="officeId">{{=$ctx.doI18N("label.office")}}</label></td>
			<td>
			<select id="officeId" name="officeId" title="">
				<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
				{{#each offices}}
				<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
				{{/each}}
			</select></td>
		</tr>
		
		<tr>
			<td><label for="transactionDate">{{=$ctx.doI18N("label.transactionDate")}}</label></td>
			<td>
			<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
			<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
			<input id="transactionDate" name="transactionDate" title="" type="text" class="datepickerfield" />
			</td>
		</tr>
		<tr>
			<td><label for="comments">{{=$ctx.doI18N("label.comments")}}</label></td>
			<td><textarea id="comments" name="comments" rows="5" cols="45">{{=comments}}</textarea></td>
		</tr>
	</table>
</form>
</script>

	<!--Add a Journal entry sub template-->
	<script id="singleDebitOrCreditEntryTemplate" type="text/x-jquery-tmpl">
<p>
	<label for="{{=accountId}}" style="display: inline">
		<select id="{{=accountId}}"  title="">
			<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
			{{#each accounts}}
			<option value="{{=id}}">{{=name}}({{=glCode}})</option>
			{{/each}}
		</select> </label>
	<label for="{{=amountId}}" style="display: inline">
		<input type="number" id="{{=amountId}}" size="20" value="" placeholder="Input Amount" />
	</label>
	<button id="{{=deleteButtonId}}"> {{=activity}} </button>
</p>
</script>

	<!-- old style loan application template -->
	<script id="newLoanScheduleTemplate" type="text/x-jquery-tmpl">
<table id="repaymentschedule" class="pretty displayschedule">
	<caption>{{=$ctx.doI18N("table.caption.repaymentSchedule")}}</caption>
	<colgroup span="3"></colgroup>
	<colgroup span="3">
		<col class="lefthighlightcol">
		<col>
		<col class="righthighlightcol">
	</colgroup>
	<colgroup span="3">
		<col class="lefthighlightcol">
		<col>
		<col class="righthighlightcol">
	</colgroup>
	<colgroup span="3"></colgroup>

	<thead>
		<tr>
			<th colspan="3" scope="colgroup" class="empty">&nbsp;</th>
			<th colspan="3" scope="colgroup" class="highlightcol">{{=$ctx.doI18N("table.heading.loanAmountAndBalance")}}</th>
			<th colspan="2" scope="colgroup" class="highlightcol">{{=$ctx.doI18N("table.heading.totalCostOfLoan")}}</th>
			<th colspan="1" scope="colgroup" class="empty">&nbsp;</th>
		</tr>
		<tr>
			<th scope="col">#</th>
			<th scope="col">{{=$ctx.doI18N("table.heading.date")}}</th>
			<th scope="col">{{=$ctx.doI18N("table.heading.days")}}</th>
			
			<th scope="col" class="lefthighlightcolheader">{{=$ctx.doI18N("table.heading.disbursement")}}</th>
			<th scope="col">{{=$ctx.doI18N("table.heading.principalDue")}}</th>
			<th scope="col" class="righthighlightcolheader">{{=$ctx.doI18N("table.heading.principalBalance")}}</th>

			<th scope="col" class="lefthighlightcolheader">{{=$ctx.doI18N("table.heading.interestDue")}}</th>
			<th scope="col" class="righthighlightcolheader">{{=$ctx.doI18N("table.heading.fees")}}</th>

			<th scope="col">{{=$ctx.doI18N("table.heading.totalDue")}}</th>
		</tr>
	</thead>
	<tbody>
	{{#each periods}}
	<tr>
		<td scope="row">{{=$ctx.number(period)}}</td>
		<td>{{=$ctx.globalDate(dueDate)}}</td>
		<td>{{=$ctx.number(daysInPeriod)}}</td>

		<td class="lefthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, principalDisbursed)}}</td>
		<td>{{=$ctx.monetaryValue($parent.parent.data.currency, principalDue)}}</td>
		<td class="righthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, principalLoanBalanceOutstanding)}}</td>

		<td class="lefthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, interestOriginalDue)}}</td>
		<td class="righthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, feeChargesDue)}}</td>

		<td>{{=$ctx.monetaryValue($parent.parent.data.currency, totalOriginalDueForPeriod)}}</td>
	</tr>
	{{/each}}
	</tbody>
	<tfoot class="ui-widget-header">
		<tr>
			<th colspan="2">{{=$ctx.doI18N("table.heading.total")}}</th>
			<th>{{=$ctx.number(loanTermInDays)}}</th>

			<th class="lefthighlightcolheader">{{=$ctx.monetaryValue(currency, totalPrincipalDisbursed)}}</th>
			<th>{{=$ctx.monetaryValue(currency, totalPrincipalExpected)}}</th>
			<th class="righthighlightcolheader">&nbsp;</th>

			<th class="lefthighlightcolheader">{{=$ctx.monetaryValue(currency, totalInterestCharged)}}</th>
			<th class="righthighlightcolheader">{{=$ctx.monetaryValue(currency, totalFeeChargesCharged)}}</th>

			<th>{{=$ctx.monetaryValue(currency, totalRepaymentExpected)}}</th>
		</tr>
	</tfoot>
</table>
</script>

	<!-- Template rendered when attaching new charge to loan through popup (along with loanChargeDetailsPartialFormTemplate) -->
	<script id="loanChargeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<div>
			<legend>{{=$ctx.doI18N("form.legend.charge.details")}}</legend>
			<label for="chargeOptions">{{=$ctx.doI18N("label.charges")}}</label>
			<select id="chargeOptions" name="chargeId">
				<option value="-1">{{=$ctx.doI18N("option.charge.first.choice")}}</option>
				{{#each chargeOptions}}
					{{#if $ctx.number($parent.parent.data.id)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}, {{=currency.displaySymbol}}</option>
					{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=name}}, {{=currency.displaySymbol}}</option>
					{{/if}}
				{{/each}}
			</select>
			<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		</div>
		<div id="loanChargeDetails">
			{{each $parent.data tmpl="#loanChargeDetailsPartialFormTemplate"}}
		</div>
	</fieldset>
</form>
</script>

	<script id="loanChargeDetailsPartialFormTemplate"
		type="text/x-jquery-tmpl">
<label for="amount">{{=$ctx.doI18N("label.amount")}}</label>
<input id="amount" name="amount" title="" type="text" value="{{=$ctx.decimal(amount, 2)}}" style="width: 125px;"/>
<label for="chargeCalculationType">{{=$ctx.doI18N("form.label.charge.calculation.type")}}</label>
<select id="chargeCalculationType" name="chargeCalculationType" title="" style="width: 180px" disabled="disabled">
	{{#each chargeCalculationTypeOptions}}
		{{#if $ctx.number($parent.parent.data.chargeCalculationType.id)===$ctx.number(id)}}
			<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
		{{#else}}
			<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
		{{/if}}
	{{/each}}
</select>
<label for="chargeTimeType">{{=$ctx.doI18N("form.label.charge.time")}}</label>
<select id="chargeTimeType" name="chargeTimeType" title="" style="width: 180px" disabled="disabled">
	{{#each chargeTimeTypeOptions}}
		{{#if $ctx.number($parent.parent.data.chargeTimeType.id)===$ctx.number(id)}}
			<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
		{{#else}}
			<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
		{{/if}}
	{{/each}}
</select>
{{#if $ctx.number(chargeTimeType.id)===$ctx.number(2)}}
<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
<label for="dueDate">Due for collection on:</label>
<input id="dueDate" name="dueDate" class="datepickerfieldnoconstraint" title="" value="{{=dueDate}}" />
{{/if}}
</script>

	<script id="modifyLoanChargeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<div>
			<legend>{{=$ctx.doI18N("form.legend.charge.details")}}</legend>
			<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
			<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

			<label for="amount">{{=$ctx.doI18N("label.amount")}}</label>
			
		{{#if $ctx.number(chargeCalculationType.id)===$ctx.number(2)}}
			<input id="amount" name="amount" title="" type="text" value="{{=$ctx.decimal(percentage, 6)}}" style="width: 125px;"/>
		{{#else}}
			<input id="amount" name="amount" title="" type="text" value="{{=$ctx.monetaryValue(currency, amount)}}" style="width: 125px;"/>			
		{{/if}}

		{{#if $ctx.number(chargeTimeType.id)===$ctx.number(2)}}
			<label for="dueDate">Due for collection on:</label>
			<input id="dueDate" name="dueDate" class="datepickerfieldnoconstraint" title="" value="{{=$ctx.globalDate(dueDate)}}" />
		{{/if}}
		</div>
	</fieldset>
</form>
</script>
	<!-- END OF OLD style loan application template -->

	<!-- Collateral Screens-->
	<script id="loanCollateralFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
    </div>
         <legend>{{=$ctx.doI18N("form.legend.collateral.details")}}</legend>
    <fieldset>
        <div>
            <input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
            <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
            
            <label for="value">{{=$ctx.doI18N("form.label.collateral.type")}}</label>
            <select id="collateralTypeId" name="collateralTypeId" title="">
                {{#if type}}
                {{#else}}
                   <option value="">{{=$ctx.doI18N("option.collateral.first.choice")}}</option>
                {{/if}} 
                {{#each allowedCollateralTypes}}
                    {{#if $parent.parent.data.type}}
                        {{#if $ctx.number($parent.parent.parent.data.type.id)===$ctx.number(id)}}
                           <option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                        {{/if}}
                    {{#else}}
                        <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                    {{/if}}
                {{/each}}
            </select>

            <label for="value">{{=$ctx.doI18N("form.label.collateral.value")}}</label>
            <input id="value" name="value" title="" type="text" value="{{=$ctx.monetaryValue(currency,value)}}" style="width: 125px;"/>

            <label for="description">{{=$ctx.doI18N("form.label.collateral.description")}}</label>
            <textarea id="description" name="description" value="{{=description}}" rows="10" cols="58"/>
        </div>
    </fieldset>
</form>
</script>

	<!-- loan application/contract screens -->
	<script id="editAccountNoFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<label for="accountNo">{{=$ctx.doI18N("label.accountNo")}}</label>
	<input id="accountNo" name="accountNo" title="" type="text" value="{{=accountNo}}" />

	<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
	<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}" />
	
 </form>
</script>

	<script id="loanDataTabTemplate" type="text/x-jquery-tmpl">
<div id="loanactions">
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
			{{#if status.pendingApproval}}
				{{#if $ctx.showTask("AddLoanCharge")}}
				<button id="addloanchargebtn{{=id}}" class="addloancharge">{{=$ctx.doI18N("button.addLoanCharge")}}</button>
				{{/if}}
				{{#if $ctx.showTask("AddLoanCollateral")}}
                <button id="addloancollateralbtn{{=id}}" class="addloancollateral">{{=$ctx.doI18N("button.addLoanCollateral")}}</button>
                {{/if}}
				{{#if $ctx.showTask("ASSIGNLOANOFFICER")}}
				<button id="assignloanofficerbtn{{=id}}" class="assignloanofficer">{{=$ctx.doI18N("button.assignLoanOfficer")}}</button>
				{{/if}}
				{{#if $ctx.showTask("MODIFYLOAN")}}
				<button id="modifyloanappbtn{{=id}}" class="modifyloanapp">{{=$ctx.doI18N("button.application.modify")}}</button>
				{{/if}}
				{{#if $ctx.showTask("APPROVELOAN")}}
				<button id="approvebtn{{=id}}" class="approveloan">{{=$ctx.doI18N("button.application.approve")}}</button>
				{{/if}}
				{{#if $ctx.showTask("RejectLoanApplication")}}
				<button id="rejectbtn{{=id}}" class="rejectloan">{{=$ctx.doI18N("button.application.reject")}}</button>
				{{/if}}
				{{#if $ctx.showTask("LoanApplicationWithdrawn")}}
				<button id="withdrawnbyapplicantloanbtn{{=id}}" class="withdrawnbyapplicantloan">{{=$ctx.doI18N("button.application.withdrawnByApplicant")}}</button>
				{{/if}}
				{{#if $ctx.showTask("DELETELOAN")}}
				<button id="deletebtn{{=id}}" class="deleteloan">{{=$ctx.doI18N("button.application.delete")}}</button>
				{{/if}}
				{{#if $ctx.showTask("ADDLOANGUARANTOR")}}
				<button id="setGuarantorbtn{{=id}}" class="setguarantor">{{=$ctx.doI18N("button.guarantor")}}</button>
				{{/if}}
			{{/if}}

			{{#if status.waitingForDisbursal}}
				{{#if $ctx.showTask("AddLoanCharge")}}
				<button id="addloanchargebtn{{=id}}" class="addloancharge">{{=$ctx.doI18N("button.addLoanCharge")}}</button>
				{{/if}}
				{{#if $ctx.showTask("ASSIGNLOANOFFICER")}}
				<button id="assignloanofficerbtn{{=id}}" class="assignloanofficer">{{=$ctx.doI18N("button.assignLoanOfficer")}}</button>
				{{/if}}
				{{#if $ctx.showTask("UNDOLOANAPPROVAL")}}
				<button id="undoapprovebtn{{=id}}" class="undoapproveloan">{{=$ctx.doI18N("button.application.undoApproval")}}</button>
				{{/if}}
				{{#if $ctx.showTask("DISBURSELOAN")}}
				<button id="disbursebtn{{=id}}" class="disburseloan">{{=$ctx.doI18N("button.loan.disburse")}}</button>
				{{/if}}
				{{#if $ctx.showTask("ADDLOANGUARANTOR")}}
				<button id="setGuarantorbtn{{=id}}" class="setguarantor">{{=$ctx.doI18N("button.guarantor")}}</button>
				{{/if}}
			{{/if}}

			{{#if status.active}}
				{{#if $ctx.showTask("AddLoanCharge")}}
				<button id="addloanchargebtn{{=id}}" class="addloancharge">{{=$ctx.doI18N("button.addLoanCharge")}}</button>
				{{/if}}
				{{#if $ctx.showTask("ASSIGNLOANOFFICER")}}
				<button id="assignloanofficerbtn{{=id}}" class="assignloanofficer">{{=$ctx.doI18N("button.assignLoanOfficer")}}</button>
				{{/if}}
				{{#if $ctx.showTask("UNDOLOANDISBURSAL")}}
				<button id="undodisbursalbtn{{=id}}" class="undodisbursalloan">{{=$ctx.doI18N("button.loan.undoDisbursal")}}</button>
				{{/if}}
				{{#if $ctx.showTask("LOANREPAYMENT")}}
				<button id="repaymentbtn{{=id}}" class="repaymentloan">{{=$ctx.doI18N("button.loan.repayment")}}</button>
				{{/if}}
				{{#if $ctx.showTask("WAIVEINTERESTPORTIONOFLOAN")}}
				<button id="waiveinterestbtn{{=id}}" class="waiveinterestloan">{{=$ctx.doI18N("button.loan.waiveInterest")}}</button>
				{{/if}}
				{{#if $ctx.showTask("WRITEOFFLOAN")}}
				<button id="writeoffbtn{{=id}}" class="writeoffloan">{{=$ctx.doI18N("button.loan.writeOff")}}</button>
				{{/if}}
				{{#if $ctx.showTask("CLOSEASRESCHEDULEDLOAN")}}
				<button id="closeasrescheduledbtn{{=id}}" class="closeasrescheduledloan">{{=$ctx.doI18N("button.loan.closeAsRescheduled")}}</button>
				{{/if}}
				{{#if $ctx.showTask("CLOSELOAN")}}
				<button id="closebtn{{=id}}" class="closeloan">{{=$ctx.doI18N("button.loan.close")}}</button>
				{{/if}}
			{{/if}}
			</span>
		</td>
	</table>
</div>

<div id="loantabs{{=id}}" class="loantabs">
	<ul>
		<li><a href="#details{{=id}}" title="details">{{=$ctx.doI18N("tab.details")}}</a></li>
		{{#if charges}}
		<li><a href="#charges{{=id}}" title="charges">{{=$ctx.doI18N("tab.charges")}}</a></li>
		{{/if}}
		{{#if repaymentSchedule}}
		<li><a href="#schedule{{=id}}" title="schedule">{{=$ctx.doI18N("tab.repaymentSchedule")}}</a></li>
        {{/if}}
		{{#if transactions}}
		<li><a href="#transactions{{=id}}" title="transactions">{{=$ctx.doI18N("tab.transactions")}}</a></li>
		{{/if}}
		{{#if collateral}}
        <li><a href="#collaterals{{=id}}" title="collaterals">{{=$ctx.doI18N("tab.collaterals")}}</a></li>
        {{/if}}
		<li><a href="#loanDocuments{{=id}}" title="documents">{{=$ctx.doI18N("tab.loanDocuments")}}</a></li>
	</ul>
    <!-- first loan tab -->

	<div id="details{{=id}}" style="margin-top: 5px;">
		{{#if accountNo}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.accountNo")}}</span>
			<span class="rowvalue">
			{{=accountNo}}
			{{#if $ctx.showTask("MODIFYLOAN")}}
			<button id="editaccountnobtn{{=id}}" class="editaccountnobtn"><span>Edit</span></button>
			{{/if}}
			</span>
		</div>
		{{/if}}
		{{#if externalId}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.externalId")}}</span>
			<span class="rowvalue">
			{{=externalId}}
			{{#if $ctx.showTask("MODIFYLOAN")}}
			<button id="editaccountnobtn{{=id}}" class="editaccountnobtn"><span>Edit</span></button>
			{{/if}}
			</span>
		</div>
		{{/if}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.status")}}</span>
			<span class="rowvalue">{{=$ctx.doI18N(status.code)}}</span>
		</div>
		{{#if timeline.actualDisbursementDate}}
			{{#if $ctx.numberGreaterThanZero(summary.totalOverdue)}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.status.arrears")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted($parent.parent.data.currency, $parent.parent.data.summary.totalOverdue)}}</span>
		</div>
			{{/if}}
		{{/if}}
		{{#if loanPurposeName}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.loanPurpose")}}</span>
			<span class="rowvalue">{{=$ctx.doI18N(loanPurposeName)}}</span>
		</div>
		{{/if}}
		{{#if loanOfficerName}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.loanOfficer")}}</span>
			<span class="rowvalue">{{=loanOfficerName}}</span>
			{{#if $ctx.showTask("UNASSIGNLOANOFFICER")}}
				<button id="unassignloanofficerbtn{{=id}}" class="unassignloanofficer">{{=$ctx.doI18N("label.unassignloanOfficer")}}</button>
			{{/if}}
		</div>
		{{/if}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.product")}}</span>
			<span class="rowvalue">{{=loanProductName}}</span>
		</div>
		{{#if fundName}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.fund")}}</span>
			<span class="rowvalue">{{=fundName}}</span>
		</div>
		{{/if}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.currency")}}</span>
			<span class="rowvalue">{{=currency.name}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.principal")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, principal)}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.repayments")}}</span>
			<span class="rowvalue">{{=numberOfRepayments}} every {{=repaymentEvery}}&nbsp;{{=repaymentFrequencyType.value}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.amortization")}}</span>
			<span class="rowvalue">{{=amortizationType.value}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interest")}}</span>
			<span class="rowvalue">{{=$ctx.decimal(annualInterestRate, 4)}}% per annum ({{=$ctx.decimal(interestRatePerPeriod, 4)}}%&nbsp; {{=interestRateFrequencyType.value}}) - {{=interestType.value}}</span>
		</div>
		
		<br/>
		<table id="timelinetable" class="pretty displayschedule">
			<thead>
				<tr>
					<th scope="col">Event</th>
					<th scope="col">Date</th>
					<th scope="col">By</th>
				</tr>
			</thead>
			<tbody>
				{{#if timeline.submittedOnDate}}
				<tr>
					<td>{{=$ctx.doI18N("label.submitted.on")}}</td>
					<td>{{=$ctx.globalDate(timeline.submittedOnDate)}}</td>
					<td> {{=timeline.submittedByUsername}}</td>
				</tr>
				{{/if}}

				{{#if timeline.approvedOnDate}}
				<tr>
					<td>{{=$ctx.doI18N("label.approved.on")}}</td>
					<td>{{=$ctx.globalDate(timeline.approvedOnDate)}}</td>
					<td> {{=timeline.approvedByUsername}}</td>
				</tr>
				{{/if}}

				{{#if timeline.actualDisbursementDate}}
				<tr>
					<td>{{=$ctx.doI18N("label.disbursedOn")}}</td>
					<td>{{=$ctx.globalDate(timeline.actualDisbursementDate)}}</td>
					<td>{{=timeline.disbursedByUsername}}</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.maturesOn")}}</td>
					<td>{{=$ctx.globalDate(timeline.expectedMaturityDate)}}</td>
					<td>&nbsp;</td>
				</tr>
				{{#else}}
				<tr>
					<td>{{=$ctx.doI18N("label.expectedDisbursementOn")}}</td>
					<td>{{=$ctx.globalDate(timeline.expectedDisbursementDate)}}</td>
					<td>&nbsp;</td>
				</tr>
				{{/if}}

				{{#if repaymentsStartingFromDate}}
				<tr>
					<td>{{=$ctx.doI18N("label.firstRepaymentOn")}}</td>
					<td>{{=$ctx.globalDate(repaymentsStartingFromDate)}}</td>
					<td>&nbsp;</td>
				</tr>
				{{/if}}

				{{#if interestChargedFromDate}}
				<tr>
					<td>{{=$ctx.doI18N("label.interestChargedFrom")}}</td>
					<td>{{=$ctx.globalDate(interestChargedFromDate)}}</td>
					<td>&nbsp;</td>
				</tr>
				{{/if}}

				{{#if timeline.rejectedOnDate}}
				<tr>
					<td>{{=$ctx.doI18N("label.rejectedOn")}}</td>
					<td>{{=$ctx.globalDate(timeline.rejectedOnDate)}}</td>
					<td>{{=timeline.rejectedByUsername}}</td>
				</tr>
				{{#else}}
					{{#if timeline.closedOnDate}}	
				<tr>
					<td>{{=$ctx.doI18N("label.closedOn")}}</td>
					<td>{{=$ctx.globalDate(timeline.closedOnDate)}}</td>
					<td>{{=timeline.closedByUsername}}</td>
				</tr>
					{{/if}}
				{{/if}}

				{{#if timeline.withdrawnOnDate}}
				<tr>
					<td>{{=$ctx.doI18N("label.withdrawnOn")}}</td>
					<td>{{=$ctx.globalDate(timeline.withdrawnOnDate)}}</td>
					<td>{{=timeline.withdrawnByUsername}}</td>
				</tr>
				{{#else}}
					{{#if timeline.closedOnDate}}	
				<tr>
					<td>{{=$ctx.doI18N("label.closedOn")}}</td>
					<td>{{=$ctx.globalDate(timeline.closedOnDate)}}</td>
					<td>{{=timeline.closedByUsername}}</td>
				</tr>
					{{/if}}
				{{/if}}
			</tbody>
		</table>

		<br/>		
		{{#if guarantors}}
			<b>{{=$ctx.doI18N("label.guarantorDetails")}}</b>
			{{#each guarantors}}
				<div class="row">
					<span class="longrowlabel">&nbsp;</span>
					<span class="rowvalue">
						{{#if $ctx.showTask("REMOVELOANGUARANTOR")}}
							<button id="removeguarantor{{=id}}" class="removeguarantor">Remove</button>
						{{/if}}	
					</span>
				</div>
				<div class="row">
						<span class="longrowlabel">{{=$ctx.doI18N("label.name")}}</span>
						<span class="rowvalue">{{=lastname}}, {{=firstname}}</span>
				</div>

                {{#if clientRelationshipType}}
                    <div class="row">
                            <span class="longrowlabel">{{=$ctx.doI18N("label.guarantor.relationship")}}</span>
                            <span class="rowvalue">{{=clientRelationshipType.name}}</span>
                    </div>
                {{/if}}
				
				{{#if guarantorType.value == "CUSTOMER"}}
    				<div class="row">
    						<span class="longrowlabel">{{=$ctx.doI18N("label.office")}}</span>
    						<span class="rowvalue">{{=officeName}}</span>
    				</div>
    				<div class="row">
    						<span class="longrowlabel">{{=$ctx.doI18N("label.joinedon")}}</span>
    						<span class="rowvalue">{{=$ctx.globalDate(joinedDate)}}</span>
    				</div>
				{{/if}}

				{{#if guarantorType.value == "EXTERNAL"}}
					{{#if dob == true}}
						<div class="row">
								<span class="longrowlabel">{{=$ctx.doI18N("label.dob")}}</span>
								<span class="rowvalue">{{=$ctx.globalDate(dob)}}</span>
						</div>
					{{/if}}
					{{#if addressLine1}}
						<div class="row">
								<span class="longrowlabel">{{=$ctx.doI18N("label.address")}}</span>
								<span class="rowvalue">{{=addressLine1}}, {{=addressLine2}}</span>
						</div>
					{{/if}}
					{{#if zip}}
						<div class="row">
								<span class="longrowlabel">{{=$ctx.doI18N("label.zip")}}</span>
								<span class="rowvalue">{{=zip}}</span>
						</div>
					{{/if}}
					{{#if city}}
						<div class="row">
								<span class="longrowlabel">{{=$ctx.doI18N("label.city")}}</span>
								<span class="rowvalue">{{=city}}</span>
						</div>
					{{/if}}
					{{#if mobileNumber}}
						<div class="row">
								<span class="longrowlabel">{{=$ctx.doI18N("label.mobile")}}</span>
								<span class="rowvalue">{{=mobileNumber}}</span>
						</div>
					{{/if}}
					{{#if housePhoneNumber}}
						<div class="row">
								<span class="longrowlabel">{{=$ctx.doI18N("label.telephone")}}</span>
								<span class="rowvalue">{{=housePhoneNumber}}</span>
						</div>
					{{/if}}
				{{/if}}
				<br/>
			{{/each}}
		{{/if}}
    </div>
	{{#if charges}}
	<div id="charges{{=id}}" style="margin-top: 5px;">
		<table id="loancharges{{=id}}" class="pretty displaypayments">
		<caption>{{=$ctx.doI18N("table.caption.loanCharges")}}</caption>
			<thead>
				<tr>
				<th>{{=$ctx.doI18N("table.heading.name")}}</th>
				<th>{{=$ctx.doI18N("table.heading.feeOrPenalty")}}</th>
				<th>{{=$ctx.doI18N("table.heading.paymentDueAt")}}</th>
				<th>{{=$ctx.doI18N("table.heading.dueAsOf")}}</th>
				<th>{{=$ctx.doI18N("table.heading.calculationType")}}</th>
				<th>{{=$ctx.doI18N("table.heading.due")}}</th>
				<th>{{=$ctx.doI18N("table.heading.paid")}}</th>
				<th>{{=$ctx.doI18N("table.heading.waived")}}</th>
				<th>{{=$ctx.doI18N("table.heading.outstanding")}}</th>
				<th>{{=$ctx.doI18N("table.heading.action")}}</th>
				</tr>
			</thead>
			<tbody>
				{{#each charges}}
				<tr>
					<td>{{=name}}</td>

				{{#if penalty}}
					<td>Penalty</td>
				{{#else}}
					<td>Fee</td>
				{{/if}}

					<td>{{=$ctx.doI18N(chargeTimeType.code)}}</td>
				{{#if $ctx.number(chargeTimeType.id)===$ctx.number(2)}}
					<td>{{=$ctx.globalDate(dueDate)}}</td>
				{{#else}}
					<td>&nbsp;</td>
				{{/if}}

				{{#if $ctx.number(chargeCalculationType.id)===$ctx.number(2)}}
					<td>{{=$ctx.doI18N(chargeCalculationType.code)}} - {{=$ctx.decimal(percentage, 4)}}% of {{=$ctx.moneyFormatted(currency, amountPercentageAppliedTo)}}</td>
				{{#else}}
					<td>{{=$ctx.doI18N(chargeCalculationType.code)}}</td>
				{{/if}}
					<td>{{=$ctx.moneyFormatted(currency, amount)}}</td>
					<td>{{=$ctx.moneyFormatted(currency, amountPaid)}}</td>
					<td>{{=$ctx.moneyFormatted(currency, amountWaived)}}</td>
					<td>{{=$ctx.moneyFormatted(currency, amountOutstanding)}}</td>
					<td>
					    {{#if $parent.parent.data.status.code == "loanStatusType.submitted.and.pending.approval"}}  
						  <button id="modifyloan{{=$parent.parent.parent.data.id}}charge{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</button>
						{{/if}}   
						{{#if $parent.parent.data.status.code == "loanStatusType.active"}}    
						  <button id="waiveloan{{=$parent.parent.parent.data.id}}charge{{=id}}">{{=$ctx.doI18N("link.action.waive")}}</button>
					    {{/if}}	
					    {{#if $parent.parent.data.status.code == "loanStatusType.submitted.and.pending.approval"}}    
						  <button id="deleteloan{{=$parent.parent.parent.data.id}}charge{{=id}}">{{=$ctx.doI18N("link.action.delete")}}</button>
						{{/if}}  
					</td>
				</tr>
				{{/each}}
			</tbody>
		</table>
	</div>
	{{/if}}

	<div id="schedule{{=id}}" style="margin-top: 5px;">
		{{#each summary}}
		<table id="summarytable{{=id}}" class="pretty displayschedule">
			<caption>{{=$ctx.doI18N("table.summary.caption")}}</caption>
			<thead>
				<tr>
					<th class="empty"></th>
					<th>{{=$ctx.doI18N("table.heading.original")}}</th>
					<th>{{=$ctx.doI18N("table.heading.paid")}}</th>
					{{#if totalWaived}}
					<th>{{=$ctx.doI18N("table.heading.waived")}}</th>
					{{/if}}
					{{#if totalWrittenOff}}
					<th>{{=$ctx.doI18N("table.heading.writtenoff")}}</th>
					{{/if}}
					<th>{{=$ctx.doI18N("table.heading.outstanding")}}</th>
					{{#if totalOverdue}}
					<th>{{=$ctx.doI18N("table.heading.overdue")}}</th>
					{{/if}}
				</tr>
			</thead>
			<tbody>
				<tr>
					<th>{{=$ctx.doI18N("table.heading.principal")}}</th>
					<td>{{=$ctx.monetaryValue(currency, principalDisbursed)}}</td>
					<td>{{=$ctx.monetaryValue(currency, principalPaid)}}</td>
					{{#if totalWaived}}
					<td>&nbsp;</td>
					{{/if}}
					{{#if totalWrittenOff}}
					<td>{{=$ctx.monetaryValue(currency, principalWrittenOff)}}</td>
					{{/if}}
					<td>{{=$ctx.monetaryValue(currency, principalOutstanding)}}</td>
					{{#if totalOverdue}}
					<td>{{=$ctx.monetaryValue(currency, principalOverdue)}}</td>
					{{/if}}
				</tr>
				<tr>
					<th>{{=$ctx.doI18N("table.heading.interest")}}</th>
					<td>{{=$ctx.monetaryValue(currency, interestCharged)}}</td>
					<td>{{=$ctx.monetaryValue(currency, interestPaid)}}</td>
					{{#if totalWaived}}
					<td>{{=$ctx.monetaryValue(currency, interestWaived)}}</td>
					{{/if}}
					{{#if totalWrittenOff}}
					<td>{{=$ctx.monetaryValue(currency, interestWrittenOff)}}</td>
					{{/if}}
					<td>{{=$ctx.monetaryValue(currency, interestOutstanding)}}</td>
					{{#if totalOverdue}}
					<td>{{=$ctx.monetaryValue(currency, interestOverdue)}}</td>
					{{/if}}
				</tr>
				{{#if feeChargesCharged}}
				<tr>
					<th>{{=$ctx.doI18N("table.heading.fees")}}</th>
					<td>{{=$ctx.monetaryValue(currency, feeChargesCharged)}}</td>
					<td>{{=$ctx.monetaryValue(currency, feeChargesPaid)}}</td>
					{{#if totalWaived}}
					<td>{{=$ctx.monetaryValue(currency, feeChargesWaived)}}</td>
					{{/if}}
					{{#if totalWrittenOff}}
					<td>{{=$ctx.monetaryValue(currency, feeChargesWrittenOff)}}</td>
					{{/if}}
					<td>{{=$ctx.monetaryValue(currency, feeChargesOutstanding)}}</td>
					{{#if totalOverdue}}
					<td>{{=$ctx.monetaryValue(currency, feeChargesOverdue)}}</td>
					{{/if}}
				</tr>
				{{/if}}

				{{#if penaltyChargesCharged}}
				<tr>
					<th>{{=$ctx.doI18N("table.heading.penalties")}}</th>
					<td>{{=$ctx.monetaryValue(currency, penaltyChargesCharged)}}</td>
					<td>{{=$ctx.monetaryValue(currency, penaltyChargesPaid)}}</td>
					{{#if totalWaived}}
					<td>{{=$ctx.monetaryValue(currency, penaltyChargesWaived)}}</td>
					{{/if}}
					{{#if totalWrittenOff}}
					<td>{{=$ctx.monetaryValue(currency, penaltyChargesWrittenOff)}}</td>
					{{/if}}
					<td>{{=$ctx.monetaryValue(currency, penaltyChargesOutstanding)}}</td>
					{{#if totalOverdue}}
					<td>{{=$ctx.monetaryValue(currency, penaltyChargesOverdue)}}</td>
					{{/if}}
				</tr>
				{{/if}}
			</tbody>
			<tfoot >
				<tr>
					<th>{{=$ctx.doI18N("table.heading.total")}}</th>
					<th>{{=$ctx.monetaryValue(currency, totalExpectedRepayment)}}</th>
					<th>{{=$ctx.monetaryValue(currency, totalRepayment)}}</th>
					{{#if totalWaived}}
					<th>{{=$ctx.monetaryValue(currency, totalWaived)}}</th>
					{{/if}}
					{{#if totalWrittenOff}}
					<th>{{=$ctx.monetaryValue(currency, totalWrittenOff)}}</th>
					{{/if}}
					<th>{{=$ctx.monetaryValue(currency, totalOutstanding)}}</th>
					{{#if totalOverdue}}
					<th>{{=$ctx.monetaryValue(currency, totalOverdue)}}</th>
					{{/if}}
				</tr>
			</tfoot>
		</table>
		{{/each}}
		<br/>
		{{#each repaymentSchedule}}
		<table id="repaymentschedule_todate{{=id}}" class="pretty displayschedule">
			<caption>{{=$ctx.doI18N("table.caption.repaymentSchedule")}}</caption>
			<colgroup span="3"></colgroup>
			<colgroup span="3">
				<col class="lefthighlightcol">
				<col>
				<col class="righthighlightcol">
			</colgroup>
			<colgroup span="3">
				<col class="lefthighlightcol">
				<col>
				<col class="righthighlightcol">
			</colgroup>
			{{#if totalWaived}}
			<colgroup span="4"></colgroup>
			{{#else}}
			<colgroup span="3"></colgroup>
			{{/if}}

			<thead>
				<tr>
					<th colspan="3" scope="colgroup" class="empty">&nbsp;</th>
					<th colspan="3" scope="colgroup" class="highlightcol">{{=$ctx.doI18N("table.heading.loanAmountAndBalance")}}</th>
					<th colspan="3" scope="colgroup" class="highlightcol">{{=$ctx.doI18N("table.heading.totalCostOfLoan")}}</th>
					{{#if totalWaived}}
					<th colspan="4" scope="colgroup" class="empty">&nbsp;</th>
					{{#else}}
					<th colspan="3" scope="colgroup" class="empty">&nbsp;</th>
					{{/if}}
				</tr>
				<tr>
					<th scope="col">#</th>
					<th scope="col">{{=$ctx.doI18N("table.heading.date")}}</th>
					<th scope="col">{{=$ctx.doI18N("table.heading.days")}}</th>
					
					<th scope="col" class="lefthighlightcolheader">{{=$ctx.doI18N("table.heading.disbursement")}}</th>
					<th scope="col">Principal Repayment</th>
					<th scope="col" class="righthighlightcolheader">{{=$ctx.doI18N("table.heading.balanceOfLoan")}}</th>

					<th scope="col" class="lefthighlightcolheader">{{=$ctx.doI18N("table.heading.interest")}}</th>
					<th scope="col">{{=$ctx.doI18N("table.heading.fees")}}</th>
					<th scope="col" class="righthighlightcolheader">{{=$ctx.doI18N("table.heading.penalties")}}</th>

					<th scope="col">{{=$ctx.doI18N("table.heading.totalDue")}}</th>
					<th scope="col">{{=$ctx.doI18N("table.heading.totalPaid")}}</th>
					{{#if totalWaived}}
					<th scope="col">{{=$ctx.doI18N("table.heading.totalWaived")}}</th>
					{{/if}}
					<th scope="col">{{=$ctx.doI18N("table.heading.totalOutstanding")}}</th>
				</tr>
			</thead>
			<tbody>
			{{#each periods}}
			<tr>
				<td scope="row">{{=$ctx.number(period)}}</td>
				<td>{{=$ctx.globalDate(dueDate)}}</td>
				<td>{{=$ctx.number(daysInPeriod)}}</td>

				<td class="lefthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, principalDisbursed)}}</td>
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, principalDue)}}</td>
				<td class="righthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, principalLoanBalanceOutstanding)}}</td>

				<td class="lefthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, interestOriginalDue)}}</td>
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, feeChargesDue)}}</td>
				<td class="righthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, penaltyChargesDue)}}</td>

				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, totalOriginalDueForPeriod)}}</td>
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, totalPaidForPeriod)}}</td>
				{{#if $parent.parent.data.totalWaived}}
				<td>{{=$ctx.monetaryValue($parent.parent.parent.data.currency, totalWaivedForPeriod)}}</td>
				{{/if}}
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, totalOutstandingForPeriod)}}</td>
			</tr>
			{{/each}}
			</tbody>
			<tfoot class="ui-widget-header">
				<tr>
					<th colspan="2">{{=$ctx.doI18N("table.heading.total")}}</th>
					<th>{{=$ctx.number(loanTermInDays)}}</th>

					<th class="lefthighlightcolheader">{{=$ctx.monetaryValue(currency, totalPrincipalDisbursed)}}</th>
					<th>{{=$ctx.monetaryValue(currency, totalPrincipalExpected)}}</th>
					<th class="righthighlightcolheader">&nbsp;</th>

					<th class="lefthighlightcolheader">{{=$ctx.monetaryValue(currency, totalInterestCharged)}}</th>
					<th>{{=$ctx.monetaryValue(currency, totalFeeChargesCharged)}}</th>
					<th class="righthighlightcolheader">{{=$ctx.monetaryValue(currency, totalPenaltyChargesCharged)}}</th>

					<th>{{=$ctx.monetaryValue(currency, totalRepaymentExpected)}}</th>
					<th>{{=$ctx.monetaryValue(currency, totalRepayment)}}</th>
					{{#if totalWaived}}
					<th>{{=$ctx.monetaryValue(currency, totalWaived)}}</th>
					{{/if}}
					<th>{{=$ctx.monetaryValue(currency, totalOutstanding)}}</th>
				</tr>
			</tfoot>
		</table>
		{{/each}}
	</div>

    {{#if transactions}}
	<!-- Third loan tab -->
	<div id="transactions{{=id}}" style="margin-top: 5px;">
		<table id="newrepaymentsactivity{{=id}}" class="pretty displaypayments">
		<caption>{{=$ctx.doI18N("table.transactions.caption")}}</caption>
			<thead>
				<tr>
				<th>{{=$ctx.doI18N("table.heading.transactiondate")}}</th>
				<th>{{=$ctx.doI18N("table.heading.transactionType")}}</th>
				<th>{{=$ctx.doI18N("table.heading.amount")}}</th>
				<th>{{=$ctx.doI18N("table.heading.breakdown")}}</th>
				<th>{{=$ctx.doI18N("table.heading.action")}}</th>
				</tr>
			</thead>
			<tbody>
				{{#each transactions}}
				<tr>
				<td>{{=$ctx.globalDate(date)}}</td>
				<td>{{=$ctx.doI18N(type.code)}}</td>
				<td>{{=$ctx.monetaryValue(currency, amount)}}</td>
				<td>
					<table style="border: 0px; padding: 0px;" class="notablestyle">
						{{#if principalPortion}}<tr><td style="border: 0px; text-align: left; ">Principal: {{=$ctx.monetaryValue(currency, principalPortion)}}</td></tr>{{/if}}
						{{#if interestPortion}}<tr><td style="border: 0px; text-align: left; ">Interest: {{=$ctx.monetaryValue(currency, interestPortion)}}</td></tr>{{/if}}
						{{#if feeChargesPortion}}<tr><td style="border: 0px; text-align: left; ">Fees: {{=$ctx.monetaryValue(currency, feeChargesPortion)}}</td></tr>{{/if}}
						{{#if penaltyChargesPortion}}<tr><td style="border: 0px; text-align: left; ">Penalities: {{=$ctx.monetaryValue(currency, penaltyChargesPortion)}}</td></tr>{{/if}}
					</table>
				</td>
				{{#if $ctx.isAdjustableTransaction(type.id)}}
				<td>
				    <button id="adjustrepaymentbtn{{=$parent.parent.parent.data.id}}_{{=id}}" class="adjustloanrepayment">{{=$ctx.doI18N("button.loanTransaction.adjust")}}</button>
				    <button id="undorepaymentbtn{{=$parent.parent.parent.data.id}}_{{=id}}" class="undoloanrepayment">{{=$ctx.doI18N("button.loanTransaction.undo")}}</button>
				</td>
				{{#else}}
				<td>&nbsp;</td>
				{{/if}}
				</tr>
				{{/each}}
			</tbody>
		</table>
	</div>
	{{/if}}
	<!-- Loan Collaterals Tabs-->
	{{#if collateral}}
    <div id="collaterals{{=id}}" style="margin-top: 5px;">
        <table class="pretty displaypayments">
        <caption>{{=$ctx.doI18N("table.caption.loanCollaterals")}}</caption>
            <thead>
                <tr>
                <th>{{=$ctx.doI18N("table.heading.loan.collateral.type")}}</th>
                <th>{{=$ctx.doI18N("table.heading.loan.collateral.description")}}</th>
                <th>{{=$ctx.doI18N("table.heading.loan.collateral.value")}}</th>
                <th>{{=$ctx.doI18N("table.heading.action")}}</th>
                </tr>
            </thead>
            <tbody>
                {{#each collateral}}
                <tr>
                    <td style="width:300px;">{{=$ctx.doI18N(type.name)}}</td>
                    <td>{{=description}}</td>
                    <td>{{=$ctx.monetaryValue($parent.parent.parent.data.currency, value)}}</td>
                    <td>
                        {{#if $parent.parent.data.status.code == "loanStatusType.submitted.and.pending.approval"}}  
                          <button id="modifyloan{{=$parent.parent.parent.data.id}}collateral{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</button>
                        {{/if}}   
                        {{#if $parent.parent.data.status.code == "loanStatusType.submitted.and.pending.approval"}}    
                          <button id="deleteloan{{=$parent.parent.parent.data.id}}collateral{{=id}}">{{=$ctx.doI18N("link.action.delete")}}</button>
                        {{/if}}  
                    </td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
    {{/if}}
	   
	<!-- Loan Documents Tab--->
	<div id="loanDocuments{{=id}}" style="margin-top: 5px;">
	</div>

	
</div>
</script>

	<script id="loanDocumentsTemplate" type="text/x-jquery-tmpl">
	<table width="100%">
		<td align="right">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   			<button id="addloandocument{{=loanId}}">{{=$ctx.doI18N("button.document.add")}}</button>
			</span>
		</td>
	</table>
	<hr/>
	<table style="vertical-align: top;width: 100%">
		{{#each crudRows}}
				<tr>
					<td>{{=$ctx.doI18N("label.name")}}</td>
					<td>{{=name}}</td>
				</tr>
				<tr>
				   	<td><label for="description">{{=$ctx.doI18N("label.description")}}</label></td>
					<td><textarea readonly="true" id="description" name="description" cols="75" rows="5">{{=description}}</textarea></td>
					<td>
						<span id="modifycellToolbar" class="ui-widget-header ui-corner-all">
							<button id="downloadloandocument{{=id}}">{{=$ctx.doI18N("link.action.download")}}</button>
					   		<button id="editloandocument{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</button>
					   		<button id="deleteloandocument{{=id}}">{{=$ctx.doI18N("link.action.delete")}}</button>
						</span>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.filename")}}</td>
					<td>{{=fileName}}</td>
				</tr>
				<tr>
					<td colspan="2">
						<hr/>
					</td>
				</tr>
		{{/each}}
	</table>
</script>

	<script id="loanDocumentsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("label.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("label.description")}}</label>
				<textarea cols="75" rows="5" id="description" name="description">{{=description}}</textarea>
			</td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.select.new.file")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>

	<script id="editLoanDocumentsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("label.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("label.description")}}</label>
				<textarea cols="75" rows="5" id="description" name="description">{{=description}}</textarea>
			</td>
		<tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("label.current.filename")}}</label>
				{{=fileName}}
			</td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.select.new.file")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>

	<script id="guarantorFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
    
    <table>
	    	<tr>
	    		<td><input type="checkbox" id="internalGuarantorCheckbox" checked="true">{{=$ctx.doI18N("label.guarantor.existingClient")}}</input>
	    		</td>
	    	</tr>
	</table>
    <br/>
    <div id="internalGuarantorDiv">
	    <table>
	    	<tr>
	    		<td><b>{{=$ctx.doI18N("label.help.smartsearch")}}</b>
	    			<input id="smartGuarantorSearch" name="smartGuarantorSearch" title="" type="text" value=""/>
	    		</td>
	    	</tr>
	    	<tr>
	    		<td><small>{{=$ctx.doI18N("label.help.autocomplete")}}</small></td>
	    	</tr>
	    </table>
	    <fieldset>
	    	<legend>{{=$ctx.doI18N("label.guarantorDetails")}}</legend>
			<table>
                <tr>
                    <td><label>{{=$ctx.doI18N("label.guarantor.relationship")}}</label></td>
                    <td>
                        <select id="relationshipTypeIdForInternalGuarantor" name="relationshipTypeIdForInternalGuarantor" title="">
                           <option value="" selected="selected">{{=$ctx.doI18N("option.relationship.first.choice")}}</option>
                           {{#each allowedClientRelationshipTypes}}
                           <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                           {{/each}}
                        </select>
                    </td>
                </tr>
				<tr>
					<td><label for="selectedGuarantorName">{{=$ctx.doI18N("label.name")}}</label></td>
					<td><input readonly="true" id="selectedGuarantorName" name="selectedGuarantorName" title="" type="text" value=""/></td>
					
				</tr>
				<tr>
					<td><label for="selectedGuarantorIdentifier">{{=$ctx.doI18N("label.guarantorIdentifier")}}</label></td>
					<td><input readonly="true" id="selectedGuarantorIdentifier" name="selectedGuarantorIdentifier" title="" type="text" value=""/></td>
				</tr>
				<tr>	
					<td><label for="selectedGuarantorBranch">{{=$ctx.doI18N("label.office")}}</label></td>
					<td><input readonly="true" id="selectedGuarantorBranch" name="selectedGuarantorBranch" title="" type="text" value=""/></td>
				</tr>
				<tr>	
					<td><label for="selectedGuarantorJoinedDate">{{=$ctx.doI18N("label.joinedon")}}</label></td>
					<td><input readonly="true" id="selectedGuarantorJoinedDate" name="selectedGuarantorJoinedDate" title="" type="text" value=""/></td>
				</tr>
			</table>
		</fieldset>
	</div>
	
	<div id="externalGuarantorDiv">
		 <input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
		 <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		 <fieldset>
	    	<legend>{{=$ctx.doI18N("label.guarantorDetails")}}</legend>
			<table>
			    <tr>
                    <td><label>{{=$ctx.doI18N("label.guarantor.relationship")}}</label></td>
                    <td>
                        <select id="relationshipTypeIdForExternalGuarantor" name="relationshipTypeIdForExternalGuarantor" title="">
                           <option value="" selected="selected">{{=$ctx.doI18N("option.relationship.first.choice")}}</option>
                           {{#each allowedClientRelationshipTypes}}
                           <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                           {{/each}}
                        </select>
                    </td>
                </tr>
				<tr>
					<td><label>{{=$ctx.doI18N("label.name")}}</label></td>
					<td>
						<input id="guarantorFirstName" name="guarantorFirstName" title="" type="text" value=""/>
						<input id="guarantorLastName" name="guarantorLastName" title="" type="text" value=""/>
					</td>
				</tr>
				<tr>
					<td><label for="guarantorDateOfBirth">{{=$ctx.doI18N("label.dob")}}</label></td>
					<td><input id="guarantorDateOfBirth" name="guarantorDateOfBirth" title="" class="datepickerfield" /></td>
				</tr>
				<tr>
					<td><label>{{=$ctx.doI18N("label.address")}}</label></td>
					<td><input id="guarantorAddressLine1" name="guarantorAddressLine1" type="text" style="width: 200px"/></td>
				</tr>
				<tr>
					<td></td>
					<td><input id="guarantorAddressLine2" name="guarantorAddressLine2" type="text" style="width: 200px"/></td>
				</tr>
				<tr>	
					<td><label for="guarantorCity">{{=$ctx.doI18N("label.city")}}</label></td>
					<td>
						<input id="guarantorCity" name="guarantorCity" title="" type="text" value=""/>
						{{=$ctx.doI18N("label.zip")}}
						<input id="guarantorZip" name="guarantorZip" title="" type="text" value=""/>
					</td>
				</tr>
				<tr>	
					<td><label for="guarantorMobileNumber">{{=$ctx.doI18N("label.mobile")}}</label></td>
					<td><input id="guarantorMobileNumber" name="guarantorMobileNumber" title="" type="text" value=""/></td>
				</tr>
				<tr>	
					<td><label for="guarantorHouseNumber">{{=$ctx.doI18N("label.telephone")}}</label></td>
					<td><input id="guarantorHouseNumber" name="guarantorHouseNumber" title="" type="text" value=""/></td>
				</tr>
			</table>
		</fieldset>
	</div>
 </form>
</script>

	<script id="loanApplicationApprovalTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<label for="approvedOnDate">{{=$ctx.doI18N("label.on")}}</label>
	<input id="approvedOnDate" name="approvedOnDate" title="" class="datepickerfield" />

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="53" id="note" name="note"></textarea>
</form>
</script>

	<script id="loanApplicationRejectionTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<label for="rejectedOnDate">{{=$ctx.doI18N("label.on")}}</label>
	<input id="rejectedOnDate" name="rejectedOnDate" title="" class="datepickerfield" />

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="53" id="note" name="note"></textarea>
</form>
</script>

	<script id="loanApplicationWithdrawnTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<label for="withdrawnOnDate">{{=$ctx.doI18N("label.on")}}</label>
	<input id="withdrawnOnDate" name="withdrawnOnDate" title="" class="datepickerfield" />

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="53" id="note" name="note"></textarea>
</form>
</script>

	<script id="loanDisbursementTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<label for="actualDisbursementDate">{{=$ctx.doI18N("label.on")}}</label>
	<input id="actualDisbursementDate" name="actualDisbursementDate" title="" class="datepickerfield" value="" />

    <label for="paymentTypeId">{{=$ctx.doI18N("label.payment.type")}}</label>
    <select id="paymentTypeId" name="paymentTypeId" title="" >
        {{#each paymentTypeOptions}}
                <option value="{{=id}}">{{=$ctx.doI18N(code)}}</option>
        {{/each}}
    </select>

    <label id="accountNumberLabel" for="accountNumber" class="paymentDetail accountDetail">{{=$ctx.doI18N("label.account.number")}}</label>
    <input id="accountNumber" name="accountNumber" class="paymentDetail accountDetail"/> 

    <label id="checkNumberLabel" for="checkNumber" class="paymentDetail checkDetail">{{=$ctx.doI18N("label.check.number")}}</label>
    <input id="checkNumber" name="checkNumber" class="paymentDetail checkDetail"/> 

    <label id="routingCodeLabel" for="routingCode" class="paymentDetail routingCodeDetail">{{=$ctx.doI18N("label.routing.code")}}</label>
    <input id="routingCode" name="routingCode" class="paymentDetail routingCodeDetail"/> 
    
    <label id="receiptNumberLabel" for="receiptNumber" class="paymentDetail receiptDetail">{{=$ctx.doI18N("label.receipt.number")}}</label>
    <input id="receiptNumber" name="receiptNumber" class="paymentDetail receiptDetail"/> 
    

    <label id="bankNumberLabel" for="bankNumber" class="paymentDetail bankDetail">{{=$ctx.doI18N("label.bank.number")}}</label>
    <input id="bankNumber" name="bankNumber" class="paymentDetail bankDetail"/> 
    
	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="53" id="note" name="note"></textarea>
</form>
</script>

	<script id="undoStateTransitionLoanFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="5" cols="53" id="note" name="note"></textarea>
</form>
</script>

	<script id="transactionLoanWaiveInterestFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

    <input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
    <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

    <label for="transactionDate">{{=$ctx.doI18N("label.loan.transaction.on")}}</label>
    <input id="transactionDate" name="transactionDate" class="text ui-widget-content ui-corner-all datepickerfield" title="" value="{{=$ctx.globalDate(date)}}"/>

    <label for="transactionAmount">{{=$ctx.doI18N("label.amount")}}</label>
    <input id="transactionAmount" name="transactionAmount" class="text ui-widget-content ui-corner-all" title="" value="{{=$ctx.monetaryValue(currency, amount)}}" />

    <label for="note">{{=$ctx.doI18N("label.note")}}</label>
    <textarea rows="3" cols="53" id="note" name="note" class="text ui-widget-content ui-corner-all"></textarea>
   
</form>
</script>

	<script id="transactionLoanFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<label for="transactionDate">{{=$ctx.doI18N("label.loan.transaction.on")}}</label>
	<input id="transactionDate" name="transactionDate" class="text ui-widget-content ui-corner-all datepickerfield" title="" value="{{=$ctx.globalDate(date)}}"/>

	<label for="transactionAmount">{{=$ctx.doI18N("label.amount")}}</label>
	<input id="transactionAmount" name="transactionAmount" class="text ui-widget-content ui-corner-all" title="" value="{{=$ctx.monetaryValue(currency, amount)}}" />

    <label for="paymentTypeId">{{=$ctx.doI18N("label.payment.type")}}</label>
    <select id="paymentTypeId" name="paymentTypeId" title="" >
        {{#if paymentDetailData}}
            {{#each paymentTypeOptions}}
                {{#if $parent.parent.data.paymentDetailData.paymentType.id === id)}}
                    <option value="{{=id}}" selected="true">{{=$ctx.doI18N(code)}}</option>
                {{#else}}
                     <option value="{{=id}}">{{=$ctx.doI18N(code)}}</option>
                {{/if}}
            {{/each}}
        {{#else}}
            {{#each paymentTypeOptions}}
                <option value="{{=id}}">{{=$ctx.doI18N(code)}}</option>
            {{/each}}
        {{/if}}
    </select>

    <label id="accountNumberLabel" for="accountNumber" class="paymentDetail accountDetail">{{=$ctx.doI18N("label.account.number")}}</label>
    {{#if paymentDetailData}}
        <input id="accountNumber" name="accountNumber" class="paymentDetail accountDetail" value="{{=paymentDetailData.accountNumber}}"/> 
    {{#else}}
        <input id="accountNumber" name="accountNumber" class="paymentDetail accountDetail"/> 
    {{/if}}

    <label id="checkNumberLabel" for="checkNumber" class="paymentDetail checkDetail">{{=$ctx.doI18N("label.check.number")}}</label>
    {{#if paymentDetailData}}
        <input id="checkNumber" name="checkNumber" class="paymentDetail checkDetail" value="{{=paymentDetailData.checkNumber}}"/> 
    {{#else}}
        <input id="checkNumber" name="checkNumber" class="paymentDetail checkDetail"/> 
    {{/if}}

    <label id="routingCodeLabel" for="routingCode" class="paymentDetail routingCodeDetail">{{=$ctx.doI18N("label.routing.code")}}</label>
    {{#if paymentDetailData}}
        <input id="routingCode" name="routingCode" class="paymentDetail routingCodeDetail" value="{{=paymentDetailData.routingCode}}"/> 
    {{#else}}
        <input id="routingCode" name="routingCode" class="paymentDetail routingCodeDetail"/> 
    {{/if}}

    <label id="receiptNumberLabel" for="receiptNumber" class="paymentDetail receiptDetail">{{=$ctx.doI18N("label.receipt.number")}}</label>
    {{#if paymentDetailData}}
        <input id="receiptNumber" name="receiptNumber" class="paymentDetail receiptDetail" value="{{=paymentDetailData.receiptNumber}}"/>
    {{#else}}
        <input id="receiptNumber" name="receiptNumber" class="paymentDetail receiptDetail"/> 
    {{/if}} 

    <label id="bankNumberLabel" for="bankNumber" class="paymentDetail bankDetail">{{=$ctx.doI18N("label.bank.number")}}</label>
    {{#if paymentDetailData}}
        <input id="bankNumber" name="bankNumber" class="paymentDetail bankDetail" value="{{=paymentDetailData.bankNumber}}"/>
    {{#else}}
        <input id="bankNumber" name="bankNumber" class="paymentDetail bankDetail"/> 
    {{/if}} 

    <label for="note">{{=$ctx.doI18N("label.note")}}</label>
    <textarea rows="3" cols="53" id="note" name="note" class="text ui-widget-content ui-corner-all"></textarea>
   
</form>
</script>

	<script id="loanTransactionWriteOffFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<label for="transactionDate">{{=$ctx.doI18N("label.loan.transaction.writeoff.on")}}</label>
	<input id="transactionDate" name="transactionDate" class="text ui-widget-content ui-corner-all datepickerfield" title="" value="{{=$ctx.globalDate(date)}}"/>

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="53" id="note" name="note" class="text ui-widget-content ui-corner-all"></textarea>
</form>
</script>
	<!-- end of existing loan application/contract screens -->


	<!-- new savings product templates -->
	<script id="savingsProductListTemplate" type="text/x-jquery-tmpl">
<table id='savingsproductstable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td title='{{=description}}'>{{=name}}</td>
	<td>
		<a id='editsavingproduct{{=id}}' class='editsavingproduct' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="savingsProductDialogTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
	<div id="formerrors"></div>

	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<!-- start savings product tabs -->
	<div id="savingsproducttabs{{=id}}" class="savingsproducttabs">
	    <ul>
			<li><a href="#savingsproductdetails" title="savingsproductdetails">{{=$ctx.doI18N("tab.details")}}</a></li>
		    <li><a href="#savingsproductterms" title="savingsproductterms">{{=$ctx.doI18N("tab.terms")}}</a></li>
			<li><a href="#savingsproductsettings" title="savingsproductsettings">{{=$ctx.doI18N("tab.settings")}}</a></li>
	    </ul>
	    
		<div id="savingsproductdetails" style="margin-top: 5px;">
			<table>
			<tr>
				<td>{{=$ctx.doI18N("label.name")}}</td>
				<td><input id="name" name="name" type="text" title="" value="{{=name}}" style="width: 544px;"/></td>
			</tr>
			<tr>
				<td>{{=$ctx.doI18N("label.description")}}</td>
				<td><textarea cols="73" rows="3" id="description" name="description" title="">{{=description}}</textarea></td>
			</tr>
			</table>
		</div>

	    <div id="savingsproductterms" style="margin-top: 5px;">
			<table>
				<tr>
					<td>{{=$ctx.doI18N("label.currency")}}</td>
					<td>
							<select id="currencyCode" name="currencyCode" title="" style="width: 181px;" onChange="$('#digitsAfterDecimal').val($('#currencyCode option:selected').attr('digitsad'));">
		            			<option value="" digitsad="0">{{=$ctx.doI18N("option.currency.first.choice")}}</option>
							{{#each currencyOptions}}
		              			{{#if $parent.parent.data.currency.code===code}}
								<option value="{{=code}}" digitsad="{{=$ctx.number(decimalPlaces)}}" selected="selected">{{=name}}</option>
								{{#else}}
								<option value="{{=code}}" digitsad="{{=$ctx.number(decimalPlaces)}}">{{=name}}</option>
								{{/if}}
		          			{{/each}}
							</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.decimalplaces")}}</td>
					<td><input id="digitsAfterDecimal" name="digitsAfterDecimal" title="" style="width: 175px;" value="{{=$ctx.number(currency.decimalPlaces)}}" /></td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.nominalAnnualInterestRate")}}</td>
					<td>
						<input id="nominalAnnualInterestRate" name="nominalAnnualInterestRate" title="" type="text" 
								value="{{=$ctx.decimal(nominalAnnualInterestRate, 4)}}" style="width: 50px;" />
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.interestCompoundingPeriodType")}}</td>
					<td>
						<select name="interestCompoundingPeriodType" id="interestCompoundingPeriodType"  title="" style="width: 181px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#each interestCompoundingPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestCompoundingPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
								{{/if}}
       						{{/each}}
						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.interestPostingPeriodType")}}</td>
					<td>
						<select name="interestPostingPeriodType" id="interestPostingPeriodType"  title="" style="width: 181px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#each interestPostingPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestPostingPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
								{{/if}}
       						{{/each}}
						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.interestCalculationType")}}</td>
					<td>
						<select name="interestCalculationType" id="interestCalculationType"  title="" style="width: 181px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#each interestCalculationTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestCalculationType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
								{{/if}}
       						{{/each}}
						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.interestCalculationDaysInYearType")}}</td>
					<td>
						<select name="interestCalculationDaysInYearType" id="interestCalculationDaysInYearType"  title="" style="width: 181px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#each interestCalculationDaysInYearTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestCalculationDaysInYearType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
								{{/if}}
       						{{/each}}
						</select>
					</td>
				</tr>
			</table>
		</div>

		<div id="savingsproductsettings" style="margin-top: 5px;">
			<table>
				<tr>
					<td>{{=$ctx.doI18N("label.minRequiredOpeningBalance")}}</td>
					<td colspan="2"><input id="minRequiredOpeningBalance" name="minRequiredOpeningBalance" title="" type="text" value="{{=$ctx.monetaryValue(currency, minRequiredOpeningBalance)}}" style="width: 215px;" /></td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.lockedinfor")}}</td>
					<td>
						<input id="lockinPeriodFrequency" name="lockinPeriodFrequency" title="" type="text" value="{{=$ctx.number(lockinPeriodFrequency)}}" style="width: 75px;" />
						<select name="lockinPeriodFrequencyType" id="lockinPeriodFrequencyType"  title="" style="width: 135px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#if lockinPeriodFrequencyType}}
							{{#each lockinPeriodFrequencyTypeOptions}}
									{{#if $ctx.number($parent.parent.data.lockinPeriodFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
									{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
									{{/if}}
       						{{/each}}
							{{#else}}
								{{#each lockinPeriodFrequencyTypeOptions}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
       							{{/each}}
							{{/if}}
						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.withdrawalFee")}}</td>
					<td>
						{{#if withdrawalFeeType}}

							{{#if $ctx.number(withdrawalFeeType.id)===2}}
							<input id="withdrawalFeeAmount" name="withdrawalFeeAmount" title="" type="text" value="{{=$ctx.monetaryValue(currency, withdrawalFeeAmount)}}" style="width: 75px;" />
							{{#else}}
							<input id="withdrawalFeeAmount" name="withdrawalFeeAmount" title="" type="text" value="{{=$ctx.decimal(withdrawalFeeAmount, 4)}}" style="width: 75px;" />
							{{/if}}

							<select name="withdrawalFeeType" id="withdrawalFeeType"  title="" style="width: 135px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#if withdrawalFeeType}}
							{{#each withdrawalFeeTypeOptions}}
									{{#if $ctx.number($parent.parent.data.withdrawalFeeType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
									{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
									{{/if}}
       						{{/each}}
							{{#else}}
								{{#each withdrawalFeeTypeOptions}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
       							{{/each}}
							{{/if}}
							</select>
						{{#else}}
							<input id="withdrawalFeeAmount" name="withdrawalFeeAmount" title="" type="text" 
										value="{{=$ctx.monetaryValue(currency, withdrawalFeeAmount)}}" style="width: 75px;" />

							<select name="withdrawalFeeType" id="withdrawalFeeType"  title="" style="width: 135px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#each withdrawalFeeTypeOptions}}
								<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
   							{{/each}}
							</select>
						{{/if}}
					</td>
				</tr>
				<input type="hidden" id="monthDayFormat" name="monthDayFormat" value="dd MMM" />
				<tr>
					<td>{{=$ctx.doI18N("label.annualFee")}}</td>
					<td>
						<input id="annualFeeAmount" name="annualFeeAmount" title="" type="text" value="{{=$ctx.monetaryValue(currency, annualFeeAmount)}}" style="width: 75px;" />
						{{=$ctx.doI18N("label.on")}}
						<input id="annualFeeOnMonthDay" name="annualFeeOnMonthDay" title="" type="text" class="noyeardatepickerfield" value="{{=$ctx.monthDayDate(annualFeeOnMonthDay)}}" />
					</td>
				</tr>
			</table>
		</div>
	</div>
	<!-- end of savings product tabs -->
</form>
</script>
	<!-- end of savings products templates -->

	<!-- new savings accounts templates -->
	<script id="savingsAccountSelectProductDialogTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	{{#if clientId}}
	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	{{/if}}
	{{#if groupId}}
	<input type="hidden" id="groupId" name="groupId" value="{{=groupId}}" />
	{{/if}}
	<table>
			<tr>
				<td valign="top">
				{{=$ctx.doI18N("label.applicant")}}
				</td>
				<td valign="top">
				{{#if clientName}}
				<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" style="width: 300px;" />
				{{/if}}
				{{#if groupName}}
				<input id="groupname" name="groupName" title="" type="text" value="{{=groupName}}" disabled="disabled" style="width: 300px;" />
				{{/if}}
				</td>

				<td valign="top">&nbsp;</td>

				<td valign="top">{{=$ctx.doI18N("label.product")}}</td>
				<td valign="top">
					<select name="productId" id="productId" style="width: 306px;">
						<option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
				{{#each productOptions}}
					{{#if $ctx.number($parent.parent.data.savingsProductId)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
					{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=name}}</option>
					{{/if}}
	    		{{/each}}
					</select>
				</td>
			</tr>
	</table>
</form>
</script>

	<script id="savingsAccountDialogTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
	<div id="formerrors"></div>

	<!-- template only setup for individual client lending -->
	{{#if clientId}}
	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	{{/if}}
	{{#if groupId}}
	<input type="hidden" id="groupId" name="groupId" value="{{=groupId}}" />
	{{/if}}
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />

	<table>
			<tr>
				<td valign="top">
				{{=$ctx.doI18N("label.applicant")}}
				</td>
				<td valign="top">
				{{#if clientName}}
				<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" style="width: 300px;" />
				{{/if}}
				{{#if groupName}}
				<input id="groupname" name="groupName" title="" type="text" value="{{=groupName}}" disabled="disabled" style="width: 300px;" />
				{{/if}}
				</td>

				<td valign="top">&nbsp;</td>

				<td valign="top">{{=$ctx.doI18N("label.product")}}</td>
				<td valign="top">
					<select name="productId" id="productId" style="width: 306px;">
				{{#each productOptions}}
					{{#if $ctx.number($parent.parent.data.savingsProductId)===$ctx.number(id)}}
					<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
					{{#else}}
					<option value="{{=$ctx.number(id)}}">{{=name}}</option>
					{{/if}}
	    		{{/each}}
					</select>
				</td>
			</tr>

			<tr>
				<td valign="top">
				{{=$ctx.doI18N("label.active")}}
				</td>
				<td valign="top">
				<input id="activeCheckbox" type="checkbox" name="active" value="true" checked />
				</td>

				<td valign="top">&nbsp;</td>

				<td valign="top">{{=$ctx.doI18N("label.activationDate")}}</td>
				<td valign="top">
					<input id="activationDate" name="activationDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(activationDate)}}" />
				</td>
			</tr>
	</table>

	<!-- start savings accounts tabs -->
	<div id="savingsaccounttabs{{=id}}" class="savingsaccounttabs">
	    <ul>
		    <li><a href="#savingsaccountterms" title="savingsaccountterms">{{=$ctx.doI18N("tab.terms")}}</a></li>
			<li><a href="#savingsaccountsettings" title="savingsaccountsettings">{{=$ctx.doI18N("tab.settings")}}</a></li>
	    </ul>
	    
	    <div id="savingsaccountterms" style="margin-top: 5px;">
			<table>
				<tr>
					<td>{{=$ctx.doI18N("label.currency")}}</td>
					<td>{{=$ctx.doI18N(currency.nameCode)}}</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.decimalplaces")}}</td>
					<td><input id="digitsAfterDecimal" name="digitsAfterDecimal" title="" style="width: 175px;" value="{{=$ctx.number(currency.decimalPlaces)}}" disabled="disabled"/></td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.nominalAnnualInterestRate")}}</td>
					<td>
						<input id="nominalAnnualInterestRate" name="nominalAnnualInterestRate" title="" type="text" value="{{=$ctx.decimal(nominalAnnualInterestRate, 4)}}" style="width: 50px;" />
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.interestCompoundingPeriodType")}}</td>
					<td>
						<select name="interestCompoundingPeriodType" id="interestCompoundingPeriodType"  title="" style="width: 181px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#each interestCompoundingPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestCompoundingPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
								{{/if}}
       						{{/each}}
						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.interestPostingPeriodType")}}</td>
					<td>
						<select name="interestPostingPeriodType" id="interestPostingPeriodType"  title="" style="width: 181px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#each interestPostingPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestPostingPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
								{{/if}}
       						{{/each}}
						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.interestCalculationType")}}</td>
					<td>
						<select name="interestCalculationType" id="interestCalculationType"  title="" style="width: 181px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#each interestCalculationTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestCalculationType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
								{{/if}}
       						{{/each}}
						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.interestCalculationDaysInYearType")}}</td>
					<td>
						<select name="interestCalculationDaysInYearType" id="interestCalculationDaysInYearType"  title="" style="width: 181px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#each interestCalculationDaysInYearTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestCalculationDaysInYearType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
								{{/if}}
       						{{/each}}
						</select>
					</td>
				</tr>
			</table>
		</div>

		<div id="savingsaccountsettings" style="margin-top: 5px;">
			<table>
				<tr>
					<td>{{=$ctx.doI18N("label.minRequiredOpeningBalance")}}</td>
					<td><input id="minRequiredOpeningBalance" name="minRequiredOpeningBalance" title="" type="text" value="{{=$ctx.monetaryValue(currency, minRequiredOpeningBalance)}}" style="width: 215px;" /></td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.lockedinfor")}}</td>
					<td>
						<input id="lockinPeriodFrequency" name="lockinPeriodFrequency" title="" type="text" value="{{=$ctx.number(lockinPeriodFrequency)}}" style="width: 75px;" />
						<select name="lockinPeriodFrequencyType" id="lockinPeriodFrequencyType"  title="" style="width: 121px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#if lockinPeriodFrequencyType}}
							{{#each lockinPeriodFrequencyTypeOptions}}
									{{#if $ctx.number($parent.parent.data.lockinPeriodFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
									{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
									{{/if}}
       						{{/each}}
							{{#else}}
								{{#each lockinPeriodFrequencyTypeOptions}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
       							{{/each}}
							{{/if}}
						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.withdrawalFee")}}</td>
					<td>
						{{#if withdrawalFeeType}}

							{{#if $ctx.number(withdrawalFeeType.id)===2}}
							<input id="withdrawalFeeAmount" name="withdrawalFeeAmount" title="" type="text" value="{{=$ctx.monetaryValue(currency, withdrawalFeeAmount)}}" style="width: 75px;" />
							{{#else}}
							<input id="withdrawalFeeAmount" name="withdrawalFeeAmount" title="" type="text" value="{{=$ctx.decimal(withdrawalFeeAmount, 4)}}" style="width: 75px;" />
							{{/if}}

							<select name="withdrawalFeeType" id="withdrawalFeeType"  title="" style="width: 135px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#if withdrawalFeeType}}
							{{#each withdrawalFeeTypeOptions}}
									{{#if $ctx.number($parent.parent.data.withdrawalFeeType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
									{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
									{{/if}}
       						{{/each}}
							{{#else}}
								{{#each withdrawalFeeTypeOptions}}
									<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
       							{{/each}}
							{{/if}}
							</select>
						{{#else}}
							<input id="withdrawalFeeAmount" name="withdrawalFeeAmount" title="" type="text" 
										value="{{=$ctx.monetaryValue(currency, withdrawalFeeAmount)}}" style="width: 75px;" />

							<select name="withdrawalFeeType" id="withdrawalFeeType"  title="" style="width: 135px;">
							<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
							{{#each withdrawalFeeTypeOptions}}
								<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
   							{{/each}}
							</select>
						{{/if}}
					</td>
				</tr>
				<input type="hidden" id="monthDayFormat" name="monthDayFormat" value="dd MMM" />
				<tr>
					<td>{{=$ctx.doI18N("label.annualFee")}}</td>
					<td>
						<input id="annualFeeAmount" name="annualFeeAmount" title="" type="text" value="{{=$ctx.monetaryValue(currency, annualFeeAmount)}}" style="width: 75px;" />
						{{=$ctx.doI18N("label.on")}}
						<input id="annualFeeOnMonthDay" name="annualFeeOnMonthDay" title="" type="text" class="noyeardatepickerfield" value="{{=$ctx.monthDayDate(annualFeeOnMonthDay)}}" />
					</td>
				</tr>
			</table>
		</div>
	</div>
	<!-- end of savings account tabs -->
</form>
</script>

	<script id="savingAccountDataTabTemplate" type="text/x-jquery-tmpl">
<div id="savingaccountactions">
	<table width="100%">
		<tr><td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
			{{#if status.active}}
			<button id="savingsaccountdepositbtn{{=id}}" class="savingsaccountdeposit">{{=$ctx.doI18N("button.deposit")}}</button>
			<button id="savingsaccountwithdrawalbtn{{=id}}" class="savingsaccountwithdrawal">{{=$ctx.doI18N("button.withdrawal")}}</button>
			<button id="savingsaccountinterestcalcbtn{{=id}}" class="savingsaccountinterestcalc">{{=$ctx.doI18N("button.calculateInterest")}}</button>
			<button id="savingsaccountinterestpostbtn{{=id}}" class="savingsaccountinterestpost">{{=$ctx.doI18N("button.postInterest")}}</button>
			{{/if}}
			{{#if status.unactivated}}
			<button id="savingsaccountactivatebtn{{=id}}" class="savingsaccountactivate">{{=$ctx.doI18N("button.activate")}}</button>
			<button id="savingsaccountdeletebtn{{=id}}" class="savingsaccountdelete">{{=$ctx.doI18N("button.delete")}}</button>
			{{/if}}
			</span>
		</td></tr>
	</table>
</div>

<div id="savingtabs{{=id}}" class="savingtabs">
	<ul>
		<li><a href="#details{{=id}}" title="details">{{=$ctx.doI18N("tab.details")}}</a></li>
		{{#if transactions}}
		<li><a href="#transactions{{=id}}" title="transactions">{{=$ctx.doI18N("tab.transactions")}}</a></li>
		{{/if}}
	</ul>
	<div id="details{{=id}}" style="margin-top: 5px;">
		{{#if accountNo}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.accountNo")}}</span>
			<span class="rowvalue">
			{{=accountNo}}
			<button id="editsavingsaccountnobtn{{=id}}" class="editsavingsaccountnobtn"><span>Edit</span></button>
			</span>
		</div>
		{{/if}}
		{{#if externalId}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.externalId")}}</span>
			<span class="rowvalue">
			{{=externalId}}
			<button id="editsavingsaccountnobtn{{=id}}" class="editsavingsaccountnobtn"><span>Edit</span></button>
			</span>
		</div>
		{{/if}}
		<br/>
		<br/>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.product")}}</span>
			<span class="rowvalue">{{=savingsProductName}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.currency")}}</span>
			<span class="rowvalue">{{=$ctx.doI18N(currency.nameCode)}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.nominalAnnualInterestRate")}}</span>
			<span class="rowvalue">{{=nominalAnnualInterestRate}}%</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interestCompoundingPeriodType")}}</span>
			<span class="rowvalue">{{=$ctx.doI18N(interestCompoundingPeriodType.code)}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interestPostingPeriodType")}}</span>
			<span class="rowvalue">{{=$ctx.doI18N(interestPostingPeriodType.code)}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interestCalculationType")}}</span>
			<span class="rowvalue">{{=$ctx.doI18N(interestCalculationType.code)}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interestCalculationDaysInYearType")}}</span>
			<span class="rowvalue">{{=$ctx.doI18N(interestCalculationDaysInYearType.code)}}</span>
		</div>
		<br/>
		{{#if withdrawalFeeType}}
			{{#if $ctx.number(withdrawalFeeType.id)===1}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.withdrawalFee")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, withdrawalFeeAmount)}} {{=$ctx.doI18N(withdrawalFeeType.code)}}</span>
		</div>
			{{#else}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.withdrawalFee")}}</span>
			<span class="rowvalue">{{=$ctx.decimal(withdrawalFeeAmount, 4)}} {{=$ctx.doI18N(withdrawalFeeType.code)}}</span>
		</div>
			{{/if}}
		{{/if}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.annualFee")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, annualFeeAmount)}} {{=$ctx.doI18N("label.on")}} {{=$ctx.monthDayDate(annualFeeOnMonthDay)}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.annualFeeNextDueDate")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(annualFeeNextDueDate)}}</span>
		</div>
		<br/>
		<br/>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.status")}}</span>
			<span class="rowvalue">{{=$ctx.doI18N(status.code)}}</span>
		</div>
		{{#if activationDate}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.activationDate")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(activationDate)}}</span>
		</div>
		{{/if}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.accountBalance")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, summary.accountBalance)}}</span>
		</div>
		<br/>
		<br/>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.totalDeposits")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, summary.totalDeposits)}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.totalWithdrawals")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, summary.totalWithdrawals)}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.totalWithdrawalFees")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, summary.totalWithdrawalFees)}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.totalAnnualFees")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, summary.totalAnnualFees)}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.totalInterestEarned")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, summary.totalInterestEarned)}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.totalInterestPosted")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, summary.totalInterestPosted)}}</span>
		</div>
	</div>
		
	{{#if transactions}}
	<div id="transactions{{=id}}" style="margin-top: 5px;">
	<table id="savingsaccounttransactions{{=id}}" class="pretty">
	<caption>{{=$ctx.doI18N("savingsaccount.transactions.caption")}}</caption>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.transactiondate")}}</th>
			<th>{{=$ctx.doI18N("table.heading.transactionType")}}</th>
			<th>{{=$ctx.doI18N("table.heading.amount")}}</th>
		</tr>
	</thead>
	<tbody>
	{{#each transactions}}
		<tr>
			<td>{{=$ctx.globalDate(date)}}</td>
			<td>{{=$ctx.doI18N(transactionType.code)}}</td>
			<td>{{=$ctx.monetaryValue($parent.parent.data.currency, amount)}}</td>
		</tr>
	{{/each}}
	</tbody>
	</table>
	</div>
	{{/if}}
</div>
</script>

	<script id="savingsAccountTransactionFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<table>
		<tr>
			<td>{{=$ctx.doI18N("label.transactionDate")}}</td>
			<td><input id="transactionDate" name="transactionDate" title="" class="datepickerfield" value="{{=$ctx.globalDate(date)}}"/></td>
		</tr>
		<tr>
			<td>{{=$ctx.doI18N("label.amount")}}</td>
			<td><input id="transactionAmount" name="transactionAmount" title="" type="text" value="{{=$ctx.moneyFormatted(currency, amount)}}" /></td>
		</tr>
	</table>
</form>
</script>
	<!-- end of new savings accounts templates -->

	<!-- new loan product templates -->
	<script id="loanproductListTemplate" type="text/x-jquery-tmpl">
<table id='loanproductstable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			{{#if $ctx.showTask("VIEWFUNDS")}}
			<th>{{=$ctx.doI18N("table.heading.fundname")}}</th>
			{{/if}}
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td title='{{=description}}'>{{=name}}</td>
	{{#if $ctx.showTask("VIEWFUNDS")}}
	<td>{{=fundName}}</td>
	{{/if}}
	<td>
		<a id='editloanproduct{{=id}}' class='editloanproduct' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="loanProductDialogTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
	<div id="formerrors"></div>

	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<div id="loanproducttabs{{=id}}" class="loanproducttabs">
	    <ul>
			<li><a href="#productdetails" title="productdetails">{{=$ctx.doI18N("tab.details")}}</a></li>
		    <li><a href="#productterms" title="productterms">{{=$ctx.doI18N("tab.terms")}}</a></li>
			<li><a href="#productsettings" title="productsettings">{{=$ctx.doI18N("tab.settings")}}</a></li>
			{{#if $ctx.showTask("VIEWCHARGES")}}
			<li><a href="#chargestab" title="charges">{{=$ctx.doI18N("tab.charges")}}</a></li>
			{{/if}}
			{{#if $ctx.showTask("VIEWJOURNALENTRIES")}}
			<li><a href="#accounting" title="accounting">{{=$ctx.doI18N("tab.accounting")}}</a></li>
			{{#else}}
			<li><a href="#accounting" title="accounting" style="display: none">{{=$ctx.doI18N("tab.accounting")}}</a></li>
			{{/if}}
	    </ul>
	    
		<div id="productdetails" style="margin-top: 5px;">
			<table>
			<tr>
				<td>{{=$ctx.doI18N("label.name")}}</td>
				<td><input id="name" name="name" type="text" title="" value="{{=name}}" style="width: 544px;"/></td>
			</tr>
			<tr>
				<td>{{=$ctx.doI18N("label.description")}}</td>
				<td><textarea cols="73" rows="3" id="description" name="description" title="">{{=description}}</textarea></td>
			</tr>

			{{#if $ctx.showTask("VIEWFUNDS")}}
			<tr>
				<td>{{=$ctx.doI18N("label.fund")}}</td>
				<td>
					<select id="fundId" name="fundId" title="">
						<option value="">{{=$ctx.doI18N("option.fund.first.choice")}}</option>
					{{#each fundOptions}}
						{{#if $ctx.number($parent.parent.data.fundId)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
						{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=name}}</option>
						{{/if}}
            		{{/each}}
					</select>
				</td>
			</tr>
			{{/if}}
			</table>
		</div>

	    <div id="productterms" style="margin-top: 5px;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("label.currency")}}</td>
							<td colspan="2">
							<select id="currencyCode" name="currencyCode" title="" style="width: 181px;" onChange="$('#digitsAfterDecimal').val($('#currencyCode option:selected').attr('digitsad'));">
		            			<option value="" digitsad="0">{{=$ctx.doI18N("option.currency.first.choice")}}</option>
							{{#each currencyOptions}}
		              			{{#if $parent.parent.data.currency.code===code}}
								<option value="{{=code}}" digitsad="{{=$ctx.number(decimalPlaces)}}" selected="selected">{{=name}}</option>
								{{#else}}
								<option value="{{=code}}" digitsad="{{=$ctx.number(decimalPlaces)}}" >{{=name}}</option>
								{{/if}}
		          			{{/each}}
							</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.decimalplaces")}}</td>
							<td><input id="digitsAfterDecimal" name="digitsAfterDecimal" title="" style="width: 100px;" value="{{=$ctx.number(currency.decimalPlaces)}}" /></td>
						</tr>
                        <tr>
                            <td class="withsubdesc">{{=$ctx.doI18N("label.principal")}}</td>
							<td class="withsubdesc">
                                <input id="minPrincipal" name="minPrincipal" title="" type="text" value="{{=$ctx.monetaryValue(currency, minPrincipal)}}" style="width: 100px;" />
                            </td>
                            <td class="withsubdesc">
                                <input id="principal" name="principal" title="" type="text" value="{{=$ctx.monetaryValue(currency, principal)}}" style="width: 100px;" />
                            </td>
							<td class="withsubdesc">
								<input id="maxPrincipal" name="maxPrincipal" title="" type="text" value="{{=$ctx.monetaryValue(currency, maxPrincipal)}}" style="width: 100px;" />
							</td>
                        </tr>
						<tr>
							<td class="labelrow"></td>
                            <td class="labelrow">{{=$ctx.doI18N("label.minimum")}}</td>
							<td class="labelrow">{{=$ctx.doI18N("label.default")}}</td>
                            <td class="labelrow">{{=$ctx.doI18N("label.maximum")}}</td>
                        </tr>

						<tr>
							<td class="withsubdesc">{{=$ctx.doI18N("label.numberof.repayments")}}</td>
							<td class="withsubdesc">
								<input id="minNumberOfRepayments" name="minNumberOfRepayments" title="" type="text" value="{{=$ctx.number(minNumberOfRepayments)}}" style="width: 100px;" />
							</td>
							<td class="withsubdesc">
                                <input id="numberOfRepayments" name="numberOfRepayments" title="" type="text" value="{{=$ctx.number(numberOfRepayments)}}" style="width: 100px;" />
                            </td>
							<td class="withsubdesc">
                                <input id="maxNumberOfRepayments" name="maxNumberOfRepayments" title="" type="text" value="{{=$ctx.number(maxNumberOfRepayments)}}" style="width: 100px;" />
                            </td>
						</tr>
						<tr>
							<td class="labelrow"></td>
                            <td class="labelrow">{{=$ctx.doI18N("label.minimum")}}</td>
							<td class="labelrow">{{=$ctx.doI18N("label.default")}}</td>
                            <td class="labelrow">{{=$ctx.doI18N("label.maximum")}}</td>
                        </tr>
						<tr>
							<td>{{=$ctx.doI18N("label.repaidevery")}}</td>
							<td>
								<input id="repaymentEvery" name="repaymentEvery" title="" type="text" value="{{=$ctx.number(repaymentEvery)}}" style="width: 100px;" />
							</td>
							<td>	
								<select name="repaymentFrequencyType" id="repaymentFrequencyType"  title="" style="width: 100px;">
								{{#each repaymentFrequencyTypeOptions}}
								{{#if $ctx.number($parent.parent.data.repaymentFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td class="withsubdesc">{{=$ctx.doI18N("label.nominal.interestrate")}}</td>
							<td class="withsubdesc">
								<input id="minInterestRatePerPeriod" name="minInterestRatePerPeriod" title="" type="text" value="{{=$ctx.decimal(minInterestRatePerPeriod, 4)}}" style="width: 100px;" />
                            </td>
							<td class="withsubdesc">
								<input id="interestRatePerPeriod" name="interestRatePerPeriod" title="" type="text" value="{{=$ctx.decimal(interestRatePerPeriod, 4)}}" style="width: 100px;" />
							</td>
							<td class="withsubdesc">
                                <input id="maxInterestRatePerPeriod" name="maxInterestRatePerPeriod" title="" type="text" value="{{=$ctx.decimal(maxInterestRatePerPeriod, 4)}}" style="width: 100px;" />
                            </td>                            
                            <td class="withsubdesc">
                                <select name="interestRateFrequencyType" id="interestRateFrequencyType"  title="" style="width: 100px;">
                                {{#each interestRateFrequencyTypeOptions}}
                                {{#if $ctx.number($parent.parent.data.interestRateFrequencyType.id)===$ctx.number(id)}}
                                    <option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
                                {{#else}}
                                    <option value="{{=$ctx.number(id)}}">{{=value}}</option>
                                {{/if}}
                                {{/each}}
                                </select>
                            </td>
                        </tr>
                        <tr>
							<td class="labelrow"></td>
							<td class="labelrow">{{=$ctx.doI18N("label.minimum")}}</td>
							<td class="labelrow">{{=$ctx.doI18N("label.default")}}</td>
                            <td class="labelrow">{{=$ctx.doI18N("label.maximum")}}</td>
                        </tr>
					</table>
		</div>

		<div id="productsettings" style="margin-top: 5px;">
			<table>
				<tr>
					<td>{{=$ctx.doI18N("label.amortization")}}</td>
					<td>
						<select name="amortizationType" id="amortizationType"  title="" style="width: 221px;">
					{{#each amortizationTypeOptions}}
						{{#if $ctx.number($parent.parent.data.amortizationType.id)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=value}}</option>
						{{/if}}
        			{{/each}}
  							</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.interest.method")}}</td>
					<td>
						<select name="interestType" id="interestType"  title="" style="width: 221px;">
						{{#each interestTypeOptions}}
						{{#if $ctx.number($parent.parent.data.interestType.id)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=value}}</option>
						{{/if}}
        				{{/each}}
  						</select>
					</td>
				</tr>

				<tr>
					<td>{{=$ctx.doI18N("label.interestRate.calculatedInPeriod")}}</td>
					<td>
						<select id="interestCalculationPeriodType" name="interestCalculationPeriodType" title="" style="width: 221px;">
					{{#each interestCalculationPeriodTypeOptions}}
                       	{{#if $ctx.number($parent.parent.data.interestCalculationPeriodType.id)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=value}}</option>
						{{/if}}
                    {{/each}}
						</select>
					</td>
				</tr>

				<tr>
					<td>{{=$ctx.doI18N("label.arrears.tolerance")}}</td>
					<td>
						<input id="inArrearsTolerance" name="inArrearsTolerance" title="" type="text" value="{{=$ctx.monetaryValue(currency, inArrearsTolerance)}}" style="width: 215px;" />
					</td>
				</tr>

				<tr>
					<td>{{=$ctx.doI18N("label.repaymentStrategy")}}</td>
					<td>
						<select id="transactionProcessingStrategyId" name="transactionProcessingStrategyId" title="" style="width: 221px;">
							<option value="">{{=$ctx.doI18N("option.repaymentStrategy.first.choice")}}</option>
						{{#each transactionProcessingStrategyOptions}}
						{{#if $ctx.number($parent.parent.data.transactionProcessingStrategyId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=name}}</option>
						{{/if}}
            			{{/each}}
						</select>
					</td>
				</tr>
			</table>
		</div>

<!-- charges -->
{{#if $ctx.showTask("VIEWCHARGES")}}
<div id="chargestab" style="margin-top: 5px;">
	 <select id="chargeOptions">
	    <option value="">{{=$ctx.doI18N("option.charge.first.choice")}}</option>
		{{#each chargeOptions}}
		<option value="{{=$ctx.number(id)}}">{{=name}}</option>
      		{{/each}}
	 </select>
	 <button id="loanproduct-addLoanCharge">{{=$ctx.doI18N("widget.multiselect.button.add")}}</button>
	 <table id="loanchargestable" class="pretty displayschedule">
		<thead>
			<tr>
			<th scope="col">Name</th>
			<th scope="col">Type</th>
			<th scope="col">Amount</th>
			<th scope="col">Collected on</th>
			<th scope="col">Actions</th>
			</tr>
		</thead>
		<tbody>
			{{#each charges}}
			<tr>
				<input id="charges[{{=$itemNumber}}][id]" name="charges[{{=$itemNumber}}][id]" class="id" title="" type="hidden" value="{{=$ctx.number(id)}}" />
				<td>{{=name}}, {{=currency.displaySymbol}}</td>
				<td>
					<select id="charges[{{=$itemNumber}}][chargeCalculationType]" name="charges[{{=$itemNumber}}][chargeCalculationType]" title="" style="width: 180px" disabled="disabled">
					<option value="{{=$ctx.number(chargeCalculationType.id)}}">{{=$ctx.doI18N(chargeCalculationType.code)}}</option>
					</select>
				</td>
				<td><input id="charges[{{=$itemNumber}}][amount]" name="charges[{{=$itemNumber}}][amount]" class="chargeAmount" title="" type="text" value="{{=$ctx.decimal(amount, 2)}}" style="width: 125px;" disabled="disabled"/></td>
				<td>
					<select id="charges[{{=$itemNumber}}][chargeTimeType]" name="charges[{{=$itemNumber}}][chargeTimeType]" title="" style="width: 180px" disabled="disabled">
					<option value="{{=$ctx.number(chargeTimeType.id)}}">{{=$ctx.doI18N(chargeTimeType.code)}}</option>
					</select>
				</td>
				<td><button id="loanproduct-removeLoanCharge{{=$itemNumber}}" class="loanproduct-removeLoanCharge">{{=$ctx.doI18N("widget.multiselect.button.remove")}}</button></td>
			</tr>
			{{/each}}
		</tbody>
	</table>
</div>
{{/if}}
<!-- charges -->

		<!-- accounting -->
{{#if $ctx.showTask("VIEWJOURNALENTRIES")}}
		<div id="accounting" style="margin-top: 5px;">
			<fieldset>
				<legend>{{=$ctx.doI18N("legend.accounting.rules")}}  </legend>
				<table style="width:100%">
				<tr>
				<td align="center">
					{{#if accountingRule.value == "NONE"}}
					<input type="radio" name="accountingRule" value="1" checked="true">{{=$ctx.doI18N("label.none")}}</input>
					{{#else}}
					<input type="radio" name="accountingRule" value="1" >{{=$ctx.doI18N("label.none")}}</input>
					{{/if}}
					{{#if accountingRule.value == "CASH BASED"}}
					<input type="radio" name="accountingRule" value="2" checked="true">{{=$ctx.doI18N("label.cash")}}</input>
					{{#else}}
					<input type="radio" name="accountingRule" value="2">{{=$ctx.doI18N("label.cash")}}</input>
					{{/if}}
					<!-- disabled accrual accounting for release 1.0.0
					<input type="radio" name="accountingRule" value="3" checked="true">{{=$ctx.doI18N("label.accrual")}}</input>
					<input type="radio" name="accountingRule" value="3">{{=$ctx.doI18N("label.accrual")}}</input>
					-->
				</td>
				</tr>
			</table>
		
			<div style="padding-left: 20%" id="accountingPlaceholdersDiv">
			<fieldset style="width: 80%;border-top: 1px dotted">
					<legend>{{=$ctx.doI18N("legend.assets")}}</legend>	
				<table style="width:100%">
						<tr>
							<td title="{{=$ctx.doI18N(\"fundSourceTooltip\")}}">{{=$ctx.doI18N("label.fundSource")}}</td>
							<td>
								<select id="fundSourceAccountId" name="fundSourceAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each accountingMappingOptions.assetAccountOptions}}
									   {{#if $parent.parent.data.accountingMappings}}
    										{{#if $parent.parent.parent.data.accountingMappings.fundSourceAccountId === id)}}
    												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
    										{{#else}}
    												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
    										{{/if}}
    									{{#else}}
                                            <option value="{{=id}}">{{=name}}({{=glCode}})</option>                           
    									{{/if}}
							        {{/each}}
							    </select>  
							</td>
						</tr>
						<tr>
							<td title="{{=$ctx.doI18N(\"loanPortfolioTooltip\")}}">{{=$ctx.doI18N("label.loanPortfolio")}}</td>
							<td>
								<select id="loanPortfolioAccountId" name="loanPortfolioAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each accountingMappingOptions.assetAccountOptions}}
									     {{#if $parent.parent.data.accountingMappings}}
    										{{#if $parent.parent.parent.data.accountingMappings.loanPortfolioAccountId === id)}}
    												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
    										{{#else}}
    												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
    										{{/if}}
    									{{#else}}
                                             <option value="{{=id}}">{{=name}}({{=glCode}})</option>
                                        {{/if}}
							        {{/each}}
							    </select>  
							</td>
						</tr>
						<tr id="interestReceivableRow">
							<td  title="{{=$ctx.doI18N(\"interestReceivableTooltip\")}}">{{=$ctx.doI18N("label.interestReceivable")}}</td>
							<td>
								<select id="receivableInterestAccountId" name="receivableInterestAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each accountingMappingOptions.assetAccountOptions}}
									   {{#if $parent.parent.data.accountingMappings}}
    										{{#if $parent.parent.parent.data.accountingMappings.receivableInterestAccountId === id)}}
    												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
    										{{#else}}
    												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
    										{{/if}}
    									{{#else}}
                                             <option value="{{=id}}">{{=name}}({{=glCode}})</option>
                                        {{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
						<tr id="feeReceivableRow">
							<td  title="{{=$ctx.doI18N(\"feeReceivableTooltip\")}}">{{=$ctx.doI18N("label.feeReceivable")}}</td>
							<td>
								<select id="receivableFeeAccountId" name="receivableFeeAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each accountingMappingOptions.assetAccountOptions}}
									    {{#if $parent.parent.data.accountingMappings}}
										    {{#if $parent.parent.parent.data.accountingMappings.receivableFeeAccountId === id)}}
    												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
    										{{#else}}
    												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
    										{{/if}}
    									{{#else}}
                                             <option value="{{=id}}">{{=name}}({{=glCode}})</option>
                                        {{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
						<tr id="penaltyReceivableRow">
							<td  title="{{=$ctx.doI18N(\"penaltyReceivableTooltip\")}}">{{=$ctx.doI18N("label.penaltyReceivable")}}</td>
							<td>
								<select id="receivablePenaltyAccountId" name="receivablePenaltyAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each accountingMappingOptions.assetAccountOptions}}
									    {{#if $parent.parent.data.accountingMappings}}
    										{{#if $parent.parent.parent.data.accountingMappings.receivablePenaltyAccountId === id)}}
    												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
    										{{#else}}
    												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
    										{{/if}}
    									{{#else}}
                                             <option value="{{=id}}">{{=name}}({{=glCode}})</option>
                                        {{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
				</table>
			</fieldset>
			<fieldset style="width: 80%;border-top: 1px dotted">
					<legend>{{=$ctx.doI18N("legend.income")}}</legend>	
				<table style="width:100%">
						<tr>
							<td title="{{=$ctx.doI18N(\"incomeFromInterestTooltip\")}}">{{=$ctx.doI18N("label.incomeFromInterest")}}</td>
							<td>
								<select id="interestOnLoanAccountId" name="interestOnLoanAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each accountingMappingOptions.incomeAccountOptions}}
									    {{#if $parent.parent.data.accountingMappings}}
    										{{#if $parent.parent.parent.data.accountingMappings.interestOnLoanAccountId === id)}}
    												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
    										{{#else}}
    												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
    										{{/if}}
    									{{#else}}
                                             <option value="{{=id}}">{{=name}}({{=glCode}})</option>
                                        {{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
						<tr>
							<td title="{{=$ctx.doI18N(\"incomeFromFeeTooltip\")}}">{{=$ctx.doI18N("label.incomeFromFees")}}</td>
							<td>
								<select id="incomeFromFeeAccountId" name="incomeFromFeeAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each accountingMappingOptions.incomeAccountOptions}}
									    {{#if $parent.parent.data.accountingMappings}}
    										{{#if $parent.parent.parent.data.accountingMappings.incomeFromFeeAccountId === id)}}
    												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
    										{{#else}}
    												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
    										{{/if}}
    									{{#else}}
                                            <option value="{{=id}}">{{=name}}({{=glCode}})</option>                           
                                        {{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
						<tr>
							<td title="{{=$ctx.doI18N(\"incomeFromPenaltyTooltip\")}}">{{=$ctx.doI18N("label.incomeFromPenalties")}}</td>
							<td>
								<select id="incomeFromPenaltyAccountId" name="incomeFromPenaltyAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each accountingMappingOptions.incomeAccountOptions}}
									    {{#if $parent.parent.data.accountingMappings}}
    										{{#if $parent.parent.parent.data.accountingMappings.incomeFromPenaltyAccountId === id)}}
    												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
    										{{#else}}
    												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
    										{{/if}}
    									{{#else}}
                                            <option value="{{=id}}">{{=name}}({{=glCode}})</option>                           
                                        {{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
				</table>
			</fieldset>
			<fieldset style="width: 80%;border-top: 1px dotted">
					<legend>{{=$ctx.doI18N("legend.expenses")}}</legend>	
				<table style="width:100%">
						<tr>
							<td title="{{=$ctx.doI18N(\"lossesWrittenOffTooltip\")}}">{{=$ctx.doI18N("label.loanLossesWrittenOff")}}</td>
							<td>
								<select id="writeOffAccountId" name="writeOffAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each accountingMappingOptions.expenseAccountOptions}}
									    {{#if $parent.parent.data.accountingMappings}}
    										{{#if $parent.parent.parent.data.accountingMappings.writeOffAccountId === id)}}
    												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
    										{{#else}}
    												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
    										{{/if}}
    									{{#else}}
                                            <option value="{{=id}}">{{=name}}({{=glCode}})</option>                           
                                        {{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
				</table>
			</fieldset>
		</div>
	</fieldset>
		</div>
{{#else}}
	<input type="hidden" name="accountingRule" value="1" /> 
{{/if}}
		<!-- end of accounting -->
	</div>
</form>
</script>

	<script id="loanProductAddChargeRowTemplate" type="text/x-jquery-tmpl">
<tr>
	<input id="charges[{{=index}}][id]" name="charges[{{=index}}][id]" class="id" title="" type="hidden" value="{{=$ctx.number(id)}}" />
	<td>{{=name}}, {{=currency.displaySymbol}}</td>
	<td>
	<select id="charges[{{=index}}][chargeCalculationType]" name="charges[{{=index}}][chargeCalculationType]" title="" style="width: 180px" disabled="disabled">
	{{#each chargeCalculationTypeOptions}}
		{{#if $ctx.number($parent.parent.data.chargeCalculationType.id)===$ctx.number(id)}}
		<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
		{{#else}}
		<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
		{{/if}}
	{{/each}}
	</select>
	</td>
	<td><input id="charges[{{=index}}][amount]" name="charges[{{=index}}][amount]" class="chargeAmount" title="" type="text" value="{{=$ctx.decimal(amount, 2)}}" style="width: 125px;" disabled="disabled"/></td>
	<td>
		<select id="charges[{{=index}}][chargeTimeType]" name="charges[{{=index}}][chargeTimeType]" title="" style="width: 180px" disabled="disabled">
		{{#each chargeTimeTypeOptions}}
			{{#if $ctx.number($parent.parent.data.chargeTimeType.id)===$ctx.number(id)}}
				<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
			{{#else}}
				<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
			{{/if}}
		{{/each}}
		</select>
	</td>
	<td><button id="loanproduct-removeLoanCharge{{=index}}" class="loanproduct-removeLoanCharge">{{=$ctx.doI18N("widget.multiselect.button.remove")}}</button></td>
</tr>
</script>
	<!-- end of new loan product templates -->

	<!-- new loan application templates -->
	<script id="loanApplicationSelectProductDialogTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
    
	{{#if clientId}}
	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	{{/if}}
	{{#if group}}
	<input type="hidden" id="groupId" name="groupId" value="{{=group.id}}" />
	{{/if}}
	<table>
			<tr>
				<td valign="top">
				{{#if clientName}}{{=$ctx.doI18N("label.applicant")}}<br><br>{{/if}}
				{{#if group}}{{=$ctx.doI18N("label.group")}}{{/if}}
				</td>
				<td valign="top">
				{{#if clientName}}
				<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" style="width: 300px;" /><br><br>
				{{/if}}
				{{#if group}}
				<input id="groupname" name="groupName" title="" type="text" value="{{=group.name}}" disabled="disabled" style="width: 300px;" />
				{{/if}}
				</td>

				<td valign="top">&nbsp;</td>

				<td valign="top">{{=$ctx.doI18N("label.product")}}</td>
				<td valign="top">
					<select name="productId" id="productId" style="width: 306px;">
						<option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
				{{#each productOptions}}
					{{#if $ctx.number($parent.parent.data.loanProductId)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
					{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=name}}</option>
					{{/if}}
	    		{{/each}}
					</select>
				</td>
			</tr>
	</table>
</form>	
</script>

	<script id="loanApplicationDialogTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
	<div id="formerrors"></div>

	<!-- template only setup for individual client lending -->
	{{#if clientId}}
	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	{{/if}}
	{{#if group}}
	<input type="hidden" id="groupId" name="groupId" value="{{=group.id}}" />
	{{/if}}
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
    <input type="hidden" id="loanType" name="loanType" value="{{=loanType}}" />
	<table>
			<tr>
				<td class='applicant' valign="top">
				{{#if clientName}}
                    {{=$ctx.doI18N("label.applicant")}}<br><br>
                {{/if}}
                {{#if group}}
                    {{=$ctx.doI18N("label.group")}}
                {{/if}}    
				</td>
				<td class='applicant' valign="top">
				{{#if clientName}}
				<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" style="width: 300px;" /><br><br>
				{{/if}}
				{{#if group}}
				<input id="groupname" name="groupName" title="" type="text" value="{{=group.name}}" disabled="disabled" style="width: 300px;" />
				{{/if}}
				</td>

				<td valign="top">&nbsp;</td>

				<td valign="top">{{=$ctx.doI18N("label.product")}}</td>
				<td valign="top">
					<select name="productId" id="productId" style="width: 306px;">
				{{#each productOptions}}
					{{#if $ctx.number($parent.parent.data.loanProductId)===$ctx.number(id)}}
					<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
					{{#else}}
					<option value="{{=$ctx.number(id)}}">{{=name}}</option>
					{{/if}}
	    		{{/each}}
					</select>
				</td>
			</tr>

			<tr>
				<td valign="top">{{=$ctx.doI18N("label.loanOfficer")}}</td>
				<td valign="top">
					<select name="loanOfficerId" id="loanOfficerId">
						<option value="">{{=$ctx.doI18N("option.loanOfficer.first.choice")}}</option>
					{{#each loanOfficerOptions}}
						{{#if $ctx.number($parent.parent.data.loanOfficerId)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
						{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
						{{/if}}
     				{{/each}}
					</select>
				</td>

				<td valign="top">&nbsp;</td>

				<td valign="top">{{=$ctx.doI18N("label.submitted.on")}}</td>
				<td valign="top">
					<input id="submittedOnDate" name="submittedOnDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(timeline.submittedOnDate)}}" />
				</td>
			</tr>

			{{#if $ctx.arrayIsNotEmpty(loanPurposeOptions)}}
			<tr>
				<td valign="top">{{=$ctx.doI18N("label.loanPurpose")}}</td>
				<td valign="top" colspan="4">
					<select name="loanPurposeId" id="loanPurposeId">
						<option value="">{{=$ctx.doI18N("option.loanPurpose.first.choice")}}</option>
					{{#each loanPurposeOptions}}
						{{#if $ctx.number($parent.parent.data.loanPurposeId)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(name)}}</option>
						{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(name)}}</option>
						{{/if}}
     				{{/each}}
					</select>
				</td>
			</tr>
			{{/if}}
	</table>

	<div id="loanapplicationtabs{{=id}}" class="loanapplicationtabs">
	    <ul>
		    <li><a href="#loanterms" title="loanterms">{{=$ctx.doI18N("tab.terms")}}</a></li>
			<li><a href="#loansettings" title="loansettings">{{=$ctx.doI18N("tab.settings")}}</a></li>
			{{#if $ctx.showTask("VIEWCHARGES")}}
				{{#if $ctx.arrayIsNotEmpty(chargeOptions)}}
				<li><a href="#loancharges" title="charges">{{=$ctx.doI18N("tab.charges")}}</a></li>
				{{/if}}
			{{/if}}
			{{#if $ctx.arrayIsNotEmpty(loanCollateralOptions)}}
			<li><a href="#collateral" title="collateral">{{=$ctx.doI18N("tab.collaterals")}}</a></li>
			{{/if}}
			<li><a href="#schedule" title="schedule">{{=$ctx.doI18N("tab.previewRepaymentSchedule")}}</a></li>
	    </ul>


		<div id="loanterms" style="margin-top: 5px;">
		    <div id="meetingCalendarPlaceholder">
		        <!-- Meeting calendars placeholder for JLG, JLG bulk and group loans -->
		    </div>
			<table>
				<tr>
					<td>{{=$ctx.doI18N("label.principal")}}</td>
					<td>
						<input id="principal" name="principal" title="" type="text" value="{{=$ctx.monetaryValue(currency, principal)}}" style="width: 125px;" />
						<input id="principalCurrencyCode" name="principalCurrencyCode" title="" type="text" value="{{=currency.displaySymbol}}" style="width: 40px;" disabled="disabled" />
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.loanTerm")}}</td>
					<td>
						<input id="loanTermFrequency" name="loanTermFrequency" title="" type="text" value="{{=$ctx.number(termFrequency)}}" style="width: 50px;" />
								
						<select name="loanTermFrequencyType" id="loanTermFrequencyType"  title="" style="width: 121px;">
						{{#each termFrequencyTypeOptions}}
							{{#if $ctx.number($parent.parent.data.termPeriodFrequencyType.id)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
							{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=value}}</option>
							{{/if}}
        				{{/each}}
  						</select>
					</td>
				</tr>

				<tr>
					<td>{{=$ctx.doI18N("label.numberof.repayments")}}</td>
					<td>
					<input id="numberOfRepayments" name="numberOfRepayments" title="" type="text" value="{{=$ctx.number(numberOfRepayments)}}" style="width: 50px;" />
					</td>
				</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.repaidevery")}}</td>
							<td>
								<input id="repaymentEvery" name="repaymentEvery" title="" type="text" value="{{=$ctx.number(repaymentEvery)}}" style="width: 50px;" />
								
								<select name="repaymentFrequencyType" id="repaymentFrequencyType"  title="" style="width: 121px;">
								{{#each repaymentFrequencyTypeOptions}}
								{{#if $ctx.number($parent.parent.data.repaymentFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.nominal.interestrate")}}</td>
							<td>
								<input id="interestRatePerPeriod" name="interestRatePerPeriod" title="" type="text" value="{{=$ctx.decimal(interestRatePerPeriod, 4)}}" style="width: 50px;" />
								
								<select name="interestRateFrequencyType" id="interestRateFrequencyType"  title="" style="width: 121px;" disabled="true">
								{{#each interestRateFrequencyTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestRateFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>

				<tr>
					<td>{{=$ctx.doI18N("label.expectedDisbursementOn")}}</td>
					<td>
					<input id="expectedDisbursementDate" name="expectedDisbursementDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(timeline.expectedDisbursementDate)}}" style="width:172px;"/>
					</td>
				</tr>
			</table>
		</div>

<!-- settings -->
		<div id="loansettings" style="margin-top: 5px;">
			<table>
				<tr>
					<td>{{=$ctx.doI18N("label.amortization")}}</td>
					<td>
						<select name="amortizationType" id="amortizationType"  title="" style="width: 221px;">
					{{#each amortizationTypeOptions}}
						{{#if $ctx.number($parent.parent.data.amortizationType.id)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=value}}</option>
						{{/if}}
        			{{/each}}
  							</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.interest.method")}}</td>
					<td>
						<select name="interestType" id="interestType"  title="" style="width: 221px;">
						{{#each interestTypeOptions}}
						{{#if $ctx.number($parent.parent.data.interestType.id)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=value}}</option>
						{{/if}}
        				{{/each}}
  						</select>
					</td>
				</tr>

				<tr>
					<td>{{=$ctx.doI18N("label.interestRate.calculatedInPeriod")}}</td>
					<td>
						<select id="interestCalculationPeriodType" name="interestCalculationPeriodType" title="" style="width: 221px;">
					{{#each interestCalculationPeriodTypeOptions}}
                       	{{#if $ctx.number($parent.parent.data.interestCalculationPeriodType.id)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=value}}</option>
						{{/if}}
                    {{/each}}
						</select>
					</td>
				</tr>

				<tr>
					<td>{{=$ctx.doI18N("label.arrears.tolerance")}}</td>
					<td>
						<input id="inArrearsTolerance" name="inArrearsTolerance" title="" type="text" value="{{=$ctx.monetaryValue(currency, inArrearsTolerance)}}" style="width: 125px;" />
						<input id="inArrearsCurrencyCode" name="inArrearsCurrencyCode" title="" type="text" value="{{=currency.displaySymbol}}" style="width: 40px;" disabled="disabled" />
					</td>
				</tr>

				<tr>
					<td>{{=$ctx.doI18N("label.repaymentStrategy")}}</td>
					<td>
						<select id="transactionProcessingStrategyId" name="transactionProcessingStrategyId" title="" style="width: 221px;">
							<option value="">{{=$ctx.doI18N("option.repaymentStrategy.first.choice")}}</option>
						{{#each transactionProcessingStrategyOptions}}
						{{#if $ctx.number($parent.parent.data.transactionProcessingStrategyId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=name}}</option>
						{{/if}}
            			{{/each}}
						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.firstRepaymentOn")}}</td>
					<td>
					<input id="repaymentsStartingFromDate" name="repaymentsStartingFromDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(repaymentsStartingFromDate)}}" style="width:215px;"/>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.interestChargedFrom")}}</td>
					<td>
					<input id="interestChargedFromDate" name="interestChargedFromDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(interestChargedFromDate)}}" style="width:215px;"/>
					</td>
				</tr>
			</table>
		</div>
<!-- end of settings -->


		{{#if $ctx.showTask("VIEWCHARGES")}}
			{{#if $ctx.arrayIsNotEmpty(chargeOptions)}}
		<div id="loancharges" style="margin-top: 5px;">
			 <select id="chargeOptions">
			    <option value="-1">{{=$ctx.doI18N("option.charge.first.choice")}}</option>
				{{#each chargeOptions}}
				<option value="{{=$ctx.number(id)}}">{{=name}}</option>
        		{{/each}}
			 </select>
			 <button id="loanapp-addLoanCharge">{{=$ctx.doI18N("widget.multiselect.button.add")}}</button>
			 <table id="loanchargestable" class="pretty displayschedule">
				<thead>
					<tr>
					<th scope="col">Name</th>
					<th scope="col">Type</th>
					<th scope="col">Amount</th>
					<th scope="col">Collected on</th>
					<th scope="col">Date</th>
					<th scope="col">Actions</th>
					</tr>
				</thead>
				<tbody>
					{{#each charges}}
					<tr>
						<input id="charges[{{=$itemNumber}}][id]" name="charges[{{=$itemNumber}}][id]" class="id" title="" type="hidden" value="{{=id}}" />
						<input id="charges[{{=$itemNumber}}][chargeId]" name="charges[{{=$itemNumber}}][chargeId]" class="chargeId" title="" type="hidden" value="{{=$ctx.number(chargeId)}}" />
						<td>{{=name}}, {{=currency.displaySymbol}}</td>
						<td>
							<select id="charges[{{=$itemNumber}}][chargeCalculationType]" name="charges[{{=$itemNumber}}][chargeCalculationType]" title="" style="width: 180px" disabled="disabled">
								<option value="{{=$ctx.number(chargeCalculationType.id)}}" selected="selected">{{=$ctx.doI18N(chargeCalculationType.code)}}</option>
							</select>
						</td>
						<td>
					{{#if $ctx.number(chargeCalculationType.id)===$ctx.number(2)}}
						<input id="charges[{{=$itemNumber}}][amount]" name="charges[{{=$itemNumber}}][amount]" class="chargeAmount" title="" type="text" value="{{=$ctx.decimal(percentage, 6)}}" style="width: 125px;"/>
					{{#else}}
						<input id="charges[{{=$itemNumber}}][amount]" name="charges[{{=$itemNumber}}][amount]" class="chargeAmount" title="" type="text" value="{{=$ctx.monetaryValue(currency, amount)}}" style="width: 125px;"/>
					{{/if}}
						</td>
						<td>
							<select id="charges[{{=$itemNumber}}][chargeTimeType]" name="charges[{{=$itemNumber}}][chargeTimeType]" title="" style="width: 180px" disabled="disabled">
								<option value="{{=$ctx.number(chargeTimeType.id)}}" selected="selected">{{=$ctx.doI18N(chargeTimeType.code)}}</option>
							</select>
						</td>
						<td>
							<input id="charges[{{=$itemNumber}}][dueDate]" 
									name="charges[{{=$itemNumber}}][dueDate]" 
									class="dueDate datepickerfieldnoconstraint" 
									title="" 
									value="{{=$ctx.globalDate(dueDate)}}" />
						</td>
						<td><button id="loanapp-removeLoanCharge{{=$itemNumber}}" class="loanapp-removeLoanCharge">{{=$ctx.doI18N("widget.multiselect.button.remove")}}</button></td>
					</tr>
					{{/each}}
				</tbody>
			</table>
		</div>
			{{/if}}
		{{/if}}
		{{#if $ctx.arrayIsNotEmpty(loanCollateralOptions)}}
		<div id="collateral" style="margin-top: 5px;">
			 <button id="loanapp-addCollateralType">{{=$ctx.doI18N("widget.multiselect.button.add")}}</button>
			 <table id="loancollateraltable" class="pretty displayschedule">
				<thead>
					<tr>
					<th scope="col">Type</th>
					<th scope="col" colspan="3">Description</th>
					<th scope="col">Value</th>
					<th scope="col" style="width:100px;">Actions</th>
					</tr>
				</thead>
				<tbody>
				{{#each collateral}}
					<tr>
						<td style="width:300px;">
							<input id="collateral[{{=$itemNumber}}][id]" name="collateral[{{=$itemNumber}}][id]" class="id" title="" type="hidden" value="{{=id}}" />
							<select id="collateral[{{=$itemNumber}}][type]" name="collateral[{{=$itemNumber}}][type]" title="" style="border: 0 none;width: 295px;">
							{{#each $parent.parent.parent.data.loanCollateralOptions}}
								{{#if $ctx.number($parent.parent.data.type.id)===$ctx.number(id)}}
								<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(name)}}</option>
								{{#else}}
								<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(name)}}</option>
								{{/if}}
							{{/each}}
							</select>
						</td>
						<td colspan="3">
							<textarea id="collateral[{{=$itemNumber}}][description]" name="collateral[{{=$itemNumber}}][description]" rows="2" cols="45">{{=description}}</textarea>
						</td>
						<td>
                            <input type="text" id="collateral[{{=$itemNumber}}][value]" name="collateral[{{=$itemNumber}}][value]"  value="{{=value}}"/>
                        </td>
						<td style="width:100px;">
							<button id="loanapp-removeCollateralType{{=$itemNumber}}" class="loanapp-removeCollateralType">{{=$ctx.doI18N("widget.multiselect.button.remove")}}</button>
						</td>
					</tr>
				{{/each}}
				</tbody>
			</table>
		</div>
		{{/if}}
		<div id="schedule" style="margin-top: 5px;">
			<div id="previewloanschedule"></div>
		</div>
	</div>
</form>
</script>

	<script id="loanApplicationAddCollateralRowTemplate"
		type="text/x-jquery-tmpl">
<tr>
	<td style="width:300px;">
		<input id="collateral[{{=index}}][id]" name="collateral[{{=index}}][id]" class="id" title="" type="hidden" value="" />
		<select id="collateral[{{=index}}][type]" name="collateral[{{=index}}][type]" title="" style="border: 0 none;width: 295px;">
		{{#each loanCollateralOptions}}
			<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(name)}}</option>
		{{/each}}
		</select>
	</td>
	<td colspan="3">
		<textarea id="collateral[{{=index}}][description]" name="collateral[{{=index}}][description]" rows="2" cols="45">&nbsp;</textarea>
	</td>
	<td>
        <input type="text" id="collateral[{{=index}}][value]" name="collateral[{{=index}}][value]"  value="{{=value}}"/>
    </td>
	<td style="width:100px;"><button id="loanapp-removeCollateralType{{=index}}" class="loanapp-removeCollateralType">{{=$ctx.doI18N("widget.multiselect.button.remove")}}</button></td>
</tr>
</script>

	<script id="loanApplicationAddChargeRowTemplate"
		type="text/x-jquery-tmpl">
<tr>
	<input id="charges[{{=index}}][chargeId]" name="charges[{{=index}}][chargeId]" class="chargeId" title="" type="hidden" value="{{=id}}" />
	<td>{{=name}}, {{=currency.displaySymbol}}</td>
	<td>
	<select id="charges[{{=index}}][chargeCalculationType]" name="charges[{{=index}}][chargeCalculationType]" title="" style="width: 180px" disabled="disabled">
	{{#each chargeCalculationTypeOptions}}
		{{#if $ctx.number($parent.parent.data.chargeCalculationType.id)===$ctx.number(id)}}
		<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
		{{#else}}
		<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
		{{/if}}
	{{/each}}
	</select>
	</td>
	<td><input id="charges[{{=index}}][amount]" name="charges[{{=index}}][amount]" class="chargeAmount" title="" type="text" value="{{=$ctx.decimal(amount, 2)}}" style="width: 125px;"/></td>
	<td>
		<select id="charges[{{=index}}][chargeTimeType]" name="charges[{{=index}}][chargeTimeType]" title="" style="width: 180px" disabled="disabled">
		{{#each chargeTimeTypeOptions}}
			{{#if $ctx.number($parent.parent.data.chargeTimeType.id)===$ctx.number(id)}}
				<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
			{{#else}}
				<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
			{{/if}}
		{{/each}}
		</select>
	</td>
	<td>
		<input id="charges[{{=index}}][dueDate]" name="charges[{{=index}}][dueDate]" class="dueDate datepickerfieldnoconstraint" title="" value="" />
	</td>
	<td><button id="loanapp-removeLoanCharge{{=index}}" class="loanapp-removeLoanCharge">{{=$ctx.doI18N("widget.multiselect.button.remove")}}</button></td>
</tr>
</script>
	<!-- end of new loan application templates -->

	<!-- generic or common templates -->
	<script id="activationTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<table cellspacing="4px" cellpadding="8px">
		<tr>
			<td>
				<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
				<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
				<label for="activationDate">{{=$ctx.doI18N("label.activationDate")}}</label>
				<input id="activationDate" name="activationDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(activationDate)}}"/>
			</td>
		</tr>
	</table>
</form>
</script>
	<!-- end of generic or common templates -->

	<!-- Client Screens -->
	<script id="clientFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
  <table>
        <tr>
           <td class="rightVline alignCenter">
                    <p style="text-align: center"><b>{{=$ctx.doI18N("Client Details")}}</b></p>
                    <table>
                        <tr>
                 <tr>
    
                   <td align="right">
                     <input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	                 <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
                 	<label for="officeId">{{=$ctx.doI18N("label.office")}}</label>
                    </td>
                    <td>
	                  <select id="officeId" name="officeId" title="" style="width: 178px; >
		               <option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
		                {{#each officeOptions}}
			                  {{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
				              <option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
			                    {{#else}}
				                <option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
			                {{/if}}
                    {{/each}}
	                 </select> 
                   </td>
                  </tr>
               <tr>
                 <td align="right">
                <label>{{=$ctx.doI18N("label.clienttype")}}</label>
                 </td>
                   <td>
                    <input type="radio" name="clientType" value="1" checked="true">{{=$ctx.doI18N("label.individual")}}</input>
                    <input type="radio" name="clientType" value="2">{{=$ctx.doI18N("label.corporate")}}</input>
                </td>
            </tr>
           <tr>
               <td align="right">
				<label for="clientCategory">{{=$ctx.doI18N("label.Categorytype")}}</label>
                 </td>
                 <td>
				<select id="clientCategory" name="clientCategory" title="" style="width: 178px;>
		          <option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
		            {{#each clientCategoryDatas}}
			           {{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
				            <option value="{{=$ctx.number(id)}}" selected="selected">{{=categoryType}}</option>
			           {{#else}}
				            <option value="{{=$ctx.number(id)}}">{{=categoryType}}</option>
			           {{/if}}
                    {{/each}}
	            </select>
			</td>
            </tr>
              <tr>
           <tr id="individualRow">
			<td align="right">
				<label for="firstname">{{=$ctx.doI18N("label.firstname")}}</label>
				</td>
               <td>
              <input id="firstname" name="firstname" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=firstname}}" size="22" />
			</td>
             </tr>
            <tr>
			<td align="right">
				<label for="middlename">{{=$ctx.doI18N("label.middlename")}}</label>
                 </td>
                 <td>
				<input id="middlename" name="middlename" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=middlename}}" size="22" />
			</td>
           </tr>
			<td align="right">
				<label for="lastname">{{=$ctx.doI18N("label.lastname")}}</label>
               </td>
                <td>
				<input id="lastname" name="lastname" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=lastname}}" size="22" />
			</td>
		<tr>
		<tr id="businessRow" hidden="true">
			<td align="right">
				<label for="fullname">{{=$ctx.doI18N("label.fullname")}}</label>
            </td>
           <td>
				<input id="fullname" name="fullname" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=fullname}}" style="width:100%"/>
			</td>
		</tr>
            <tr>
			<td align="right">
				<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
             </td>
              <td>
				<input id="externalId" name="externalId" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=externalId}}" size="22"/>
			</td>
           </tr>
             
			   <td align="right">
			       <label for="phone">{{=$ctx.doI18N("label.mobile")}}</label>
              </td>
                <td>
		           <input id="phone" name="phone" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=phone}}" size="22" />
		  	</td>
         </tr>
             <tr>
			<td align="right">
			<label for="email">{{=$ctx.doI18N("label.email")}}</label>    
           </td><td>
		   <input id="email" name="email" title="" type="text" class="text ui-widget-content ui-corner-all" value="{{=email}}" size="22" /> 
			</td>
		</tr>
        </table>
        </td>
             <div style="position:fixed;right:300px;"> 
             <td class="alignCenter">
                <p style="text-align: center"><b>{{=$ctx.doI18N("Address Details")}}</b></p>
                   <table>
                       <tr>
                         <td align="right">
                      		<label for="priority">{{=$ctx.doI18N("form.label.Address1")}}</label>
                         </td>
                         <td>
                            <input id="addressNo" name="addressNo" class="text ui-widget-content ui-corner-all" title="" type="text" style="height:20px;width:256px;" value="{{=addressNo}}" size="33" />
                        </td>
                    </tr>
                 	   <tr>
		                 <td align="right">
                                <label for="street">{{=$ctx.doI18N("form.label.Address2")}}</label>
                         </td>
                         <td>
                                    <input id="street" name="street" class="text ui-widget-content ui-corner-all" title="" type="text" style="height:20px;width:256px;" value="{{=street}}" size="33" />
                         </td>
                     </tr>
                     <tr>
                      <td align="right">
                          <label for="city">{{=$ctx.doI18N("form.label.city")}}</label>
                      </td>
                      <td>
                          <input id="city" name="city" title="" class="text ui-widget-content ui-corner-all" type="text" onChange="setCountryandState()" value="{{=city}}" />
    				 </td>
                 </tr>    	
			     <tr>
                   <td align="right">
                         <label for="state">{{=$ctx.doI18N("form.label.state")}}</label>
                 </td>
                 <td>
                       <input id="state" name="state" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=state}}" />
                </td>
			</tr>
			 <tr>
                <td align="right">
                       <label for="country">{{=$ctx.doI18N("form.label.country")}}</label>
                </td>
                <td>
                     <input id="country" name="country" class="text ui-widget-content ui-corner-all" title="" type="text" value="{{=country}}" />
              </td>
            </tr>
			 <tr>
                <td align="right">
                       <label for="zipCode">{{=$ctx.doI18N("form.label.zip")}}</label>
                </td>
               <td>
			       <input id="zipCode" name="zipCode" title="" class="text ui-widget-content ui-corner-all" type="text" style="height:20px;width:256px;" value="{{=zip}}" size="33" />
              </td>
           </tr>
            <tr>
              <td align="right">
                       
                </td>
               <td>
			       
              </td>
           </tr>
            <tr>
<td align="right">
                       
                </td>
               <td>
			      
              </td>
</div>
</tr>
 
  </table>
</form>
</script>

	<script id="editClientFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<label for="office">{{=$ctx.doI18N("label.office")}}</label>
	<select id="officeId" name="officeId" title="" disabled=disabled>
		<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
		{{#each officeOptions}}
			{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
				<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
			{{#else}}
				<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
			{{/if}}
        {{/each}}
	</select>

	<table width='100%'>
        <tr>
            <td colspan='3'>
                <label>{{=$ctx.doI18N("label.clienttype")}}</label>
                {{#if fullname}}
                    <input type="radio" name="clientType" value="1">{{=$ctx.doI18N("label.individual")}}</input>
                    <input type="radio" name="clientType" value="2" checked="true">{{=$ctx.doI18N("label.corporate")}}</input>
                {{#else}}
                    <input type="radio" name="clientType" value="1" checked="true">{{=$ctx.doI18N("label.individual")}}</input>
                    <input type="radio" name="clientType" value="2">{{=$ctx.doI18N("label.corporate")}}</input>
                {{/if}}

            </td>
        </tr>
		<tr id="individualRow">
			<td>
				<label for="firstname">{{=$ctx.doI18N("label.firstname")}}</label>
				<input id="firstname" name="firstname" title="" type="text" value="{{=firstname}}"/>
			</td>
			<td>
				<label for="middlename">{{=$ctx.doI18N("label.middlename")}}</label>
				<input id="middlename" name="middlename" title="" type="text" value="{{=middlename}}"/>
			</td>
			<td>
				<label for="lastname">{{=$ctx.doI18N("label.lastname")}}</label>
				<input id="lastname" name="lastname" title="" type="text" value="{{=lastname}}"/>
			</td>
		<tr>
		<tr id="businessRow">
			<td colspan="2">
				<label for="fullname">{{=$ctx.doI18N("label.fullname")}}</label>
				<input id="fullname" name="fullname" title="" type="text" value="{{=fullname}}" style="width:100%"/>
			</td>
		</tr>
		<tr>
			<td colspan="1">
				<label for="accountNo">{{=$ctx.doI18N("label.accountNo")}}</label>
				<input id="accountNo" name="accountNo" title="" type="text" value="{{=accountNo}}"/>
			</td>
             <td>
				<label for="clientCategory">{{=$ctx.doI18N("label.Categorytype")}}</label>
				<select id="clientCategory" name="clientCategory" title="">
		            <option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
		            {{#each clientCategoryDatas}}
			        {{#if $ctx.number($parent.parent.data.categoryType)===$ctx.number(id)}}
				    <option value="{{=$ctx.number(id)}}" selected="selected">{{=categoryType}}</option>
			         {{#else}}
				    <option value="{{=$ctx.number(id)}}">{{=categoryType}}</option>
			   {{/if}}
             {{/each}}
	        </select>
		</td>
		</tr>
		<tr>
			<td colspan="2">
				<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
				<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}"/>
			</td>
		</tr>

		{{#if active}}
		<tr>
			<td>
			<label for="activeCheckbox">{{=$ctx.doI18N("label.active")}}</label>
			<input type="hidden" id="active" name="active" value="true" />
			<input id="activeCheckbox" type="checkbox" name="active" value="true" checked disabled=disabled/>
			</td>
			<td>
			<label for="activationDate">{{=$ctx.doI18N("label.activationDate")}}</label>
			<input id="activationDate" name="activationDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(activationDate)}}" />
			</td>
		</tr>
		{{#else}}
		<input type="hidden" id="active" name="active" value="false" />
		{{/if}}

<tr>
			<td>
			<label for="phone">{{=$ctx.doI18N("label.mobile")}}</label> 
			<input id="phone" name="phone" title="" type="text" value="{{=phone}}" size="20" />
			</td>
			<td>
			<label for="email">{{=$ctx.doI18N("label.email")}}</label>    
			<input id="email" name="email" title="" type="text" value="{{=email}}" size="25" /> 
			</td>
		</tr>

	</table>
</form>
</script>

	<script id="clientToolbarTemplate" type="text/x-jquery-tmpl">
<div style="padding-bottom: 4px;">
<table style="width:100%">
<tr>
	<td valign="top" align="left">
		<b><span id="customerName">{{=displayName}}</span></b>
		<br/>
		<span id="customerOfficeName">{{=officeName}}</span>
	</td>
  <td align="right"><b>Balance:<span id="customerBalance"></span></td>
	<td valign="top" style="text-align: right">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
    
		{{#if activationDate}}
		
		{{#else}}
			{{#if $ctx.showTask("ActivateClient")}}
				<button id="activateclientbtn" class="activateclient">Activate</button>
			{{/if}}
			
			{{#if $ctx.showTask("DeleteClient")}}
				<button id="deleteclientbtn" class="deleteclientbtn">Delete</button>
			{{/if}}
		{{/if}}
             	<button id="neworderbtn{{=id}}" class="newordertbtn">New Order</button>
                    <button id="newpaymentbtn{{=id}}" class="newpaymentbtn">Payments</button>
                       <button id="addadjustments{{=id}}" class="addadjustments">Adjustments</button>
					 <button id="invoicebtn{{=id}}"  class="invoicebtn">Generate Invoice</button>
                     <button id="genpdfbtn{{=id}}"  class="genpdfbtn">Statement</button>
                    <button id="regticketbtn{{=id}}"  class="regticketbtn">New Ticket </button>
			{{#if $ctx.showTask("EditClient")}}

				<button id="editclientbtn" class="editclientbtn">Edit</button>
			{{/if}}

			{{#if $ctx.showTask("AddClientNote")}}
				<button id="addnotebtn" class="addnotebtn">Add note</button>
			{{/if}}

	
			</span>
		</td>
	<tr>
</table>
</div>
</script>
	<script id="clientBalanceTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
<div id="formerrors"></div>
Balance={{balanceAmount}}
</form>
</script>

	<script id="clientDataTabTemplate" type="text/x-jquery-tmpl">
<div id="clienttabcontent">
	<table>
		<tr>
			<!-- left pane -->
			<td>
				<!-- inside table -->
					<table>
						<tr>
							<!-- cell 1 -->
							<td valign="top">
								<form id="clientImageForm">
									<img id="customerImage" src="resources/img/client-image-placeholder.png" width="100" height="100"/>
									<br/>
									<span id="modifyImageToolbar" class="ui-widget-header ui-corner-all">
										<button id="captureClientImage"></button>
										<button id="editClientImage"></button>
										<button id="deleteClientImage"></button>
									</span>
								</form>
							</td>
							
							<td valign="top">
								<div id="clienttableftpane" style="float:left; max-width: 700px; width: 700px;">
									<div class="row">
										<span class="longrowlabel">{{=$ctx.doI18N("label.name")}}</span>
										<span class="rowvalue">{{=displayName}}</span>
									</div>
									<div class="row">
										<span class="longrowlabel">{{=$ctx.doI18N("label.accountNo")}}</span>
										<span class="rowvalue">{{=accountNo}}</span>
									</div>
									{{#if externalId}}
									<div class="row">
										<span class="longrowlabel">{{=$ctx.doI18N("label.externalId")}}</span>
										<span class="rowvalue">{{=externalId}}</span>
									</div>
									{{/if}}
									<div class="row">
										<span class="longrowlabel">{{=$ctx.doI18N("label.status")}}</span>
										<span class="rowvalue">{{=$ctx.doI18N(status.code)}}</span>
									</div>
									{{#if activationDate}}
									<div class="row">
										<span class="longrowlabel">{{=$ctx.doI18N("label.activationDate")}}</span>
										<span class="rowvalue">{{=$ctx.globalDate(activationDate)}}</span>
									</div>
									{{/if}}
							
									<div class="row">
										<span class="longrowlabel">{{=$ctx.doI18N("label.office")}}</span>
										<span class="rowvalue">{{=officeName}}</span>
									</div>
                                      
									{{#if groups}}
									<div class="row">
										<span class="longrowlabel">{{=$ctx.doI18N("label.memberOf")}}</span>
										<span class="rowvalue">
										{{#each groups}}<a href="#" onclick="showGroup('{{=id}}'); return false;">{{=name}}</a>,&nbsp;{{/each}}
										</span>
									</div>
									{{/if}}
								</div>
							</td>
                             
						</tr>
					 <div id="phone"style="position:absolute; top:85px; left:550px;">
                             <label for="phone">Phone:{{=phone}}</label>
                               
                             <label for="phone">Email:{{=email}}</label>
                         </div>
						
					</table>
				<!-- end of inside table -->
			</td>
                   
			<!-- Client address -->
			<td valign="top" style="max-width:400px; width:400px;""float:left;">
                 
                 <b>Address Details:</b><br>
                   <span id="addressNo"></span><span id="street"></span><br>		
                   <span id="city"></span><span id="state"></span><br>	
                   <span id="country"></span><span id="zip"></span><br>	
                   <span id="addbtn"></span> <span id="btn"><br/><a id="newaddbtn" class="newaddbtn" href=# style=margin-right: 5px; onClick="addAddress({{=id}});return false;">Add Address</a></span>
			</td>
                   
                <td valign="top" style="max-width:400px; width:400px;">
				<!-- placeholder for notes content -->
				<div id="clienttabrightpane"></div>
			</td>
		</tr>
	</table>
</div>
<div style="clear: both;"></div>
</script>

	<script id="clientImageUploadFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.client.browse.image")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>

	<script id="clientImageWebcamFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table style="width:100%">
		<tr>
			<td><div id="webcam" style="width:320px;height:240px"></div></td>
			<td><button id="captureImage">{{=$ctx.doI18N("button.capture.image")}}</button></td>
			<td><canvas id="imageCanvas" height="240" width="320"></canvas></td>
		</tr>
	</table>
 </form>
</script>

	<script id="clientAccountSummariesTemplate" type="text/x-jquery-tmpl">

{{#if $ctx.numberGreaterThanZero(pendingApprovalLoanCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.pending.approval")}} ({{=$ctx.number(pendingApprovalLoanCount)}}):</span>
	<span class="rowvalue">
	{{#each pendingApprovalLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}', '{{=accountNo}}'); return false;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(awaitingDisbursalLoanCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.pending.disbursal")}} ({{=$ctx.number(awaitingDisbursalLoanCount)}}):</span>
	<span class="rowvalue">
	{{#each awaitingDisbursalLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}', '{{=accountNo}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(activeLoanCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.active")}} ({{=$ctx.number(activeLoanCount)}}):</span>
	<span class="rowvalue">
	{{#each openLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}', '{{=accountNo}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(closedLoanCount)}}
<div class="row">
	<div class="longrowlabel">{{=$ctx.doI18N("label.closed")}} ({{=$ctx.number(closedLoanCount)}}):</div>
	<div class="rowvalue">
	{{#each closedLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}', '{{=accountNo}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
	{{/each}}
	</div>
</div>
{{/if}}

{{#if $ctx.showTask("VIEWSAVINGPRODUCTS")}}
<p><b>{{=$ctx.doI18N("heading.savingaccount.overview")}}</b></p>
{{#if $ctx.numberGreaterThanZero(pendingApprovalSavingAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.pending.approval")}} ({{=$ctx.number(pendingApprovalSavingAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each pendingApprovalSavingAccounts}}
		<span class="savingaccount"><a href="unknown.html" onclick="showSavingAccount({{=id}}, '{{=accountNo}}', '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(approvedSavingAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.approved")}} ({{=$ctx.number(approvedSavingAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each approvedSavingAccounts}}
		<span class="savingaccount"><a href="unknown.html" onclick="showSavingAccount({{=id}}, '{{=accountNo}}', '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(closedSavingAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.closed")}} ({{=$ctx.number(closedSavingAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each closedSavingAccounts}}
		<span class="savingaccount"><a href="unknown.html" onclick="showSavingAccount({{=id}}, '{{=accountNo}}', '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{/if}}
</script>
	<!-- end of client -->


	<!--Global search -->
	<script id="globalSearchListTemplate" type="text/x-jquery-tmpl">

<table id='globalSearchtable' width='100%'>
    <thead>
        <tr>
            <th>{{=$ctx.doI18N("table.heading.search.entity.type")}}</th>
            <th>{{=$ctx.doI18N("table.heading.search.entity.name")}}</th>
            <th>{{=$ctx.doI18N("table.heading.search.entity.account.number")}}</th>
            <th>{{=$ctx.doI18N("table.heading.search.entity.external.id")}}</th>
            <th>&nbsp;</th>
        </tr>
    </thead>
    <tbody>
        {{#each crudRows}}
        <tr>
            <td>{{=entityType}}</td>

            {{#if entityType == 'CLIENT'}}

                <td><a id='navigateToClient{{=entityId}}' href='#' style='margin-right: 5px;' onclick="showILClient({{=entityId}});">{{=entityName}}</a></td>

            {{#else entityType == 'LOAN'}}

                <td><a id='navigateToLoan{{=entityId}}' href='#' style='margin-right: 5px;' onclick="showLoanFromSearch({{=parentId}}, {{=entityId}}, '{{=entityName}}', '{{=entityAccountNo}}');">{{=entityAccountNo}}</a></td>

            {{#else entityType == 'CLIENTIDENTIFIER'}}

                <td><a id='navigateToClientIdentifier{{=entityId}}' href='#' style='margin-right: 5px;' onclick="showILClient({{=parentId}});">{{=entityName}}</a></td>

            {{#else entityType == 'GROUP'}}

                <td><a id='navigateToGroup{{=entityId}}' href='#' style='margin-right: 5px;' onclick="showGroup({{=entityId}}); return false;">{{=entityName}}</a></td>

            {{#else entityType == 'DEVICE'}}

                <td><a id='navigateToClient{{=entityId}}' href='#' style='margin-right: 5px;' onclick="showILClient({{=entityId}});">{{=entityName}}</a></td>
            
            {{#else}}
            
                <td>{{=entityName}}</td>
                
            {{/if}}

            <td>{{=entityAccountNo}}</td>
            <td>{{=entityExternalId}}</td>
            <td>&nbsp;</td>
        </tr>
       {{/each}}
    </tbody>
</table>
</script>
	<script id="calendarFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
    <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
    <div id="formerrors"></div>
    </div>
    <fieldset>
        <legend>{{=$ctx.doI18N("form.legend.calendar.details")}}</legend>
        <div>
        <table>
            <tr>
                <td colspan="2">
                    <label for="title">{{=$ctx.doI18N("label.calendar.title")}}</label>
                    <input id="title" name="title" title="" type="text" value="{{=title}}" size="75"/>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="description">{{=$ctx.doI18N("label.calendar.description")}}</label>
                    <input id="description" name="description" title="" type="text" value="{{=description}}" size="30"/>
                </td>
                <td>
                    <label class='location' for="location">{{=$ctx.doI18N("label.calendar.location")}}</label>
                    <input class='location' id="location" name="location" title="" type="text" value="{{=location}}" size="30"/>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="type">{{=$ctx.doI18N("label.calendar.type")}}</label>
                    <select id="meetingTypeId" name="meetingTypeId" title="" value="{{=type.id}}">
                        <option value="" selected=true>{{=$ctx.doI18N("calendar.type.first.choice")}}</option>
                        {{#each calendarTypeOptions}}
                            <option value="{{=$ctx.number(id)}}">
                                {{#if value === 'COLLECTION'}}
                                    {{=$ctx.doI18N("lable.meeting.type.option.collection")}}
                                {{#else value === 'TRAINING'}}
                                    {{=$ctx.doI18N("lable.meeting.type.option.training")}}
                                {{#else value === 'AUDIT'}}
                                    {{=$ctx.doI18N("lable.meeting.type.option.audit")}}
                                {{#else value === 'GENERAL'}}
                                    {{=$ctx.doI18N("lable.meeting.type.option.general")}}
                                {{#else}}
                                    {{=value}}
                                {{/if}}                                


                            </option>
                        {{/each}}
                    </select>
                </td>

                <td>
                    <label for="startDate">{{=$ctx.doI18N("label.calendar.start.date")}}</label>
                    <input id="startDate" name="startDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(startDate)}}" />
                </td>
                
            </tr>
            <tr class='duration'>
                <td>
                    <label for="duration">{{=$ctx.doI18N("label.calendar.duration")}}</label>
                    <input id="duration" name="duration" title="" type="text" value="{{=duration}}" size="10"/>
                </td>
                <td>
                    {{#if remindBy}}
                        <label for="remindBy">{{=$ctx.doI18N("label.calendar.remind.by")}}</label>
                        <select id="remindById" name="remindById" title="" value="{{=remindBy.id}}">
                            <option value="">{{=$ctx.doI18N("calendar.remind.by.first.choice")}}</option>
                            {{#each remindByOptions}}
                            <option value="{{=$ctx.number(id)}}">{{=value}}</option>
                            {{/each}}
                        </select>
                    {{/if}}
                    
                </td>
            </tr>
            <tr class="reminders">
                <td>
                   <label for="firstReminder">{{=$ctx.doI18N("label.calendar.first.reminder")}}</label>
                    <input id="firstReminder" name="firstReminder" title="" type="text" value="{{=firstReminder}}" size="10"/> 
                </td>
                <td>
                    <label for="secondReminder">{{=$ctx.doI18N("label.calendar.second.reminder")}}</label>
                    <input id="secondReminder" name="secondReminder" title="" type="text" value="{{=secondReminder}}" size="10"/>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="repeat" style="display: inline">{{=$ctx.doI18N("label.calendar.repeat")}}</label>
                    <input type="checkbox" id="repeating" name="repeating" title="" />
                </td>                
                <td>
                
                </td>
            </tr>
        </table>
        </div>
        <input type="hidden" id="recurrence" name="recurrence" value="{{=recurrence}}" />
    </fieldset>
</form>
    <fieldset id="repeatingdetails">
        <legend>{{=$ctx.doI18N("form.legend.calendar.repeat.details")}}</legend>
        <div id="calendarRepeat">            
            <table>
                <tr>
                    <td>
                        <label for="repeats">{{=$ctx.doI18N("label.calendar.repeats")}}</label>
                        <select id="repeats" class="repeats" name="repeats" title="">
                        </select>
                    </td>
                    <td>
                        <label for="repeatsEvery">{{=$ctx.doI18N("label.calendar.repeats.every")}}</label>
                        <select id="repeatsEvery" class="repeatsEvery" name="repeatsEvery" title="">
                        </select> <span class=repeatsOnText>day(s)</span>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <br>
                        <div id="weeklyoptions">
                        <label for="repeats">{{=$ctx.doI18N("label.calendar.repeats.on")}}</label>
                        <input type="radio" id="mon" value="MO" name="repeatson[]" checked="checked">MON
                        <input type="radio" id="tue" value="TU" name="repeatson[]"/>TUE
                        <input type="radio" id="wed" value="WE" name="repeatson[]"/>WED
                        <input type="radio" id="thu" value="TH" name="repeatson[]"/>THU
                        <input type="radio" id="fri" value="FR" name="repeatson[]"/>FRI
                        <input type="radio" id="sat" value="SA" name="repeatson[]"/>SAT
                        <input type="radio" id="sun" value="SU" name="repeatson[]"/>SUN
                        </div>
                        <br>
                        
                    </td>
                    
                </tr>
                <tr>
                    <td>
                        <br>
                        <label for="ends">{{=$ctx.doI18N("label.calendar.ends")}}</label>
                        
                    </td>
                    <td>
                        <br>
                        <input type="radio" id="endsnever" name="endsonrd" value="endsnever" checked="true">{{=$ctx.doI18N("label.calendar.ends.never")}}</input>
                    </td>
                    
                </tr>
                <tr class="endsafter">
                    <td>
                                                
                    </td>
                    <td>
                        <input type="radio" id="endsafterrd" name="endsonrd" value="endsafter">{{=$ctx.doI18N("label.calendar.ends.after")}}</input>
                        <input id="endsafter" class="endsafter" name="endsafter" title="" type="text" value="" size="10"/>{{=$ctx.doI18N("label.calendar.ends.after.occurances")}}
                    </td>
                    
                </tr>
                <tr class="endson">
                    <td>
                                                
                    </td>
                    <td>
                        <input type="radio" id="endson" name="endsonrd" value="endondate">{{=$ctx.doI18N("label.calendar.ends.on")}}</input>
                        <input name="endondate" id="endondate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(endDate)}}" />
                    </td>                    
                </tr>
            </table>
        </div>
    </fieldset>

</script>
	<script id="calendarWidgetFormTemplate" type="text/x-jquery-tmpl">
    {{#each crudRows}}
        <div class="notespacer">
            <span class="ui-icon ui-icon-calendar" style="float: left; margin-right: 5px;"></span>
            <span>Name: {{=title}}</span>
            {{#if $parent.parent.data.resource === entityType.value}}
            &nbsp;&nbsp;&nbsp;:
                <span>
                    <a href="#" class="editcalendar" entityType="{{=entityType.value}}" entityId="{{=entityId}}" id="editcalendarlink{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</a>
                </span>
            {{/if}}
        </div>
        <div class="notespacer">
            <span>Meeting type: 
                {{#if type.value === 'COLLECTION'}}
                    {{=$ctx.doI18N("lable.meeting.type.option.collection")}}
                {{#else type.value === 'TRAINING'}}
                    {{=$ctx.doI18N("lable.meeting.type.option.training")}}
                {{#else type.value === 'AUDIT'}}
                    {{=$ctx.doI18N("lable.meeting.type.option.audit")}}
                {{#else type.value === 'GENERAL'}}
                    {{=$ctx.doI18N("lable.meeting.type.option.general")}}
                {{#else}}
                    {{=type.value}}
                {{/if}}   
            </span>
        </div>
        <div class="notespacer">
            <span>Start Date: {{=$ctx.globalDate(startDate)}}</span>
        </div>
        {{#if repeating == true}}
        <div class="notespacer">
            <span>Repeats on : {{=humanReadable}}</span>
        </div>
        
        <div class="notespacer" id="showrecurlink">
            <span><a href="#" class="recurshow" id="recurshow{{=id}}"> Next 10 recurring dates </a> </span>
        </div>
        {{/if}}
        <div class="notespacer" class="recurringdata" name="recurringdata" id="recurringdata{{=id}}" style="display: none;">
            {{#each nextTenRecurringDates}}
            <div class="notespacer">
                <span>{{=$ctx.globalDate($data)}}</span>
            </div> 
            {{/each}}
            <div class="notespacer">
                <span><a href="#" class="recurhide" id="recurhide{{=id}}"> Close </a> </span>
            </div>   
        </div>
        
        <hr>
    {{/each}}
</script>

	<script id="collectionSheetTabTemplate" type="text/x-jquery-tmpl">
        <div style="width:100%">
            <h1 align="center">{{=$ctx.doI18N("tab.collection.sheet.title")}}</h1>
        </div>
    <form id="entityform">
        <div id="formerrors"></div>
        <div style="margin-top: 5px;">
        <table>
            <tr>
                <td>
                    <label for="office">{{=$ctx.doI18N("label.collection.sheet.office")}}</label>
                </td>
                <td>
                    <select id="officeId" name="officeId">
                        <option value=0>{{=$ctx.doI18N("collection.sheet.office.first.choice")}}</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="group">{{=$ctx.doI18N("label.collection.sheet.group")}}</label>
                </td>
                <td>
                    <select id="groupId" name="groupId">
                        <option value=0>{{=$ctx.doI18N("collection.sheet.group.first.choice")}}</option>
                    </select>
                </td>
            </tr>  
            <tr>
                <td>
                    <label for="dueDate">{{=$ctx.doI18N("label.collection.sheet.date.of.transaction")}}</label>
                </td>
                <td>
                    <input id="dueDate" name="dueDate" title="" type="text" class="datepickerfieldnoconstraint" value="" />
                </td>
            </tr>    
        </table>
        </div>
    </form>
       <button id="continuebtn" >{{=$ctx.doI18N("button.continue")}}</button> 
        <br>
        <hr>
        <div id="collectionSheetContent"> </div>

</script>

	<script id="collectionSheetTemplate" type="text/x-jquery-tmpl">
    <form id="entityform">
        <input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
        <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
        <div id="formerrors"></div>
        <div style="margin-top: 5px; width:100%">
        <table class="collections pretty displaypayments">
        <caption>{{=$ctx.doI18N("table.caption.collectionsheet")}}</caption>
                <thead>
                    <tr>
                        <th class="empty" scope="colgroup"> </th>
                        <th class="highlightcol" scope="colgroup" colspan="{{=crudRows.loanProducts.length}}">{{=$ctx.doI18N("label.collection.sheet.due.collections")}}</th>
                        <th class="highlightcol" scope="colgroup" colspan="{{=crudRows.loanProducts.length}}">{{=$ctx.doI18N("label.collection.sheet.issues.withdrawls")}}</th>
                    </tr>
                    <tr>
                        <th>{{=$ctx.doI18N("label.collection.sheet.borrower.name")}}</th>
                        {{#each crudRows.loanProducts}}
                            {{#if $itemNumber == 1 }}
                                <th class="lefthighlightcolheader" scope="col">
                            {{#else}}
                                <th scope="col">
                            {{/if}}

                            {{=name}}

                            </th>
                        {{/each}}

                        {{#each crudRows.loanProducts}}
                            {{#if $itemNumber == 1 }}
                                <th class="lefthighlightcolheader" scope="col">
                            {{#else}}
                                <th scope="col">
                            {{/if}}

                            {{=name}}

                            </th>
                        {{/each}}
                    </tr>
                </thead>
                <tbody>
                    {{#each crudRows}}
                    {{#each groups}}
                    <tr>
                        <td>
                            {{=groupName}}
                        </td>
                        <td class="lefthighlightcolheader" scope="colgroup" colspan="{{=$parent.parent.data.loanProducts.length}}">&nbsp;</td>
                        <td class="righthighlightcolheader" scope="colgroup" colspan="{{=$parent.parent.data.loanProducts.length}}">&nbsp;</td>
                    </tr>
                        {{#each clients}}
                            <tr>
                                <td class="righthighlightcolheader">
                                    {{=clientName}}
                                </td>
                                {{#each $parent.parent.parent.parent.data.loanProducts}}
                                    <td>
                                        {{#each $parent.parent.data.loans}}
                                            {{#if productId === $parent.parent.data.id}}
                                                {{#if $ctx.numberGreaterThanZero($parent.data.totalDue)}}
                                                    <input id="totaldue_{{=$parent.parent.data.loanId}}" class="grouptotaldue sumtotaldue grouptotaldue_{{=$parent.parent.parent.parent.parent.parent.parent.parent.data.groupId}}_{{=$parent.parent.parent.parent.data.id}} sumtotaldue_{{=$parent.parent.parent.parent.data.id}}" title="" type="text" value="{{=$ctx.decimal($parent.parent.data.totalDue, 2)}}" style="width: 75px;" />
                                                    <input id="principalCurrencyCode" name="principalCurrencyCode" title="" type="text" value="{{=$parent.parent.data.currency.displaySymbol}}" style="width: 30px;" disabled="disabled" />
                                                {{/if}}
                                            {{/if}}
                                        {{/each}}
                                    </td>
                                {{/each}}

                                {{#each $parent.parent.parent.parent.data.loanProducts}}
                                    <td>
                                        {{#each $parent.parent.data.loans}}
                                            {{#if productId === $parent.parent.data.id}}
                                                {{#if $ctx.numberGreaterThanZero($parent.data.disbursementAmount)}}
                                                    
                                                    <input id="disbursement_{{=$parent.parent.data.loanId}}" class="grouptotaldisbursal sumdisbursement grouptotaldisbursal_{{=$parent.parent.parent.parent.parent.parent.parent.parent.data.groupId}}_{{=$parent.parent.parent.parent.data.id}} sumdisbursement_{{=$parent.parent.parent.parent.data.id}}" title="" type="text" value="{{=$ctx.decimal($parent.parent.data.disbursementAmount, 2)}}" style="width: 75px;" />
                                                    <input id="disbursementCurrencyCode" name="disbursementCurrencyCode" title="" type="text" value="{{=$parent.parent.data.currency.displaySymbol}}" style="width: 30px;" disabled="disabled" />
                                                {{/if}}    
                                            {{/if}}
                                        {{/each}}
                                    </td>
                                {{/each}}
                            </tr>
                        {{/each}}

                        <tr>
                            <td class="righthighlightcolheader">
                                <i>{{=$ctx.doI18N("label.collection.sheet.group.total")}}</i>
                            </td>
                            {{#each $parent.parent.data.loanProducts}}
                                {{#if $itemNumber == 1 }}
                                    <td scope="col">
                                {{#else}}
                                    <td scope="col">
                                {{/if}}
                                    <input id="grouptotaldue_{{=$parent.parent.data.groupId}}_{{=id}}" name="grouptotaldue_{{=$parent.parent.data.groupId}}_{{=id}}" title="" type="text" value="" style="width: 75px;" disabled="disabled" />
                                    <input id="productCurrencyCode_{{=$parent.parent.data.groupId}}_{{=id}}" name="productCurrencyCode_{{=$parent.parent.data.groupId}}_{{=id}}" title="" type="text" value="{{=currency.displaySymbol}}" style="width: 30px;" disabled="disabled" />
                                </td>
                            {{/each}}
                            {{#each $parent.parent.data.loanProducts}}
                                {{#if $itemNumber == 1 }}
                                    <td scope="col">
                                {{#else}}    
                                    <td scope="col">
                                {{/if}}
                                    <input id="grouptotaldisbursal_{{=$parent.parent.data.groupId}}_{{=id}}" name="grouptotaldisbursal_{{=$parent.parent.data.groupId}}_{{=id}}" title="" type="text" value="" style="width: 75px;" disabled="disabled" />
                                    <input id="productCurrencyCode_{{=$parent.parent.data.groupId}}_{{=id}}" name="productCurrencyCode_{{=$parent.parent.data.groupId}}_{{=id}}" title="" type="text" value="{{=currency.displaySymbol}}" style="width: 30px;" disabled="disabled" />                            
                                </td>
                            {{/each}}
                        </tr>
                    {{/each}}
                    {{/each}}
                </tbody>
                <tfoot class="ui-widget-header">
                    <tr>
                       <th>Total</th>
                       {{#each crudRows.loanProducts}}
                            {{#if $itemNumber == 1 }}
                                <th class="lefthighlightcolheader" scope="col">
                            {{#else}}    
                                <th scope="col">
                            {{/if}}
                                <input id="sumtotaldue_{{=id}}" name="sumtotaldue_{{=id}}" title="" type="text" value="" style="width: 75px;" disabled="disabled" />
                                <input id="productCurrencyCode_{{=id}}" name="productCurrencyCode_{{=id}}" title="" type="text" value="{{=currency.displaySymbol}}" style="width: 30px;" disabled="disabled" />
                            </th>
                        {{/each}}
                        {{#each crudRows.loanProducts}}
                            {{#if $itemNumber == 1 }}
                                <th class="lefthighlightcolheader" scope="col">
                            {{#else}}    
                                <th scope="col">
                            {{/if}}
                                <input id="sumdisbursal_{{=id}}" name="sumdisbursal_{{=id}}" title="" type="text" value="" style="width: 75px;" disabled="disabled" />
                                <input id="productCurrencyCode_{{=id}}" name="productCurrencyCode_{{=id}}" title="" type="text" value="{{=currency.displaySymbol}}" style="width: 30px;" disabled="disabled" />                            
                            </th>
                        {{/each}} 
                   </tr> 
                </tfoot>
            </table>
        </div>
       <br>
       <br> 
        <div style="text-align:right;">
            <button id="savebtn" >{{=$ctx.doI18N("button.save")}}</button>
            <button id="cancelbtn" >{{=$ctx.doI18N("button.cancel")}}</button>
        </div>
    </form>
</script>

	<script id="meetingCalendarTemplate" type="text/x-jquery-tmpl">
        <div id="meetingCalendarContent">
       

            <table>
                <tr class="calendarrow">
                    <td>{{=$ctx.doI18N("label.meeting.calendar")}}</td>
                    <td>
                        <select id="calendarId" class="calendarSelId" title="">
                        </select>
                    </td>
                </tr>
            </table>
            <hr>
        </div>
</script>

	<script id="reportListTemplate" type="text/x-jquery-tmpl">
<table id='reportstable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("reportName")}}</th>
			<th>{{=$ctx.doI18N("reportType")}}</th>
			<th>{{=$ctx.doI18N("reportSubType")}}</th>
			<th>{{=$ctx.doI18N("reportCategory")}}</th>
			<th>{{=$ctx.doI18N("description")}}</th>
			<th>{{=$ctx.doI18N("coreReport")}}</th>
			<th>{{=$ctx.doI18N("useReport")}}</th>
			<th>{{=$ctx.doI18N("link.action.viewedit")}}</th>
			{{#if $ctx.showTask("DeleteReport")}}
				<th>{{=$ctx.doI18N("link.action.delete")}}</th>
			{{/if}}
		</tr>
	</thead
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=reportName}}</td>
	<td>{{=reportType}}</td>
	<td>{{=reportSubType}}</td>
	<td>{{=reportCategory}}</td>
	<td>{{=description}}</td>
	<td>
		{{#if coreReport}}
			{{=$ctx.doI18N("boolean.true")}}
		{{#else}}
			{{=$ctx.doI18N("boolean.false")}}
		{{/if}}
	</td>
	<td>
		{{#if useReport}}
			{{=$ctx.doI18N("boolean.true")}}
		{{#else}}
			{{=$ctx.doI18N("boolean.false")}}
		{{/if}}
	</td>
	<td>
		<a id='editreport{{=id}}' class='editreport' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
	</td>
	{{#if $ctx.showTask("DeleteReport")}}
		<td>
			{{#if coreReport}} 
			{{#else}}
				<a id='deletereport{{=id}}' class='deletereport' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
			{{/if}}
		</td>
	{{/if}}
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="reportFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>


<div id="reportMaintenanceTabs">
  <ul>
    <li><a href="#reportMaintenanceTab-details">{{=$ctx.doI18N("report.maintenance.details")}}</a></li>
    <li><a href="#reportMaintenanceTab-sql">{{=$ctx.doI18N("report.maintenance.sql")}}</a></li>
    <li><a href="#reportMaintenanceTab-reportParameters">{{=$ctx.doI18N("report.maintenance.reportParameters")}}</a></li>
  </ul>

  <div id="reportMaintenanceTab-details">
	<table>
	 <tr>
	  <td valign="top">
		<label for="reportName">{{=$ctx.doI18N("reportName")}}</label>
		{{#if coreReport}}
			<input readonly="readonly" type="text" value="{{=reportName}}" size="50"/>
		{{#else}}
			<input id="reportName" name="reportName" title="" type="text" value="{{=reportName}}" size="50"/>
		{{/if}}
	  </td>
	  <td width="20px"></td>
	  <td valign="top">
		<label for="reportType">{{=$ctx.doI18N("reportType")}}</label>
		{{#if coreReport}}
			<input readonly="readonly" type="text" value="{{=$ctx.doI18N(reportType)}}" size="8"/>
		{{#else}}
			<select id="reportType" name="reportType" title="">
            <option value=""></option>
				{{#each allowedReportTypes}}
                	{{#if $data===$parent.parent.data.reportType}}
					<option value="{{=$data}}" selected="selected">{{=$ctx.doI18N($data)}}</option>
                	{{#else}}
					<option value="{{=$data}}">{{=$ctx.doI18N($data)}}</option>
                	{{/if}}
            	{{/each}}
			</select>
		{{/if}}
	  </td>
	  <td width="20px"></td>
	  <td valign="top">
		<label for="reportSubType">{{=$ctx.doI18N("reportSubType")}}</label>
		{{#if coreReport}}
			{{#if reportSubType}}
				<input readonly="readonly" type="text" value="{{=$ctx.doI18N(reportSubType)}}" size="8"/>
			{{#else}}
				<input readonly="readonly" type="text" value="" size="8"/>
        	{{/if}}
		{{#else}}
			<select id="reportSubType" name="reportSubType" title="">
            	<option value=""></option>
				{{#each allowedReportSubTypes}}
                	{{#if $data===$parent.parent.data.reportSubType}}
						<option value="{{=$data}}" selected="selected">{{=$ctx.doI18N($data)}}</option>
                	{{#else}}
						<option value="{{=$data}}">{{=$ctx.doI18N($data)}}</option>
                	{{/if}}
            	{{/each}}
			</select>
		{{/if}}
	  </td>
	</tr>
	<tr>
	  <td valign="top">
		<label for="reportCategory">{{=$ctx.doI18N("reportCategory")}}</label>
		{{#if coreReport}}
			<input readonly="readonly" type="text" value="{{=reportCategory}}" size="30"/>
		{{#else}}
			<input id="reportCategory" name="reportCategory" title="" type="text" value="{{=reportCategory}}" size="30"/>
		{{/if}}
	  </td>
	  <td width="20px"></td>
	  <td></td>
	  <td width="20px"></td>
	  <td valign="top">
		<label for="useReport">{{=$ctx.doI18N("useReport")}}</label>
		{{#if useReport}}
			<input id="useReport" name="useReport" type="checkbox" value="{{=useReport}}" checked="true"/>
		{{#else}}
			<input id="useReport" name="useReport" type="checkbox" value="{{=useReport}}"/>
		{{/if}}
	  </td>
	 </tr>
	</table>

	<table>
	 <tr>
	  <td>
		<label for="description">{{=$ctx.doI18N("description")}}</label>
		{{#if coreReport}}
			<textarea readonly=true cols="150" rows="12">{{=description}}</textarea>
		{{#else}}
			<textarea id="description" name="description" cols="150" rows="12">{{=description}}</textarea>
		{{/if}}
	  </td>
	 </tr>
	</table>
  </div>


  <div id="reportMaintenanceTab-sql">
	<table>
	 <tr>
	  <td>
		<label for="reportSql">{{=$ctx.doI18N("reportSql")}}</label>
		{{#if coreReport}}
			<textarea readonly=true cols="150" rows="24">{{=reportSql}}</textarea>
		{{#else}}
			<textarea id="reportSql" name="reportSql" cols="150" rows="24">{{=reportSql}}</textarea>
		{{/if}}
	  </td>
	 </tr>
	</table>
  </div>



  <div id="reportMaintenanceTab-reportParameters">

{{#if coreReport}}
	<table border="1">
	<thead>
			<tr>
				<th><b>{{=$ctx.doI18N("parameterName")}}</b></th>
				<th><b>{{=$ctx.doI18N("reportParameterName")}}</b></th>
			</tr>
	</thead>
	<tbody>
		{{#each reportParameters}}
			<tr>
				<td>{{=$ctx.doI18N(parameterName)}}</td>
				<td>{{=reportParameterName}}</td>
			</tr>
		{{/each}}
	</tbody>
	</table>
{{#else}}
	{{=$ctx.doI18N("Note")}}<br>
	<i>{{=$ctx.doI18N("reportParametersNote")}}</i><br><br>
	<!-- reportParameters -->
	 <select id="reportParameterOptions">
	    <option value="">{{=$ctx.doI18N("option.first.choice")}}</option>
		{{#each allowedParameters}}
			<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(parameterName)}}</option>
      	{{/each}}
	 </select>
	 <button id="reportParameter-add">{{=$ctx.doI18N("widget.multiselect.button.add")}}</button>
	<table id="reportparameterstable" class="pretty displayschedule">
	<thead>
		<tr>
			<th><b>{{=$ctx.doI18N("parameterName")}}</b></th>
			<th><b>{{=$ctx.doI18N("reportParameterName")}}</b></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
	{{#each reportParameters}}
		<tr>
			<td>
				<input id="reportParameters[{{=$itemNumber}}][id]" name="reportParameters[{{=$itemNumber}}][id]" class="id" title="" type="hidden" value="{{=$ctx.number(id)}}" />
				<input id="reportParameters[{{=$itemNumber}}][parameterId]" name="reportParameters[{{=$itemNumber}}][parameterId]" class="id" title="" type="hidden" value="{{=$ctx.number(parameterId)}}" />
				<input title="" disabled value="{{=$ctx.doI18N(parameterName)}}" />
			</td>
			<td><input id="reportParameters[{{=$itemNumber}}][reportParameterName]" name="reportParameters[{{=$itemNumber}}][reportParameterName]" title="" value="{{=reportParameterName}}" /></td>
			<td><button id="reportParameters-remove{{=$itemNumber}}" class="reportParameters-remove">{{=$ctx.doI18N("widget.multiselect.button.remove")}}</button></td>
		</tr>
	{{/each}}
	</tbody>
	</table>
	<!-- reportParameters -->
{{/if}}
  </div>

</div>
</form>
</script>

	<script id="AddReportParameterRowTemplate" type="text/x-jquery-tmpl">
<tr>
	<td>
		<input id="reportParameters[{{=index}}][id]" name="reportParameters[{{=index}}][id]" class="id" title="" type="hidden" value="{{=$ctx.number(id)}}" />
		<input id="reportParameters[{{=index}}][parameterId]" name="reportParameters[{{=index}}][parameterId]" title="" type="hidden" value="{{=$ctx.number(parameterId)}}" />
		<input title="" disabled value="{{=$ctx.doI18N(parameterName)}}" />
	</td>
	<td><input id="reportParameters[{{=index}}][reportParameterName]" name="reportParameters[{{=index}}][reportParameterName]" title="" value="{{=reportParameterName}}" /></td>
	<td><button id="reportParameters-remove{{=index}}" class="reportParameters-remove">{{=$ctx.doI18N("widget.multiselect.button.remove")}}</button></td>
</tr>
</script>

	<!-- Search screens and templates for Center -->
	<script id="centerSearchTabTemplate" type="text/x-jquery-tmpl">
<div>   
	<form method="post" id="viewCenter" name="viewCenter">
		<div id="officesInScopeDiv">
		</div>
		<hr/>    
	</form>
	<div id="centerTableDiv">
	</div>
</div>
</script>

	<script id="allCentersDropdownTemplate" type="text/x-jquery-tmpl">
    <label for="group">{{=$ctx.doI18N("label.center.search")}}</label>
    <select name="group" id="group" onChange="showCenter(options[selectedIndex].value);">
        <option value="0">{{=$ctx.doI18N("option.center.search.first.choice")}}</option>
        {{#each crudRows}}
            <option value="{{=id}}">{{=name}}&nbsp;-&nbsp;({{=officeName}})</option>
        {{/each}}
    </select>
</script>

	<script id="centerTableTemplate" type="text/x-jquery-tmpl">
    <table id='centerstable' class="display">
        <thead>
            <tr>
                <th>{{=$ctx.doI18N("table.heading.officename")}}</th>
                <th>{{=$ctx.doI18N("table.heading.displayname")}}</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="5" class="dataTables_empty">Loading data from server</td>
            </tr>
        </tbody>
    </table>
</script>

	<script id="centerDataTabTemplate" type="text/x-jquery-tmpl">
<div class="groupcontainer">
    <div class="right clearright marginB20" id="groupnotescontainer">
        <div id="groupnotes">
        </div>
        <br>
        <div>
            <table width="100%" cellspacing="0" cellpadding="2" border="0" class="bluetableborder">
                <tbody>
                    <tr>
                        <td class="bluetablehead05">
                            <span class="fontnormalbold">{{=$ctx.doI18N("label.group.calendar.details")}}</span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div id="centerCalendarContent">
                            </div>
                        </td>
                    </tr>
                     
                </tbody>
            </table>
        </div>
    </div>
    <div class="left">
		<div id="grouptabcontent">
				<div class="row">
					<span class="longrowlabel">{{=$ctx.doI18N("label.name")}}</span>
					<span class="rowvalue">{{=name}}</span>
				</div>
				{{#if externalId}}
				<div class="row">
					<span class="longrowlabel">{{=$ctx.doI18N("label.externalId")}}</span>
					<span class="rowvalue">{{=externalId}}</span>
				</div>
				{{/if}}
				<div class="row">
					<span class="longrowlabel">{{=$ctx.doI18N("label.status")}}</span>
					<span class="rowvalue">{{=$ctx.doI18N(status.code)}}</span>
				</div>
				{{#if activationDate}}
					<div class="row">
						<span class="longrowlabel">{{=$ctx.doI18N("label.activationDate")}}</span>
						<span class="rowvalue">{{=$ctx.globalDate(activationDate)}}</span>
					</div>
				{{/if}}
				<div class="row">
					<span class="longrowlabel">{{=$ctx.doI18N("label.office")}}</span>
					<span class="rowvalue">{{=officeName}}</span>
				</div>
                {{#if staffName}}
				<div class="row">
					<span class="longrowlabel">{{=$ctx.doI18N("label.group.staff")}}</span>
					<span class="rowvalue">{{=staffName}}</span>
					<span style="margin-left:10px;"><a href="#" id="unassignstafftogroup{{=id}}" class="unassignstafftogroup">
					{{=$ctx.doI18N("label.group.unassign.staff")}}</a></span>
				</div>
                {{/if}}
				<br>
				<div class="row">
					<span class="rowvalue heading">{{=$ctx.doI18N("label.group.account.information")}}</span>
				</div>
				<br/>

            <div id="grouptableftpane" style="float:left;width:100%">
                <br>
            </div>
            <!-- end of left pane content -->
        </div>
    </div>
</div>
</script>

	<script id="centerDetailsTemplate" type="text/x-jquery-tmpl">
<div style="padding-left: 25px;">
    <input type="hidden" id="staffId" name="staffId" value="{{=staffId}}" />
    <input type="hidden" id="officeId" name="officeId" value="{{=officeId}}" />
    <table style="width:100%">
        <tbody>
            <tr>
                <td>
                    <div class="rowvalue heading">{{=name}}</div>
                </td>
                <td valign="top" style="text-align: right">
                    <span id="toolbar" class="ui-widget-header ui-corner-all">

						{{#if activationDate}}
							<button id="editcenterbtn{{=id}}" class="editcenterbtn">Edit center</button>
	                        <button id="addgroupbtn{{=id}}" class="addgroupbtn">Add a group</button>
    	                    <button id="addcalendarbtn{{=id}}" class="addcalendarbtn">{{=$ctx.doI18N("label.group.attach.meeting")}}</button>
	                        {{#if $ctx.showTask("AddGroupNote")}}
    	                    <button id="addgroupnotebtn{{=id}}" class="addgroupnotebtn">Add note</button>
        	                {{/if}}
						{{#else}}
							{{#if $ctx.showTask("ActivateCenter")}}
							<button id="activatecenter{{=id}}" class="activatecenter">Activate</button>
							{{/if}}
							<button id="deletecenterbtn{{=id}}" class="deletecenterbtn">{{=$ctx.doI18N("label.center.delete")}}</button>
							<button id="editcenterbtn{{=id}}" class="editcenterbtn">Edit center</button>
	                        <button id="addgroupbtn{{=id}}" class="addgroupbtn">Add a group</button>
    	                    <button id="addcalendarbtn{{=id}}" class="addcalendarbtn">{{=$ctx.doI18N("label.group.attach.meeting")}}</button>
	                        {{#if $ctx.showTask("AddGroupNote")}}
    	                    <button id="addgroupnotebtn{{=id}}" class="addgroupnotebtn">Add note</button>
        	                {{/if}}
						{{/if}}
                    </span>
                </td>
            </tr>
        </tbody>
    </table>
    <br/>
    <br/>
</div>
</script>

	<script id="jlgbulkloanmemberselect" type="text/x-jquery-tmpl">
    <div id="membesselect" class="ui-widget-content ui-corner-all">
        <h3 class="ui-widget-header ui-corner-all" style = 'height:30px; text-align:centers; margin:5px;'>Member Select</h3>
        
        <h1 align="center">{{=$ctx.doI18N("tab.group.bulk.loan.member.select.title")}}</h1> 
        <br>
        <div style='margin:10px;'>
            <table id='loanproductstable' width='40%'>
                <tr>
                    <td>
                        {{=$ctx.doI18N("label.group.loan.product.name")}}
                    </td>
                    <td>
                        <select name="productId" id="productId" class="productId">
                            <option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
                            {{#each productOptions}}
                                {{#if $ctx.number($parent.parent.data.loanProductId)===$ctx.number(id)}}
                                <option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
                                {{#else}}
                                <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                                {{/if}}
                            {{/each}}
                        </select>
                    </td>
                </tr>
            </table>
            <br>
            <table id='memberstable' width='80%'>
                <tr>
                    <td>
                        <div class="multiselectwidget">
                            <label for="notSelectedClients">{{=$ctx.doI18N("form.label.group.available.clients")}}</label>
                            <select id="notSelectedClients" name="notSelectedClients" title="" class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:400px;height:125px;">
                            {{#each group.clientMembers}}
                                <option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
                            {{/each}}
                            </select>
                            <a href="#" id="addclientmembers" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
                        </div>
                    </td>
                    <td>
                        <div class="multiselectwidget">
                            <label for="loanMembers">{{=$ctx.doI18N("form.label.group.selected.clients")}}</label>
                            <select id="loanMembers" name="loanMembers" title="" class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:400px;height:125px;">
                            
                            </select>
                            <a href="#" id="removeclientmembers" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
                        </div>
                    </td>
                </tr>
            </table>
            <br>
            <button id="continuebtn" >{{=$ctx.doI18N("button.continue")}}</button>  
            <br>
        </div>
    </div>
    <br>
    <div id="jlgloancontainer" style="display:none;">
        <div id="memberloanapplications" class="ui-widget-content ui-corner-all">
            <h3 class="ui-widget-header ui-corner-all" style = 'height:30px; text-align:centers; margin:5px;'>New loan applications</h3>
            <table>
                <tr>
                    <td>
                        <div class="multiselectwidget">
                            <label for="loanMembers">{{=$ctx.doI18N("form.label.group.selected.clients")}}</label>
                            <select id="selectedmembers" name="selectedmembers" title="" class="multiselectwidget selectedmembers" multiple="multiple" style="width:400px;height:125px;">
                            
                            </select>
                        </div>
                    </td>
                </tr>
            </table>
            <br>
            <hr>
            <div id="jlgloanproductdetails">

            </div>
            <br>
            <button id="backbtn" >{{=$ctx.doI18N("button.back")}}</button>&nbsp;&nbsp;&nbsp;
            <button id="savebtn" >{{=$ctx.doI18N("button.save")}}</button>  
            <br>
        </div>
    </div>
</script>

	<script id="centerGroupsTabTemplate" type="text/x-jquery-tmpl">
{{#if groupMembers}}
<span><b>{{=$ctx.doI18N("label.group.assigned")}}</b></span>
<p>{{=$ctx.doI18N("label.center.group.view.group.details")}}</p>

<div style="border: 1px solid #CECECE; height:100px; width:500px; overflow: auto; padding:6px; margin-top:5px;" id="Layer2">
{{#each groupMembers}}
	<div class="row">
		<span class="fontnormal"><a href="#" onCLick="showGroup({{=id}}); return false;"><span class="rowvalue">{{=name}}</span></a><br></span>
    </div>
{{/each}}
</div>
{{/if}}
</script>

	<script id="centerSummaryTabTemplate" type="text/x-jquery-tmpl">
<table width="100%" cellspacing="0" cellpadding="2" border="0" class="bluetableborder">
	<tbody>
        <tr>
            <td class="bluetablehead05"><span class="fontnormalbold">{{=$ctx.doI18N("label.group.performance.history")}}</span></td>
        </tr>
        <tr>
            <td class="paddingL10"><span class="fontnormal8pt">{{=$ctx.doI18N("label.group.active.client")}} {{=groupSummaryData.totalActiveClients}}</span></td>
        </tr>
        {{#if groupLevelData.recursable}}
        <tr>
            <td class="paddingL10"><span class="fontnormal8pt">{{=$ctx.doI18N("label.group.active.groups")}} {{=groupLevelData.childLevelName}} : {{=groupSummaryData.totalChildGroups}}</span></td>
        </tr>
        {{/if}}
        <tr>
            <td class="paddingL10"><span class="fontnormal8pt">{{=$ctx.doI18N("label.group.total.loan.portfolio")}}</span>
                {{#each groupSummaryData.totalLoanPortfolio}}
                    <br/><span class="fontnormal">{{=code}} : {{=amount}}</span>
                {{/each}}
            </td>
        </tr>
        <tr>
            <td class="paddingL10"><span class="fontnormal8pt">{{=$ctx.doI18N("label.group.total.savings")}} </span></td>
        </tr>
   	</tbody>
</table>    
</script>
	<!-- end of centers api -->
	<!--Billing Scripts  -->
	<script id="subscriptionListTemplate" type="text/x-jquery-tmpl">
<table id='subscriptionstable' width='100%'>
<button id="newcontractbtn{{=id}}" onClick="addNewContract();return false;" class="newtaxmap ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add New Contract
</span>
</button>
<thead>
	<tr>
		<th>{{=$ctx.doI18N("table.heading.subscription")}}</th>
		<th>{{=$ctx.doI18N("table.heading.subscription.type")}}</th>
		<th>{{=$ctx.doI18N("table.heading.units")}}</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
 <td>{{=subscription_period}}</td>
  {{#if subscription_type === -1}}
 {{#else}}
	<td>{{=subscription_type}}</td>
{{/if}}
	<td>{{=units}}</td>
	<td>
		<a id='editsubscription{{=id}}' class='editsubscription' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletesubscription{{=id}}' class='deletesubscription' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="subscriptionFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
  <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.subscription.details")}}</legend>
		<label for="subscription_period">{{=$ctx.doI18N("form.label.subscription.period")}}</label>
		<input id="subscription_period" class="text ui-widget-content ui-corner-all" name="subscriptionPeriod" title="" type="text" value="{{=subscription_period}}" size="20"/>
		<label for="subscription_type">{{=$ctx.doI18N("form.label.subscription.type")}}</label>
	        <select id="day_name" name="subscriptionType"  class="text ui-widget-content ui-corner-all" title="" style="width: 164px;" >
	            <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		            {{#each allowedperiods}}
                         {{#if subscriptionType}}
                             {{#if $parent.parent.parent.data.subscription_type ===subscriptionType}}
             	                   <option value="{{=subscriptionType}}" selected="selected">{{=subscriptionType}}</option>
                             {{#else}}
                                    <option value="{{=subscriptionType}}">{{=subscriptionType}}</option>
                             {{/if}}
                          {{/if}}
                     {{/each}}
             </select>
             <select id="subscription_type2" name="subscriptionTypeId" style="display:none"  class="text ui-widget-content ui-corner-all" title="">
	            <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		                {{#each allowedperiods}}
                               {{#if day_name}}
                                    {{#if $ctx.number($parent.parent.parent.data.subscriptiontypeId)===$ctx.number(id)}}
			                                <option value="{{=day_name}}">{{=day_name}}</option>
                                    {{#else}}
                                            <option value="{{=$ctx.number(id)}}">{{=day_name}}</option>
                                    {{/if}}
                                {{/if}}
                        {{/each}}
              </select>
		<br/>
        <label for="units">{{=$ctx.doI18N("Units")}}</label>
       <input id="units" class="text ui-widget-content ui-corner-all" name="units" title="" type="text" value="{{=units}}" size="20"/>
	</fieldset>
</form>
</script>

	<script id="paymodeFormListTemplate" type="text/x-jquery-tmpl">
<table id='paymodestable' width='100%'>
<button id="newservicebtn{{=id}}" class=newservicebtn myclass" onclick="addNewPaymode(); return false;">Add Paymode</button>
<thead>
	<tr>
		<th>Id</th>
		<th>Paymode Code</th>
		 <th>Paymode Description</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=paymodeCode}}</td>
<td>{{=paymodeDescription}}</td>

	<td>
<a id='updatepaymode{{=id}}' class='updatepaymode' href='#' style='margin-right: 5px;' >{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletepaymode{{=id}}' class='deletepaymode' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>
	<script id="paymodeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
	<legend>{{=$ctx.doI18N("dialog.title.add.paymode")}}</legend>
				<table>
					<tr>
                        <td align="right">
		                  <label for="paymode">{{=$ctx.doI18N("form.label.paymode.code")}}</label>
                        </td>
	                    <td>
              	           <input id="paymode" name="paymode" title="" type="text" value="{{=paymodeCode}}" size="20"/>
                       </td>
                   </tr>
                   <tr>
                       <td align="right">
                             <label for="units">{{=$ctx.doI18N("form.label.paymode.description")}}</label>
                       </td>
                       <td>
                            <input id="description" name="description" title="" type="text" value="{{=paymodeDescription}}" size="20"/>
                      </td>
                  </tr>
            </table>
   </fieldset>
</form>
</script>

	<script id="priceFormListTemplate" type="text/x-jquery-tmpl">
<table id='servicestable' width='100%'>
<thead>
	<tr>
		<th>Id</th>
        <th>plan Code</th>
		<th>Service Code</th>
		<th>Charge Code</th>
		<th>charge Variant</th>
		<th>price</th>
         <th>price Region</th>
      <th>&nbsp</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
  {{#each serviceData}}
    <tr>
       <td>{{=id}}</td>
       <td>{{=planCode}}</td>
       <td>{{=serviceCode}}</td>
      <td>{{=chargeCode}}</td>
      <td>{{=chargeVariant}}</td>
      <td>{{=$ctx.decimal(price, 2)}}</td>
      <td>{{=priceregion}}</td>
      <td>
        <a id='updatePrice{{=id}}' class='updatePrice' href='#' style='margin-right: 5px;' >{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletePrice{{=id}}' class='deletePrice' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
     </td>
   {{/each}}
  </tr>
{{/each}}
</tbody>
</table>
</script>


	<script id="servicemasterFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	  <fieldset>
	 <legend>{{=$ctx.doI18N("legend.title.service.details")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>
    	               	<td align="right">
                         <label for="discountcode">{{=$ctx.doI18N("Service Code:")}}</label>
                        </td>
                        <td>
	                    <input id="serviceCode" name="serviceCode" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=serviceCode}}" size="20"/>

                    <td>
                </tr>
				<tr>
     				<td align="right">
                      <label for="serviceDescription">{{=$ctx.doI18N("Service Description:")}}</label>
       </td>
                  </td>
                 <td>
              <input id="serviceDescription" name="serviceDescription" class="text ui-widget-content ui-corner-all" title="" type="text" value="{{=serviceDescription}}" size="20"/>
              </td>
           </tr>
 <tr>
               <td align="right">

		 <label for="serviceType">{{=$ctx.doI18N("Service Type:")}}</label>

               </td>
               <td>
		         <select id="serviceType" name="serviceType"  title="" style="width:164px;">
                    <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
                             {{#each serviceTypes}}
                                     {{#if $ctx.number($parent.parent.data.serviceType)===value}}
					                      <option value="{{=value}}" selected="selected" >{{=value}}</option>
                                    {{#else}}
  	                                      <option value="{{=value}}">{{=value}}</option>
                                    {{/if}}
	                         {{/each}}
		            </select>

             </td> 
</tr>            
</table>
  </td>
       <td valign="top" style="padding-left: 5px; padding-right: 5px;">
               <table>
					<tr>
				     
               </tr>
               <tr>
                 <td align="right">
                  <label for="status">{{=$ctx.doI18N("form.label.service.status")}}</label>
               </td>
              <td>
               <select id="status" name="status"  title="" style="width:164px;">
                             {{#each status}}
                                     {{#if $ctx.number($parent.parent.data.serviceStatus)===value}}
					                      <option value="{{=value}}" selected="selected" >{{=value}}</option>
                                    {{#else}}
  	                                      <option value="{{=value}}">{{=value}}</option>
                                    {{/if}}
	                         {{/each}}
		            </select>

	         </td>
           </tr>
            <tr>
                            <td align="right">
                           <label for="isOptional">{{=$ctx.doI18N("form.label.service.isOptional")}}</label>
                      </td>
                      <td>
                          {{#if isOptional == 'Y'}}
                             <input type="checkbox" id="isOptional" name="isOptional" title="" style="width: 25px;" checked/>
                          {{#else}}
                               <input type="checkbox" id="isOptional" name="isOptional" title="" style="width: 25px;" />
                        {{/if}}
	             </td>
           </tr>
          
	</table>
   </td>
  </tr>
</table>
</fieldset>
</form>

</script>


	<script id="servicemasterListTemplate" type="text/x-jquery-tmpl">
<table id='servicemasterstable' width='100%'>
<button id="newservicebtn{{=id}}" onClick="addService();return false;" class="newtaxmap ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add New Service
</span>
</button>
<thead>
	<tr>
		<th>Id</th>
		<th>Service Code</th>
		 <th>Service Description</th>
         <th>Service Type</th>
      
         <th>Status </th>
         <th>IsOptional</th>

		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=serviceCode}}</td>
<td>{{=serviceDescription}}</td>
<td>{{=serviceType}}</td>

<td>{{=serviceStatus}}</td>
<td>{{=isOptional}}</td>

	<td>
		<a id='updateservice{{=id}}' class='updatePlan' href='#' style='margin-right: 5px;'  onclick="updateService('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteservice{{=id}}' class='deletePlan' href='#' style='margin-right: 5px;' onclick="deleteService('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.delete")}}</a>
	
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="planListTemplate" type="text/x-jquery-tmpl">
<table id='planstable' width='100%'>

<button id="newplanbtn{{=id}}" onClick="addPlan();return false;" class="newtaxmap ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add New Plan
</span>
</button>
<thead>
	<tr>
		<th>Id</th>
		<th>Plan Code</th>
		 <th>Plan Description</th>

        <th>Status</th>

		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=planCode}}</td>
<td>{{=planDescription}}</td>
{{#each planstatus}}
      <td>{{=value}}</td>
{{/each}}
	<td>
		<a id='updatePlan{{=id}}' class='updatePlan' href='#' style='margin-right: 5px;'  onclick="updatePlan('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletePlan{{=id}}' class='deletePlan' href='#' style='margin-right: 5px;' onclick="deletePlan('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.delete")}}</a>
		<a id='addPricing{{=id}}' class='addPricing' href='#' style='margin-right: 5px;' onclick="viewPricing('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.viewprice")}}</a>
        <a id='newpricebtn{{=id}}' class='mylink' href='#'  style='margin-right: 5px;' onclick="addPricing('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.addprice")}}</a>
	
	</td>
</tr>

{{/each}}
</tbody>
<table>
</script>

	<script id="planFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
     <div id="formerrors"></div>
	    <fieldset>
		     <legend>{{=$ctx.doI18N("legend.title.plan.details")}}</legend>
                   <table>
		              <tr>
			             <td valign="top" style="padding-right: 15px;">
				             <table>
					              <tr>
                              		 <td align="right">
                                            <label for="planCode">{{=$ctx.doI18N("form.label.plan.code")}}</label>
                                     </td>
                                     <td> 
	                                       <input id="planCode" name="planCode" class="text ui-widget-content ui-corner-all" title="" style="height:20px;" type="text" value="{{=planCode}}" size="25"/>
                                     <td>
                                 </tr>
					             <tr>
				                     <td align="right">
                                             <label for="units">{{=$ctx.doI18N("form.label.plan.description")}}</label>
                                     </td>
                                     <td>
                                           <input id="planDescription" name="planDescription" title="" type="text" style="height:20px;" class="text ui-widget-content ui-corner-all" value="{{=planDescription}}" size="25"/>
                                     </td>
                                 <tr>
                                     <td align="right">
                                            <input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
	                                        <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		                                    <label for="startDate">{{=$ctx.doI18N("form.label.start.date")}}</label>
                                     </td>
	                                 <td>
                                          <input id="startDate" name="startDate" title="" type="text" style="height:20px;" class="text ui-widget-content ui-corner-all datepickerfield" value="{{=$ctx.globalDate(startDate)}}"size="25"  />
                                    </td>
                                </tr>
                           </table>
                       </td>
                       <td valign="top" style="padding-left: 5px; padding-right: 5px;">
                            <table>
					              <tr>
				                     <td align="right">
                                           <label for="status">{{=$ctx.doI18N("form.label.plan.status")}}</label>
                                     </td>
	                                 <td>
                                           <select id="status" name="status"  title="" style="width: 149px;">
			                               <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		                                         {{#each planStatus}}
                                                       {{#if $ctx.number($parent.parent.data.status)===$ctx.number(id)}}
 					                                           <option value="{{=id}}" selected="selected">{{=value}}</option>
                                                       {{#else}}
     	                                                        <option value="{{=id}}">{{=value}}</option>
                                                        {{/if}}
                                                  {{/each}}	
		                                  </select>
                                      </td>
                                    </tr>
                                 <tr>
                                    <td>
                                         <tr>
                                                <td align="right">
                                                       <label for="billRule">{{=$ctx.doI18N("form.label.plan.rule")}}</label>
                                                 </td>
	                                             <td>
                                                        <select id="billRule" name="billRule"  title="" style="width: 149px;">
			                                           <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		                                                   {{#each billRuleDatas}}
                                                                  {{#if $ctx.number($parent.parent.data.billRule)===$ctx.number(id)}}
				                                                       <option value="{{=id}}" selected="selected">{{=billruleOptions}}</option>
                                                                  {{#else}}
                                                                       <option value="{{=id}}">{{=billruleOptions}}</option>
                                                                  {{/if}}
                                                           {{/each}}	
		                                                 </select>

                                                 </td>
                                             </tr>
	                                     </tr>
                                          <tr>
                                             <td align="right">
                                                 <label for="provisioingSystem">{{=$ctx.doI18N("form.label.plan.provisioingsystem")}}</label>
                                             </td>
	                                         <td>
                                                 <select id="provisioingSystem" name="provisioingSystem"  title="" style="width: 149px;">
			                                           <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		                                                       {{#each provisionSysData}}
                                                                   {{#if $parent.parent.data.provisionSystem ===provisioingSystem}}
				                                                        <option value="{{=provisioingSystem}}" selected="selected">{{=provisioingSystem}}</option>
                                                                   {{#else}}
                                                                         <option value="{{=provisioingSystem}}">{{=provisioingSystem}}</option>
                                                                   {{/if}}
                                                               {{/each}}	
		                                          </select>
                                              </td>
                                          </tr>
	                                   </tr>
                                       <tr>
                                           <td align="right">
                                                 <label for="endDate">{{=$ctx.doI18N("form.label.end.date")}}</label>
                                           </td>
	                                       <td>
                      	                       <input id="endDate" name="endDate" title="" style="height:20px;" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint" type="text" value="{{=$ctx.globalDate(endDate)}}" size="18"/>
                                           </td>
                                     </table>
                                   </td>
                                </tr>
                             </table>
                            <label for="units">{{=$ctx.doI18N("form.label.plan.service")}}</label></td></tr>

<div class="multiselectwidget">
			<label for="notSelectedServices">{{=$ctx.doI18N("form.label.user.available.services")}}</label>
			<select id="notSelectedServices" name="notSelectedServices" title="Available application services." class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:370px;height:125px;">
			{{#each services}}
				<option value="{{=id}}">{{=serviceDescription}}</option>
            {{/each}}
			</select>
			<a href="#" id="addservices" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
		</div>
		
		<div class="multiselectwidget">
			<label for="services">{{=$ctx.doI18N("form.label.user.selected.services")}}</label>
			<select id="services" name="services" title="User selected services." class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:370px;height:125px;">
			{{#each selectedServices}}
				<option value="{{=id}}" selected="selected">{{=serviceCode}}</option>
            {{/each}}
			</select>
			<a href="#" id="removeservices" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
					</div>
          <table>
             <tr>
                 <td> 
                    <table>
                    <tr> 
                   <td>
                        {{#if isPrepaid == 'Y'}}
                   <input type="checkbox" id="isPrepaid" name="isPrepaid" title="" style="width: 25px;" checked/>
                          {{#else}}
                      <input type="checkbox" id="isPrepaid" name="isPrepaid" title="" style="width: 25px;" />
                        {{/if}}
                 </td>
                <td align="right">
                    <label for="isPrepaid">{{=$ctx.doI18N("form.label.plan.isprepaid")}}</label>
                </td>
             </tr>
             </table>
           </td>
           </tr>
             <tr>
               <td>
                  <table>   
                       <tr>
                         <td>   
                           <table>
                               <tr>
                                <td align="right">
                                 
                                </td>
                              </tr>
                        </table>
                       </td>
                      <td>
                        <table> 
                           <tr>
                             <td align="right">
                               <label for="duration">{{=$ctx.doI18N("form.label.plan.duration")}}</label>
                             </td>
                              <td>
                                  <select id="duration" name="duration"  title="" style="width: 145px;">
			                                           <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		                                                       {{#each subscriptiondata}}
                                                                   {{#if $parent.parent.data.contractPeriod === Contractdata}}
				                                                        <option value="{{=Contractdata}}" selected="selected">{{=Contractdata}}</option>
                                                                   {{#else}}
                                                                         <option value="{{=Contractdata}}">{{=Contractdata}}</option>
                                                                   {{/if}}
                                                               {{/each}}	
		                                          </select>
                             </td>
                            </tr>
                               <tr>
                              <td align="right">
                               <label for="allowtopup">{{=$ctx.doI18N("form.label.plan.allowtopup")}}</label>
                             </td>
                              <td>
                                 {{#if allowTopup == 'Y'}}
                               <input type="checkbox" id="allowTopup" name="allowTopup" title="" style="width: 25px;" checked />
                                  {{#else}}
                                 <input type="checkbox" id="allowTopup" class="text ui-widget-content ui-corner-all" name="allowTopup" title="" style="width: 25px;"  />
                               {{/if}}
                             </td>
                            </tr>
<tr>
                            <td align="right">
                               <label for="volume">{{=$ctx.doI18N("form.label.plan.volume")}}</label>
                             </td>
                              <td>
                                  <select id="volume" name="volume"  title="" style="width: 145px;">
			                                           <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		                                                       {{#each volumeTypes}}
                                                                   {{#if $parent.parent.data.volume ===value}}
				                                                        <option value="{{=value}}" selected="selected">{{=value}}</option>
                                                                   {{#else}}
                                                                         <option value="{{=value}}">{{=value}}</option>
                                                                   {{/if}}
                                                               {{/each}}	
		                                          </select>
                                  <input id="units" name="units" title="" type="text" value="{{=units}}" size="10"/>
                             </td>
                            </tr>
                          </table>
                        </td>     
                    </tr> 
                  </table> 
                 </td>
               </tr>     
         </table>
	</fieldset>
</form>
</script>

	<script id="priceFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
<legend>{{=$ctx.doI18N("dialog.title.add.price")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>

<td align="right">	
		<label for="planCode">{{=$ctx.doI18N("form.label.plan.code")}}</label></td>

		<td><input id="planId" name="planCode" title="" type="text" value="{{=planCode}}" class="text ui-widget-content ui-corner-all" readonly  size="22"/></td></tr>


<tr><td align="right"><label for="serviceCode">{{=$ctx.doI18N("form.label.loan.service.code")}}</label></td>
    <td> <select id="serviceCode" name="serviceCode"  title=""  style="width: 178px;>
               <option value="None">None</option>
                  {{#each serviceData}}
                    {{#if $ctx.number($parent.parent.data.serviceId)===$ctx.number(id)}}
				   <option value="{{=serviceCode}}" selected="selected">{{=serviceCode}}--{{=serviceDescription}}</option>

          {{#else}}
                <option value="{{=serviceCode}}">{{=serviceCode}}--{{=serviceDescription}}</option>
    {{/if}}
                   {{/each}}
  
		</select></td></tr>


	<tr><td align="right">	<label for="chargeCode">{{=$ctx.doI18N("form.label.loan.charge.code")}}</label></td>
 <td><select id="chargeCode" name="chargeCode"  title=""  style="width: 178px;>
			 <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		{{#each chargeData}}

                      {{#if $ctx.number($parent.parent.data.chargeId)===$ctx.number(id)}}
					<option value="{{=chargeCode}}" selected="selected">{{=chargeDescription}}</option>
         {{#else}}
  	<option value="{{=chargeCode}}">{{=chargeDescription}}</option>
{{/if}}

  {{/each}}	
		</select>
		</td></tr>
</table>
</td>
		<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>
<td align="right"><label for="chargevariant">{{=$ctx.doI18N("form.label.loan.charge.variant")}}</label></td>
	<td><select id="chargevariant" name="chargevariant"  title="" style="width: 143px;">
			 <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		
{{#each chargevariant}}
             {{#if $ctx.number(id)===$ctx.number($parent.parent.data.chargeVariantId)}}
					<option value="{{=id}}" selected="selected" >{{=value}}</option>
    
{{#else}}
  	<option value="{{=id}}">{{=value}}</option>
{{/if}}

  {{/each}}	
		</select></td></tr>
<tr><td align="right">
<label for="discountId">{{=$ctx.doI18N("form.label.loan.discount.code")}}</label></td>
	<td><select id="discountId" name="discountId"  title="" style="width: 143px;">
			
		
{{#each discountdata}}

                           {{#if $ctx.number($parent.parent.data.discountId)===$ctx.number(id)}}
					<option value="{{=discountMasterId}}" selected="selected" >{{=discountDescription}}</option>
      
{{#else}}
  	<option value="{{=discountMasterId}}">{{=discountDescription}}</option>
{{/if}}
	{{/each}}
		</select></td></tr>
    
<tr><td align="right">
  <label for="priceregion">{{=$ctx.doI18N("form.label.price.priceregion")}}</label></td>
	<td><select id="priceregion" name="priceregion"  title="" style="width: 143px;">
               <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
              {{#each priceRegionData}}
                     {{#if $ctx.number($parent.parent.data.priceregion)===$ctx.number(id)}}
     					<option value="{{=id}}" selected="selected" >{{=priceregion}}</option>
                     {{#else}}
  	                   <option value="{{=id}}">{{=priceregion}}</option>
                    {{/if}}
	          {{/each}}
		</select>
    </td></tr>
  <tr><td align="right">   <label for="price">{{=$ctx.doI18N("form.label.price.amount")}}</label></td>
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
<td><input id="price" name="price" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=$ctx.decimal(price, 2)}}" size="17"/></td></tr>

</table>
</td></tr>
</table>
	</fieldset>
</form>
</script>

	<script id="itemListTemplate" type="text/x-jquery-tmpl">

<table id='itemstable' width='100%'>
<button id="newadditem" class="newadditem ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add Item
</span>
</button>

<thead>
	<tr>
		<th>Id</th>
		<th>Item COde</th>
		<th>Item Description</th>
		<th>Units</th>
		<th>Unit Price</th>
       <th>Warranty</th>
       <th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td> {{=id}} </td>
  	<td> {{=itemCode}} </td>
	<td>{{=itemDescription}}</td>
    <td>{{=units}}</td>
    <td>{{=$ctx.decimal(unitPrice, 4)}}</td>
  <td>{{=warranty}}</td>

<td>
		<a id='edititem{{=id}}' class='edititem' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteitem{{=id}}' class='deleteitem' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>

</tr>

{{/each}}
</tbody>
</table>
</script>

	<script id="itemFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
     <div id="formerrors"></div>
	      <fieldset>
                 <legend>{{=$ctx.doI18N("dialog.title.add.item")}}</legend>
                      <table>
		                  <tr>
			                 <td valign="top" style="padding-right: 15px;">
				                 <table>
					                  <tr>
                                         <td align="right">	
		                                      <label for="itemCode">{{=$ctx.doI18N("form.label.item.code")}}</label></td>
		                                        <td>
                                                   <input id="itemCode" name="itemCode" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=itemCode}}"   size="22"/>
                                                </td>
                                       </tr>
                                       <tr>
                                            <td align="right">
                                                     <label for="itemDescription">{{=$ctx.doI18N("form.label.loan.item.desc")}}</label>
                                            </td>
                                            <td>
                                                  <input id="itemDescription" name="itemDescription" title="" type="text" class="text ui-widget-content ui-corner-all" value="{{=itemDescription}}"   size="22"/>
                                            </td>
                                       </tr>
	                                   <tr> 
                                            <td align="right">
                                              	 <label for="chargeCode">{{=$ctx.doI18N("form.label.loan.charge.code")}}</label>
                                            </td>
                                            <td>
                                                 <select id="chargeCode" name="chargeCode"  title=""  style="width: 178px;>
			                                              <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		                                                       {{#each chargesData}}
                                                                      {{#if $parent.parent.data.chargeCode===chargeCode}}
					                                                            <option value="{{=chargeCode}}" selected="selected">{{=chargeDescription}}</option>
                                                                      {{#else}}
  	                                                                            <option value="{{=chargeCode}}">{{=chargeDescription}}</option>
                                                                      {{/if}}
                                                                {{/each}}	
		                                          </select>
		                                   </td>
                                       </tr>
			                           <tr>
                                           <td align="right">	
		                                        <label for="warranty">{{=$ctx.doI18N("form.label.item.warranty")}}</label>
                                           </td>
		                                   <td>
                                                <input id="warranty" name="warranty" class="text ui-widget-content ui-corner-all" title="" type="text" value="{{=warranty}}"   size="22"/>
                                           </td>
                                       </tr>
                                </table>
                            </td>
		                    <td valign="top" style="padding-right: 15px;">
				                <table>
					                  <tr>
                                         <td align="right">
                                              <label for="itemClass">{{=$ctx.doI18N("form.label.item.class")}}</label>
                                         </td>
	                                     <td>
                                              <select id="itemClass" name="itemClass"  title="" style="width: 149px;">
			                                         <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
                                                           {{#each itemClassData}}
                                                                   {{#if value === $parent.parent.data.itemClass}}
					                                                       <option value="{{=value}}" selected="selected" >{{=value}}</option>
                                                                   {{#else}}
  	                                                                         <option value="{{=value}}">{{=value}}</option>
                                                                    {{/if}}
                                                            {{/each}}	
		                                     </select>
                                         </td>
                                      </tr>
                                      <tr>
                                         <td align="right">
                                              <label for="units">{{=$ctx.doI18N("form.label.item.units")}}</label>
                                         </td>
	                                     <td>
                                              <select id="units" name="units"  title="" style="width: 149px;">
			                                         <option value="0">{{=$ctx.doI18N("option.subscription.first.none")}}</option>
                                                          {{#each unitData}}
                                                                 {{#if value === $parent.parent.data.units }}
					                                                    <option value="{{=value}}" selected="selected" >{{=value}}</option>
                                                                 {{#else}}
  	                                                                       <option value="{{=value}}">{{=value}}</option>
                                                                 {{/if}}
	                                                       {{/each}}
		                                       </select>
                                         </td>
                                     </tr>
                                     <tr>
                                         <td align="right"> 
                                               <label for="unitPrice">{{=$ctx.doI18N("form.label.item.price")}}</label>
                                         </td>
	                                          <input type="hidden" id="locale" class="text ui-widget-content ui-corner-all" name="locale" value="{{=$ctx.currentLocale()}}" />
                                         <td>
                                              <input id="unitPrice" name="unitPrice" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=unitPrice}}" size="18"/>
                                         </td>
                                    </tr>
                               </table>
                       </td>
                  </tr>
            </table>
	</fieldset>
</form>
</script>

	<script id="orderFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
    	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.order.details")}}</legend>
  <table>
	<tr>
		<td valign="top" style="padding-right: 15px; width:100px">
	     	<table>
    		 <tr>
               <td>
               <label for="subscription_period">{{=$ctx.doI18N("form.label.plan.name")}}</label>
                <label for="subscription_period"><font size=2px><b><i>{{=$ctx.doI18N("form.label.plan.postpaid")}}</i></b></font></label>
          
<table style="border:1px solid black;">

 {{#each plandata}}

                {{#if isPrepaid == "N"}}
                <table  width="300" border="1" class="plan_list">
                  <tr>
                    <td>
                      <table>
                        <td>
                           
                     <input type="radio" id="planCode" name="planCode" value="{{=id}}" onClick="setBillingFrequency('{{=id}}')"/></td><td>{{=planCode}}({{#each availableServices}} {{=serviceCode}}{{/each}})</td>
                           
                       <td>
                         <br/>
                      </table>
                    </td>
                  </tr>
                </table> 
              </body>
             {{/if}}
         {{/each}}

           </td>
       <div id="orderdetails">
        </tr>
       <tr>
     <td>
               <label for="subscription_period"><font size=2px><b><i>{{=$ctx.doI18N("form.label.plan.prepaid")}}</i></b></font></label>
           {{#each plandata}}

                {{#if isPrepaid == "Y"}}
                <table  width="300" border="1">
                  <tr>
                    <td>
                      <table>
                        <td>
                           
                     <input type="radio" id="planCode" name="planCode" value="{{=id}}" onClick="setBillingFrequency('{{=id}}')"/></td><td>{{=planCode}}({{#each availableServices}} {{=serviceCode}}{{/each}})</td>
                           
                       <td>
                         <br/>
                      </table>
                    </td>
                  </tr>
                </table> 
              </body>
             {{/if}}
         {{/each}}
           </td>
        </tr>  
     </table>
         </td>
         <td valign="top" style="padding-left: 5px; padding-right: 5px;">
           <table>
			 <tr>
			  	<td align="right">
           		<label for="start_date">{{=$ctx.doI18N("form.label.start.date")}}</label>
               </td>
                <td>
             	<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
	          <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	          <input id="start_date" name="start_date" title="" class="text ui-widget-content ui-corner-all datepickerfield " type="text" value="{{=$ctx.globalDate(startDate)}}"  SIZE="22""/>
               </td>
            </tr> 
            <br/>
            <tr>
	         <td align="right"><label for="contractPeriod">{{=$ctx.doI18N("form.label.plan.subscription")}}</label>
              </td>
	         <td> 
                  
         <select id="contractPeriod" name="contractPeriod"  title="" style="width: 178px;" >
            {{#each subscriptiondata}}
              {{#if $parent.parent.data.contractPeriod===Contractdata}}
					<option value="{{=id}}">{{=Contractdata}}</option>
             {{#else}}
                   <option value="{{=id}}">{{=Contractdata}}</option>
              {{/if}}
          {{/each}}	
	   </select>
           </td>
       </tr><br/>
        </div>
        </td>
       </tr>

       <tr>
     	<td align="right">
<label for="paytermCode">{{=$ctx.doI18N("form.label.billing.frequency")}}</label>
      </td>
       <td>
     <div id="frequencyDiv" name="frequencyDiv">
       <select id="paytermCode" name="paytermCode"  title=""  style="width:178px;" >
		{{#each paytermdata}}
					<option value="{{=paytermtype}}">{{=paytermtype}}</option>
       {{/each}}
     </div>
      </td>
    </tr>
     <tr>
	   <td align="right">
           <label for="anyDayAllowed">{{=$ctx.doI18N("form.label.plan.billing")}}</label></td>
		<td align="left">			
			{{#if billingcycle}}
				<input type="checkbox" id="anyDayAllowed" name="billAlign" title="" style="width: 25px;" checked=checked />
			{{#else}}
				<input type="checkbox" id="anyDayAllowed" name="billAlign" title="" style="width: 25px;" checked=checked />
		{{/if}}
      </td>
     </tr>
   </table>
</fieldset>
</form>
</script>

	<script id="allBillingFreqsDropdownTemplate" type="text/x-jquery-tmpl">

<form id="entityform">
      <div id="formerrors"></div>
             <select id="paytermCode" name="paytermCode"  title=""  style="width:178px;" >
		        {{#each paytermdata}}
					<option value="{{=paytermtype}}">{{=paytermtype}}</option>
            {{/each}}

</form>

</script>
	<script id="paymentFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	          <input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	              <fieldset> 
		                <legend>{{=$ctx.doI18N("form.legend.new.payment")}}</legend>

 <div style="position:fixed;right:435px;"> 
					 <table>
                                   <tr class = "cheque_class">
				                             <td align="left">
     		                                 <label for="chequeNo">{{=$ctx.doI18N("form.label.chequeNo")}}</label>
                                             </td>
				                             <td>
						                      <input id="chequeNo" name="chequeNo" title="chequeNumber" class="text ui-widget-content ui-corner-all" type="text" value="{{=chequeNo}}" size="18" /> 
                                              </td>
                                              </tr>
                                   <tr class = "cheque_class">
					                          <td align="left">
     		                                  <label for="chequeDate">{{=$ctx.doI18N("form.label.chequeDate")}}</label>
					                          </td>
				                        <td>
                                   	 	 <input id="chequeDate" name="chequeDate" title="" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint" type="text" value="{{=$ctx.globalDate(chequeDate)}}" size="18"  /> 
                                        </td>
                                </tr>
                               <tr class = "cheque_class">
                                	<td align="left">
     		                               <label for="bankName">{{=$ctx.doI18N("form.label.bankName")}}</label>
                                      </td>
				       <td>
						<input id="bankName" name="bankName" title="" type="text" class="text ui-widget-content ui-corner-all" value="{{=bankName}}" size="18" /> 
                                      </td>
                               </tr>
                               <tr class = "cheque_class">
					<td align="left">
						<label for="branchName">{{=$ctx.doI18N("form.label.branchName")}}</label>
                                      </td>
                                      <td>
						<input id="branchName" name="branchName" title="" type="text" class="text ui-widget-content ui-corner-all"  value="{{=branchName}}" size="18" /> 
                                      </td>
                                  <br/>
                               </tr>
							   </table>
				 </div>
			                 <table>
				                 <tr>
 	                                  <input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
			                         <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		                                  <td align="left">
                                               <label for="payment_date">{{=$ctx.doI18N("form.label.payment.date")}}</label>
                                          </td>
		                                  <td>	
                                               <input id="paymentDate" name="paymentDate" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint"  title="" type="text" value="{{=$ctx.globalDate(paymentDate)}}" size="18"/>
                                          </td>
                                 </tr>
                                 <tr>
                                    	  <td align="left"> 	
                                                 <label for="paymentCode">{{=$ctx.doI18N("form.label.payment.type")}}</label>
                                          </td>
						                  <td>
                                                <select id="paymentCode" name="paymentCode"  title="" style="width: 150px;>
						                                <option value="1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
                                                               {{#each data}}
								                                     <option value="{{=id}}">{{= mCodeValue}}</option>
                                                               {{/each}}
					                            </select>
                                         </td>
                                 </tr>
                                  
                               <tr>
					<td align="left">
						<label for="amountPaid">{{=$ctx.doI18N("form.label.amount")}}</label>
                                      </td>
                                      <td>
						<input id="amountPaid" name="amountPaid" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=amountPaid}}" size="18" /> 
                                      </td>
                               </tr>
                               <tr>
					<td>
						<input type="hidden" value="{{=isChequeSelected}}" name="isChequeSelected" class="text ui-widget-content ui-corner-all"  id="isChequeSelected"/></tr>
					</td>	
                               <tr>
                                	<td align="left">
     		                                 <label for="receiptNo">{{=$ctx.doI18N("form.label.receiptNo")}}</label>
                                      </td>
				                       <td>
                                 			<input id="receiptNo" name="receiptNo" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=receiptNo}}" size="18" /> 
                                      </td>
                                   <br/>
                               </tr>
                                   
			                    <tr>
                            	    <td align="left" valign="top">			
                                            <label for="remarks">{{=$ctx.doI18N("form.label.payment.notes")}}</label>
                                     </td>
	                                 <td>
                                         <textarea rows="3" cols="55" id="note" name="remarks"  class="text ui-widget-content ui-corner-all" cssClass="text ui-widget-content ui-corner-all">{{=remarks}}</textarea> 
                                    </td>
                              </tr>
			         </table>
                  </br>
	        </fieldset>
	</form>
</script>

	<script id="addadjustmentFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	  <fieldset>
	        <legend>{{=$ctx.doI18N("Add Adjustment")}}</legend>
                <table>
                       <tr>
                          <td align="left">
                                     <input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
			                         <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
                                     <label for="adjustment_date">{{=$ctx.doI18N("Adjustment Date:")}}</label>
 	                      </td>
                          <td>
	                              <input id="adjustment_date" name="adjustment_date" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=$ctx.globalDate(adjustment_date)}}" size="20" class="datepickerfieldnoconstraint" />
                         </td>
                     </tr>   
                     <tr>
                         <td align="left"> 
                              <label for="adjustment_code">{{=$ctx.doI18N("adjustment Code:")}}</label>  
                        </td>
                        <td>
					         <select id="adjustment_code" name="adjustment_code" title=""  >
						           {{#each data}}
								           <option value="{{=id}}">{{=adjustment_code}}</option>
				                  {{/each}}
					       </select>  
                      </td>
                 </tr>
                 <tr>
                     <td align="left">
                             <label for="amount_paid">{{=$ctx.doI18N("Adjustment Amount:")}}</label>
                     </td>
                     <td>
		                    <input id="amount_paid" name="amount_paid" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=$ctx.decimal(amount_paid, 2)}}" size="9"/>    
                            <select id="adjustment_type" name="adjustment_type" title=""  >
						             {{#each datass}}
                                             {{#each discountOptions}}
								                     <option value="{{=discountType}}">{{=discountType}}</option>
				                            {{/each}}
                                      {{/each}}
                     </td>
                </tr>
                <tr>
                    <td>
       	               <tr>	 
                          <td align="left" valign="top">		
                                  <label for="remarks">{{=$ctx.doI18N("form.label.payment.notes")}}</label>
                          </td>
	                      <td>
                                   <textarea rows="3" cols="40" id="note" name="Remarks" cssClass="text ui-widget-content ui-corner-all">{{=Remarks}}</textarea>
                          </td>
                </tr>
         </table>
	</fieldset>
</form>
</script>
	<script id="invoiceFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
          <fieldset>
                <table>
                        <tr>
                           <td align="right">
                                  <input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
                                  <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
                                  <label for="startDate">{{=$ctx.doI18N("form.label.processing.date")}}</label>
                          </td>
                           <td>
                                  <input id="systemDate" name="systemDate"  title="" type="text" value="{{=$ctx.globalDate(systemDate)}}" size="20" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint" />
                          </td>
                       <tr>
                </table>
   </fieldset>
</form>
</script>
	<script id="billStatementFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	           <fieldset>
                       <table>
                            <tr>
                               <td align="right">
                                        <input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
			                              <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
                                        <label for="adjustment_date">{{=$ctx.doI18N("Due Date:")}}</label>
 	                           </td>
                               <td>
                                      <input id="adjustment_date" name="dueDate" title="" type="text"  value="{{=dueDate}}" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint" />
                               </td>
                          </tr>   
                           <tr>
                               <td align="right" valign="top">		
                                      <label for="message">{{=$ctx.doI18N("Promotional Message:")}}</label>
                              </td>
                              <td>
                                       <textarea rows="3" cols="45" id="note" name="message" class="text ui-widget-content ui-corner-all" cssClass="text ui-widget-content ui-corner-all">{{=message}}</textarea>
                             </td>
                       </tr>
                  </table>
	</fieldset>
</form>
</script>

	<script id="ticketmasterFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
     <div id="formerrors"></div>
	       <fieldset>
		           <legend>{{=$ctx.doI18N("dialog.title.add.ticket")}}</legend>
                         <table>
		                      <tr>
			                      <td valign="top" style="padding-right: 15px;">
				                        <table>
					                            <tr>
                                                    <td align="right">
		                                                   <input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
	                                                       <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		                                                    <label for="ticketDate">{{=$ctx.doI18N("form.label.ticket.date")}}</label>
                                                     </td>
                                                     <td>
		                                                   <input id="startDate" name="ticketDate" title="" type="text" value="{{=$ctx.globalDate(ticketDate)}}" size="19" class="datepickerfieldnoconstraint" />
                                                     </td>
                                                  </tr>
	                                               <tr>
		                                               <td align="right">
                                                                <label for="problemCode">{{=$ctx.doI18N("form.label.ticket.category")}}</label>
                                                       </td>
                                                        <td> 
                                                              <select id="problemCode" name="problemCode"  title="" style="width: 160px;">
			                                                  <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		                                                              {{#each problemsDatas}}
                                                                               {{#if $ctx.number($parent.parent.data.status)===$ctx.number(id)}}
					                                                                        <option value="{{=problemCode}}" selected="selected">{{=problemDescription}}</option>
                                                                                {{#else}}
     	                                                                                    <option value="{{=problemCode}}">{{=problemDescription}}</option>
                                                                                {{/if}}
                                                                      {{/each}}	
		                                                    </select>
                                                        </td>
                                                  </tr>
                                           </table>
                                     </td>
                                    <td valign="top" style="padding-left: 5px; padding-right: 5px;">
                                         <table>
					                           <tr>
				                                   <td align="right">
                                                         <label for="priority">{{=$ctx.doI18N("form.label.ticket.priority")}}</label>
                                                                </td>
	                                                            <td>
                                                                    <select id="priority" name="priority"  title="">
			                                                              <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		                                                                         {{#each priorityType}}
					                                                                       <option value="{{=value}}" selected="value">{{=value}}</option>
                                                                                 {{/each}}	
		                                                            </select>
                                                                </td>
                                                  </tr>
                                                  <tr>   
                                                       <td align="right">
                                                                <label for="priority">{{=$ctx.doI18N("form.label.ticket.assignedto")}}</label>
                                                       </td>
	                                                   <td>
                                                              <select id="assignedTo" name="assignedTo"  title="">
			                                                        <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		                                                                  {{#each usersData}}
					                                                               <option value="{{=id}}" selected="value">{{=userName}}</option>
                                                                          {{/each}}	
		                                                      </select>
                                                        </td>
                                                  </tr>
                                        </table>
                                   </td>
                             </tr>
                      </table>
                      <table>
                           <tr>
                                <td>
                                    <tr>
                                       <td align="right" valign="top">		
                                            <label for="description">{{=$ctx.doI18N("form.label.ticket.Description")}}</label>
                                      </td>
                                      <td>
                                           <textarea rows="3" cols="53" id="note" name="description" cssClass="text ui-widget-content ui-corner-all">{{=description }}</textarea>
                                     </td>
                               </tr>
                      </table>
	         </fieldset>
</form>
</script>
	<script id="orderFormListTemplate" type="text/x-jquery-tmpl">
<div id="loanactions">
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">

  <button id="update" class="order_actions" style="width:65;height:65; cursor:pointer" onclick="updateOrderPrice('{{=clientId}}');">{{=$ctx.doI18N("link.action.editprice")}}</button>
<button id="cancelOrder" class="order_actions" style="width:65;height:65; cursor:pointer" onclick="cancelOrder('{{=clientId}}');">{{=$ctx.doI18N("link.action.cancel")}}</button>
<button id="reconnectOrder" class="order_actions" style="width:65;height:65; cursor:pointer" onclick="reconnectOrder('{{=clientId}}');">{{=$ctx.doI18N("link.action.orderreconnect")}}</button>
<button id="topup" class="order_actions" style="width:65;height:65; cursor:pointer" onclick="renewalOrder('{{=clientId}}');">{{=$ctx.doI18N("link.action.topup")}}</button>
<button id="disconnectOrder" class="order_actions" style="width:65;height:65; cursor:pointer" onclick="disconnectOrder('{{=clientId}}');">{{=$ctx.doI18N("link.action.orderdisconnect")}}</button>
<button id="renewalOrder" class="order_actions" style="width:65;height:65; cursor:pointer" onclick="renewalOrder('{{=clientId}}');">{{=$ctx.doI18N("link.action.renewalorder")}}</button>
</span>
		</td>
	</table>
</div>
<br/>
<table id='orderstable' width='100%'>

<thead>
	<tr>
        <th>&nbsp;</th>
		<th>Id</th>
		<th>Plan Code</th>
        <th>Contract Period</th>
		<th>Start Date</th>
        <th>End Date</th>
        <th>Price</th>
        <th>User Action</th>        
        <th>Status</th> 

		
	</tr>
</thead>
<tbody>
{{#each clientOrders}}
  <tr>
     <td><input type="radio" id="selectedorder{{=id}}" name="selectedorder" value="{{=id}}"/></td>
     <td><a id='orderdetails{{=id}}' class='orderdetails' href='#' style='margin-right: 5px;'>{{=id}}</a></td>
	 <td>{{=plan_code}}</td>
     <td>{{=contractPeriod}}</td>
     <td>{{=$ctx.globalDate(startDate)}}</td>
     <td>{{=$ctx.globalDate(endDate)}}</td>
     <td>{{=$ctx.decimal(price,2)}}</td>
     <td>{{=userAction}}</td>
     <td>{{=status}}</td>
  </tr>
{{/each}}

</tbody>
</table>
</script>
	<script id="billStatmentFormListTemplate" type="text/x-jquery-tmpl">
<table id='billstable' width='100%'>
<thead>
	<tr>
		
		<th>id</th>
        <th>Bill Date</th>
		 <th>Due Date</th>
        <th>Amount</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
    
<td>{{=$ctx.globalDate(billDate)}}</td>
<td>{{=$ctx.globalDate(dueDate)}}</td>
	<td>{{=amount}}</td>
	<td>
      
  <a id="printpdf{{=id}}"  class='printpdf' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("Download Pdf")}}</a>
       <a href="https://www.sandbox.paypal.com/cgi-bin/webscr?rm=2&cmd=_xclick&business=lingala.ashokreddy@gmail.com&item_name=first&amount=30" target="_blank" 
                >{{=$ctx.doI18N("Paypal Payment")}} </a> &nbsp;  
	
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="transactionFormListTemplate" type="text/x-jquery-tmpl">
<table id='financialTransactionstable' width='100%'>
<thead>
	<tr>
		
		<th>Transaction Id</th>
        <th>Transaction Date</th>
		<th>Transaction Type</th>
        <th>Credit Amount</th>
        <th>Debit Amount</th>
      
		
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
 {{#if transactionType === transaction}}
<td> <a id='invoicedetails{{=transactionId}}' class='invoicedetails' href='#' style='margin-right: 5px;'>{{=transactionId}}</a></td>
{{#else}}
	<td>{{=transactionId}}</td>
{{/if}}
<td>{{=$ctx.globalDate(transDate)}}</td>
<td>{{=transactionType}}</td>
<td>{{=$ctx.decimal(creditAmount,2)}}</td>
<td>{{=$ctx.decimal(amount,2)}}</td>
</tr>
{{/each}}
</tbody>
</table>
</script>
	<script id="oneTimeSaleListTemplate" type="text/x-jquery-tmpl">

<table id='onetimelisttable' width='100%'>

<button id="newadditem" class="newadditem ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add 
</span>
</button>

<thead>
	<tr>
		<th>Id</th>
		<th>Sale Date</th>
		<th>Item Code</th>
		<th>Charge Code</th>
		<th>Quantity</th>
       	<th>Total Price</th>
 		<th>Allocate</th>
	</tr>
</thead>
<tbody>
{{#each oneTimeSaleData}}
<tr>
{{#if flag}}
    <td><a id='allocationdetails{{=id}}' class='allocationdetails' href='#' style='margin-right: 5px;'>{{=id}}</a></td>
{{#else}}
	<td> {{=id}} </td>
{{/if}}
    <td>{{=$ctx.globalDate(saleDate)}}</td>
	<td> {{=itemCode}} </td>
	<td>{{=chargeCode}}</td>
    <td> {{=quantity}} </td>
	<td>{{=$ctx.decimal(totalPrice, 4)}}</td>
	<td>
		{{#if flag}}
			{{#if itemClass=='HARDWARE'}}
        	{{=$ctx.doI18N("Hardware Allocated")}}
			{{/if}}
       	{{#else}}
			{{#if itemClass=='HARDWARE'}}
        	<a id="allocateHardware{{=id}}" class="allocateHardware" href="#" style="margin-right: 5px;">{{=$ctx.doI18N("Allocate Hardware")}}</a>
			{{/if}}    
		{{/if}}
	</td>
</tr>

{{/each}}
</tbody>
</table>
<br>
<table id='eventorderdetails' width='100%'>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.eventorder.details")}}</legend>
</fieldset>
<thead>
	<tr>
		
	   <th><b>Id</b></th>
       <th><b>Event Name</b></th>
	   <th><b>Booked Date</b></th>
       <th><b>Price</b></th>
       <th><b>Status</b></th>
	</tr>
</thead>
<tbody>

{{#each eventOrdersData}}
<tr>
	<td>{{=id}}</td>
    <td>{{=eventName}}</td>
    <td>{{=$ctx.globalDate(bookedDate)}}</td>
    <td>{{=$ctx.decimal(eventPrice, 4)}}</td>
    <td>{{=status}}</td>
</tr>
{{/each}}

</tbody>
</table>
</script>

	<script id="allocateHardwareFormListTemplate" type="text/x-jquery-tmpl">

	<form id="entityform">
	
    <div id="formerrors" style="color:red"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("Assign Serial Number")}}</legend>

<table>
	<tr>
		<td valign="top" style="padding-right: 15px;">
			<table id="appendSerialNumberInputField">
				
				<tr>
				<td align="right">
					<!-- <label for="itemMasterId">{{=$ctx.doI18N("ItemmasterId")}}</label> -->
				</td>
				<td>
                    <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
					<input type="hidden" id="itemMasterId" name="itemMasterId" title=""  value="{{=itemMasterId}}" size="22"/>
				</td>
				</tr>
                <tr>
               	<td align="right">
					<!-- <label for="quantity">{{=$ctx.doI18N("Quantity")}}</label> -->
               	</td>
               	<td>
		        	<input type="hidden" id="quantity" name="quantity" title="" type="text" value="{{=quantity}}" size="22"/>
             	</td> 
				</tr>
				           
			</table>
 		</td>
	</tr>
</table>
</fieldset>
</form>

</script>


	<script id="ticketFormListTemplate" type="text/x-jquery-tmpl">
<table id='ticketstable' width='100%'>
<thead>
	<tr>
		
		<th>Id</th>
       <th>Priority</th>
        <th>Ticket Date</th>
         <th>problem Code</th> 
		        <th>Status</th>
          <th>Assigned TO</th>
        <th>Last Comment</th>
<th>&nbsp</th>

	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td><a id='historyticket{{=id}}' class='historyticket' href='#' style='margin-right: 5px;' >{{=id}}</a></td>
<td>{{=priority}}</td>
 <td>{{=$ctx.globalDate(ticketDate)}}</td>
<td>{{=problemDescription}}</td>
<td>{{=status}}</td>
<td>{{=userName}}</td>
<td>{{=lastComment}}</td>

<td>    
   {{#if status ==="CLOSED"}}
		{{=$ctx.doI18N("link.action.edit")}}
		{{=$ctx.doI18N("link.action.close")}}
	{{#else}}
		<a id='editticket{{=id}}' class='editticket' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.edit")}}</a>
		<a id='closeticket{{=id}}' class='closeticket' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.close")}}</a>
    {{/if}}
	
	</td>
</tr>
{{/each}}
</tbody>

<tfoot>
<tr>
<th><input type=text size="10" name=Id     class=search_init /></th>
<th><input type=text  name=ticketDate    class=search_init /></th>
<th><input type=text name=priority  class=search_init /></th>
<th><input type=text  name=Status    class=search_init /></th>
<th><input type=text  name=assignedTO    class=search_init /></th>
<th><input type=text  name=Status    class=search_init /></th>
<th><input type=text  name=assignedTO    class=search_init /></th>
 	<th>&nbsp;</th>
</tr>
</tfoot>
</table>
</script>

	<script id="orderPriceFormListTemplate" type="text/x-jquery-tmpl">
<table id='orderpricetable' width='100%'>
<thead>
	<tr>
	  <th><b>Id</b></th>
        <th><b>Service</b></th>
		 <th><b>Charge Code</b></th>
        <th><b>Duration Type</b></th>
          <th><b>Price</b></th>

		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>

{{#each orderPriceData}}
<tr>
	 <td>{{=id}}</td>
	 <td> {{=chargeCode}}</td>
     <td>{{=chargeType}}</td>
     <td>{{=durationType}}</td>
        <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	 <td>
        <input id="price{{=id}}" name="price" title="" type="text" value="{{=$ctx.decimal(price, 4)}}" size="10"/></td>
	 <td><a id='updateprice' class='updateprice' href='#' style='margin-right: 5px;"color: #CC0000" ' onClick="updatePrice({{=id}},{{=clientId}})">{{=$ctx.doI18N("link.action.editprice")}}</a></td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="orderDetailsFormListTemplate" type="text/x-jquery-tmpl">
<table id='orderpricetable' width='100%'>
<thead>
	<tr>
		
	   <th><b>Id</b></th>
       <th><b>Service</b></th>
	   <th><b>Charge Code</b></th>
       <th><b>Bill StartDate</b></th>
       <th><b>Bill EndDate</b></th>
       <th><b>Invoice TillDate</b></th>
        <th><b>Billing Cycle</b></th>  
       <th><b>Price</b></th>
			
	</tr>
</thead>
<tbody>

{{#each orderPriceData}}
<tr>
	<td>{{=id}}</td>
	 <td> {{=chargeCode}}</td>
<td>{{=chargeType}}</td>
<td>{{=$ctx.globalDate(billStartDate)}}</td>
<td>{{=$ctx.globalDate(billEndDate)}}</td>
<td>{{=$ctx.globalDate(invoiceTillDate)}}</td>
<td>{{=billingCycle}}</td>
<td>{{=price}}</td>
</tr>
{{/each}}

</tbody>
</table>
<br>
<table id='generictable' width='100%'>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.order.history")}}</legend>
</fieldset>
<thead>
	<tr>
		
	   <th><b>Id</b></th>
       <th><b>Transaction Date</b></th>
	   <th><b>Actual Date</b></th>
       <th><b>ProcessOrder Id</b></th>
       <th><b>Transaction Type</b></th>
	</tr>
</thead>
<tbody>

{{#each orderHistory}}
<tr>
	<td>{{=id}}</td>
    <td>{{=$ctx.globalDate(transactionDate)}}</td>
    <td>{{=$ctx.globalDate(actualDate)}}</td>
    <td>{{=PrepareRequsetId}}</td>
    <td>{{=transactioType}}</td>
</tr>
{{/each}}

</tbody>
</table>
</script>

	<script id="invoceDetailsFormTemplate" type="text/x-jquery-tmpl">
<table id='orderpricetable' width='100%'>
<thead>
	<tr>
        <th><b>Charge Id</b></th>
		<th><b>Charge Type</b></th>
		<th><b>Charge Description</b></th>
        <th><b>Charge Start Date</b></th>
        <th><b>Charge End Date</b></th>
		<th><b>Charge Amount</b></th>
	</tr>              
</thead>
<tbody>
{{#each transactionsDatas}}
  {{#if chargeType!="Tax" }}
<tr>     
     <td>{{=chargeId}}</td>
	<td>{{=chargeType}}</td>
	<td>{{=chargeDescription}}</td>
    <td>{{=$ctx.globalDate(chargeStartDate)}}</td>
    <td>{{=$ctx.globalDate(chargeEndDate)}}</td>
    <td>{{=$ctx.decimal(chargeAmount, 4)}}</td>
</tr>
{{/if}}
{{/each}}
</tbody>
</table>
<br>
<table id='generictable' width='100%'>
<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.chagrge.tax")}}</legend>
</fieldset>
<thead>
	<tr>
		<th><b>Charge Id</b></th>
		<th><b>Tax Description</b></th>
        <th><b>Tax Amount</b></th>
         
		</tr>              
</thead>
<tbody>
{{#each transactionsDatas}}

     {{#if chargeType ==="Tax" }}
 <tr>
	<td>{{=chargeId}}</td>
	<td>{{=chargeDescription}}</td>
    <td>{{=$ctx.decimal(taxAmount, 4)}}</td>
</tr>
{{/if}}
{{/each}}
</tbody>
</table>
</script>

	<script id="tickethistoryFormTemplate" type="text/x-jquery-tmpl">


<table id='generictable' width='100%' >
   <thead>
	<tr>
		<th>Created Date</th>
		<th>Assign To</th>
		<th>Attachments</th>
		<th>Comments</th>
		<th>Problem Description</th>
  </tr>
	</thead>
	<tbody>
	{{#each masterData}}
	<tr>
		<td>{{=$ctx.globalDate(createdDate)}}</td>
		<td>{{=assignedTo}}</td>
		<td><a id='attachedlink{{=id}}' class='attachedlink' href='#' style='margin-right: 5px;'  onclick="attachedlink('{{=id}}'); return false;">{{=attachedFile}}</a></td>
		<td>{{=statusDescription}}</td>
		<td>{{=problemDescription}}</td>
	</tr>
	{{/each}}
	</tbody>
  
</table>
</script>
	<script id="oneTimeSaleFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.add.item")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>
    	               	<td align="right">
                         <label for="itemCode">{{=$ctx.doI18N("form.label.item.code")}}</label>
                        </td>
                        <td>
	                    <select id="itemId" name="itemId"  title="" style="width: 179px;">
			            <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		             {{#each itemDatas}}
                                      {{#if $ctx.number($parent.parent.data.id)===$ctx.number(id)}}

			                	<option value="{{=id}}" selected="selected">{{=itemCode}}</option>
                        {{#else}}
                            <option value="{{=id}}">{{=itemCode}}</option>
                       {{/if}}
                     {{/each}}	
		             </select>

                    <td>
                </tr>
				<tr>
     				<td align="right">
                     <label for="quantity">{{=$ctx.doI18N("form.label.item.quantity")}}</label>
                  </td>
                 <td>
              <input id="quantity" name="quantity" title="" type="text"  class="text ui-widget-content ui-corner-all" value="{{=$ctx.decimal(quantity, 4)}}" size="22"/>
              </td>
           </tr>
 <tr>
               <td align="right">

		<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
	   <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		<label for="saleDate">{{=$ctx.doI18N("form.label.sale.date")}}</label>

               </td>
               <td>
		         <input id="saleDate" name="saleDate" title="" type="text" value="{{=$ctx.globalDate(saleDate)}}" size="22" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint" />

             </td> 
</tr>            
</table>
  </td>
       <td valign="top" style="padding-left: 5px; padding-right: 5px;">
               <table>
					<tr>
				     <td align="right">
                     <label for="chargeCode">{{=$ctx.doI18N("form.label.item.chargecode")}}</label>

                    </td>
                 	<td> 
                  <input id="chargeCode" name="chargeCode" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=chargeCode}}" Readonly size="22"/>
               </td>
               </tr>
               <tr>
                 <td align="right">
                  <label for="totalprice">{{=$ctx.doI18N("form.label.item.totalprice")}}</label>
               </td>
              <td>
               <input id="totalPrice" name="totalPrice" title="" type="text" class="text ui-widget-content ui-corner-all"  value="{{=$ctx.decimal(totalPrice, 4)}}" Readonly size="22"/>
	         </td>
           </tr>
            <tr>
                            <td align="right">
                           <label for="unitPrice">{{=$ctx.doI18N("form.label.item.unitprice")}}</label>
                      </td>
                      <td>
                     <input id="unitPrice" name="unitPrice" title="" type="text" class="text ui-widget-content ui-corner-all" value="{{=$ctx.decimal(unitPrice, 4)}}"  Readonly size="22"/>
	             </td>
           </tr>
           <tr>
                <td align="right">
                      <label for="discountId">{{=$ctx.doI18N("form.label.loan.discount.code")}}</label>
               </td>
	           <td>
                      <select id="discountId" name="discountId"  title="" style="width: 177px;">
                             {{#each discountMasterDatas}}
                                     {{#if $ctx.number($parent.parent.data.discountId)===$ctx.number(id)}}
					                      <option value="{{=discountMasterId}}" selected="selected" >{{=discountDescription}}</option>
                                    {{#else}}
  	                                      <option value="{{=discountMasterId}}">{{=discountDescription}}</option>
                                    {{/if}}
	                         {{/each}}
		            </select>
             </td>
        </tr>
	</table>
   </td>
  </tr>
</table>
</fieldset>
</form>

</script>

	<script id="ticketDetailFormTemplate" type="text/x-jquery-tmpl">

<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
           <td valign="top" style="padding-right: 15px;">
	         <table>
		          <tr>
                    <td>
                       <label for="problemCode">{{=$ctx.doI18N("form.label.ticket.status")}}</label>
                    </td>
                    <td>
      	               <select id="status" name="status"  title="">
					        {{#each statusType}}
      					         <option value="{{=statusCode}}" selected="selected">{{=statusDescription}}</option>
                             {{/each}}	
		            </select>
                </td>
            </tr>
         </table>
       </td>
       <td valign="top" style="padding-left: 140px; padding-right: 1px;">
           <table>
               <tr>
                  <td>
                       <label for="assignedTo">{{=$ctx.doI18N("form.label.ticket.assignedto")}}</label>
                  </td>
	              <td>
                       <select id="assignedTo" name="assignedTo"  title="">
				          {{#each usersData}}
                               {{#if $ctx.number($parent.parent.data.userId)===$ctx.number(id)}}
					                <option value="{{=id}}" selected="selected">{{=userName}}</option>
                               {{#else}}
	                                <option value="{{=id}}">{{=userName}}</option>
                              {{/if}}
                         {{/each}}	
		             </select>
                 </td>
              </tr>
         </table>
       </td>
     </tr>	
</table>
<table>
		<tr>
			<td>
				<label for="comments">{{=$ctx.doI18N("label.comments")}}</label>
				<textarea cols="70" rows="5" id="description" name="comments">{{=comments}}</textarea></td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.upload.attachments")}}</label>
				<input type="file" name="file" id="file" size="73"></input>
			</td>
		</tr>


	</table>
 </form>

</script>

	<script id="ticketclosedFormTemplate" type="text/x-jquery-tmpl">

<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
           <td align="right">
                 <label for="problemCode">{{=$ctx.doI18N("form.label.ticket.status")}}</label>
           </td>
           <td>
      	     <select id="status" name="status"  title="">
					{{#each statusType}}
      					<option value="{{=statusCode}}" selected="selected">{{=statusDescription}}</option>
                    {{/each}}	
		         </select>
            </td>
        </tr>
       <tr>
      <td align="right">
    	<label for="resolutionDescription">{{=$ctx.doI18N("label.resolutionDescription")}}</label>
       </td>
	   <td>
      	<textarea cols="65" rows="5" id="resolutionDescription" name="resolutionDescription">{{=comments}}</textarea></td>
</td></tr>

</table>
 </form>

</script>
	<script id="uploadXlsTemplate" type="text/x-jquery-tmpl">
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   		<button id="addxlsfile{{=clientId}}">{{=$ctx.doI18N("button.file.add")}}</button>
			</span>
		</td>
	</table>
	<hr/>
	<table style="vertical-align: top;width: 100%">
		{{#each crudRows}}
				<tr>
					<td>{{=$ctx.doI18N("label.name")}}</td>
					<td>{{=name}}</td>
				</tr>
				<tr>
				   	<td><label for="description">{{=$ctx.doI18N("label.description")}}</label></td>
					<td><textarea readonly="true" id="description" name="description" cols="75" rows="5">{{=description}}</textarea></td>
					<td>
						<span id="modifycellToolbar" class="ui-widget-header ui-corner-all">
							<button id="downloadclientdocument{{=id}}">{{=$ctx.doI18N("link.action.download")}}</button>
					   		<button id="editclientdocument{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</button>
					   		<button id="deleteclientdocument{{=id}}">{{=$ctx.doI18N("link.action.delete")}}</button>
						</span>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.filename")}}</td>
					<td>{{=fileName}}</td>
				</tr>
				<tr>
					<td colspan="2">
						<hr/>
					</td>
				</tr>
		{{/each}}
	</table>
</script>

	<script id="uploadxlsFileFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
	<div id="formerrors"></div>
	<TABLE align="center">
		<tr>
           <td>
              <label for="name">{{=$ctx.doI18N("label.name")}}</label>
              <select id="status" name="status"   onChange="changeStatus()" title="" style="width: 180px;">
                  <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
                 <option value="Hardware Items">Hardware Items</option>
                 <option value="Adjustments">Adjustments</option>
                 <option value="Payments">Payments</option>
             </select> 
           </td>

           <td align="left">
                <div id="adj">Format:</div>
          </td>
        </tr>
	    <tr>
		  <td>
				<label for="description">{{=$ctx.doI18N("label.description")}}</label>
				<textarea cols="75" rows="5" id="description" name="description">{{=description}}</textarea>
		  </td>
	   <tr>
       <tr>
		   <td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.upload.browse")}}</label>
				<input type="file" name="file" id="file" size="65" ></input>
		   </td>
		</tr>
	</table>
 </form>
</script>

	<script id="uploadStatusFormListTemplate" type="text/x-jquery-tmpl">
<table id='uploadstatustable' width='100%'>
	<div id="formerrors"></div>
	<button id="addxlsfile{{=clientId}}" class="myclass">{{=$ctx.doI18N("button.xls.add")}}</button>
<thead>
	<tr>
		<th>Id</th>
		<th>Upload Process</th>
        <th>Upload FilePath</th>
        <th>Process Date</th>
		 <th>Process Status</th>
        <th>Process Records</th>
         <th>Unprocess Records</th>
          <th>Error Message</th>

		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
   <td>{{=id}}</td>
   <td>{{=uploadProcess}}</td>
   <td>{{=uploadFilePath}}</td>
   <td>{{=$ctx.globalDate(processDate)}}</td> 
   <td><div id="status{{=id}}">{{=processStatus}}</div></td>
   <td>{{=processRecords}}</td>
   <td>{{=unprocessRecords}}</td>
   <td>{{=errorMessage}}</td>
   <td>
         {{#if flag}}
          {{=$ctx.doI18N("Update Status")}}
       {{#else}}
            <a id="uploadStatusUpdate{{=id}}"  class='uploadStatusUpdate' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("Update Status")}}</a>
       {{/if}}
   </td>
</tr>
{{/each}}
</tbody>
</table>
</script>
<script id="inventoryItemListTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
<button id="newinventoryadditem" class="newinventoryadditem ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add Item
</span>
</button>

<table id='inventorylisttable' width='100%'>

<thead>
	<tr>
		<tr>
		<th>Id</th>
		<th>Item Description</th>
		<th>SerialNo</th>
		<th>GrnId</th>
		<th>Supplier</th>
       <th>Quality</th>
       <th>Status</th>
	   <th>Allocated</th>
	</tr>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td> {{=id}} </td>
	<td> {{=itemDescription}} </td>
	<td> {{=serialNumber}} </td>
	<td> {{=grnId}} </td>
	<td> {{=supplier}} </td>
	<td> {{=quality}} </td>
	<td> {{=status}} </td>
	<td> {{#if clientId<=0}}No{{#else}}Yes{{/if}}</td>
</tr>

{{/each}}
</tbody>
</table>
</form>
</script>

<script id="inventoryItemFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
	
    <div id="formerrors" style="color:red"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.view.inventoryitem")}}</legend>

<table>
	<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>
					
				<tr>
				<td align="right">
					<label for="id">{{=$ctx.doI18N("form.label.item.id")}}</label>
				</td>
				<td>
                    <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
				
					<select id="id" name="id"  title="" style="width: 178px;" >
			            	<option value="">{{=$ctx.doI18N("option.grnid.first.choice")}}</option>
                            {{#if id}}
								{{#if $parent.parent.parent.data.id == id}}
									<option value="{{=id}}" selected="selected">{{=id}}</option>
								{{#else}}
									<option value="{{=id}}">{{=id}}</option>
								{{/if}}
							{{/if}}		
		                </select>
				</td>
				</tr>
                <tr>
               	<td align="right">
					<label for="purchaseDate">{{=$ctx.doI18N("form.label.item.purchasedate")}}</label>
               	</td>
               	<td>

		        	<input id="purchaseDate" name="purchaseDate" title="" type="text" value="{{=$ctx.globalDate(purchaseDate)}}" size="22" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint" />
					<input type="hidden" value="dd MMMM yyyy" name="dateFormat" id="dateFormat">
             	</td> 
				</tr>
				<tr>
				<td align="right">
					<label for="supplierId">{{=$ctx.doI18N("form.label.item.supplierid")}}</label>
				</td>
				<td>
					<input type="hidden" id="supplierId" name="supplierId"  title="" value="{{=supplierId}}" size="22" disabled/>
					<input type="text" id="supplierName" name="supplierName"  title="" value="{{=supplierName}}" class="text ui-widget-content ui-corner-all" size="22" disabled/>
				</td>
				</tr>            
			</table>
 		</td>
       	<td valign="top" style="padding-left: 5px; padding-right: 5px;">
        	<table>
				<tr>
				<td align="right">
					<label for="itemDescription">{{=$ctx.doI18N("form.label.item.itemmasterdescription")}}</label>
				</td>
				<td>
					<input type="text" id="itemDescription" name="itemDescription" value="{{=itemDescription}}" size="22" class="text ui-widget-content ui-corner-all" disabled/>
				</td>
				</tr>
				<tr>
				<td align="right">
					<label for="orderdQuantity">{{=$ctx.doI18N("form.label.item.orderdquantity")}}</label>
				</td>
				<td>
					<input type="text" id="orderdQuantity" name="orderdQuantity" value="{{=orderdQuantity}}" size="22"  class="text ui-widget-content ui-corner-all orderdQuantity" disabled/>
				</td>
				</tr>
				<tr>
					<td align="right">
						<label for="receivedQuantity">{{=$ctx.doI18N("form.label.item.receivedquantity")}}</label>	
					</td>
					<td>
						<input type="text" id="receivedQuantity" name="receivedQuantity" title=""  class="text ui-widget-content ui-corner-all" value="{{=receivedQuantity}}" size="22" disabled/>
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>
</fieldset>
<fieldset>
	<legend>{{=$ctx.doI18N("dialog.title.add.inventoryitem")}}</legend>
<table>
	<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>
				<tr>
					<td align="right">
								
					</td>
					<td>
						<input type="hidden" id="itemMasterId" name="itemMasterId" title="" value="{{=itemMasterId}}" size="22" disabled="disabled" class="text ui-widget-content ui-corner-all itemMasterId"/>
					</td>
				</tr>
				<tr>
					<td align="right">
						<label for="serialNumber">{{=$ctx.doI18N("form.label.item.serialnumber")}}</label>
					</td>
					<td>
						<input type="text" id="serialNumber" name="serialNumber" title="" class="text ui-widget-content ui-corner-all" value="{{=serialNumber}}" size="22"/>
					</td>	
				</tr>
				<tr>
					<td align="right">
						
					</td>
					<td>
						<input type="hidden" id="grnId" name="grnId" title="" class="text ui-widget-content ui-corner-all" value="{{=id}}" size="22" disabled="disabled"/>
					</td>
				</tr>
				<tr>
					<td align="right">
						<label for="provisioningSerialNumber">{{=$ctx.doI18N("form.label.item.provisioningserialnumber")}}</label>
					</td>
					<td>
						<input type="text" id="provisioningSerialNumber" class="text ui-widget-content ui-corner-all" name="provisioningSerialNumber" title="" value="{{=provisioningSerialNumber}}" size="22"/>
					</td>
				</tr>


				</table>
			</td>
			<td>
				<table>	
					<tr>
						<td align="right">
							<label for="quality">{{=$ctx.doI18N("form.label.item.quality")}}</label>	
						</td>
						<td>
							<select id="quality" name="quality"  title="" style="width: 178px;">
							<option>Good</option>
							<option>Defective</option>
						</select>	
						</td>
					</tr>
					<tr>
						<td align="right">
							<label for="status">{{=$ctx.doI18N("form.label.item.status")}}</label>
						</td>
						<td>
							<select id="status" name="status" title="" style="width: 178px;">
								<option>New</option>
								<option>Used</option>
							</select>
						</td>
					</tr>
						
					<tr>
						<td align="right">
							<label for="remarks">{{=$ctx.doI18N("form.label.item.remarks")}}</label>
						</td>
						<td>
							<input type="text" id="remarks" name="remarks" title="" class="text ui-widget-content ui-corner-all" vlaue="{{=remarks}}" size="22"/>
						</td>
					</tr>
				</table>	
			</td>			
		</tr>
	</table>
</fieldset>
<fieldset><p style="color:red" id="itemMasterError"></p></fieldset>
</form>

</script>

<script id="inventoryGrnListTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
<button id="newgrnadditem" class="newgrnadditem ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add Grn
</span>
</button>

<table id='grnlisttable' width='100%'>

<thead>
	<tr>
		<th>Id</th>
		<th>Purchase Date</th>
		<th>Supplier Name</th>
		<th>Item Description</th>
		<th>Ordered Quantity</th>
       <th>Received Quantity</th>
       <th>Balance Quantity</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td> {{=id}} </td>
	<td> {{=$ctx.globalDate(purchaseDate)}}</td>
	<td> {{=supplierName}} </td>
	<td> {{=itemDescription}} </td>
	<td> {{=orderdQuantity}} </td>
	<td> {{#if receivedQuantity == ""}}
			0
		{{#else}}
			{{=receivedQuantity}}	
		{{/if}}
	 </td>
	<td> 
	{{#if balanceQuantity == ""}}
	0
	{{#else}}
	{{=balanceQuantity}}	
	{{/if}} 
	</td>
</tr>

{{/each}}
</tbody>
</table>
</form>
</script>


	<script id="inventoryGrnFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">

	    <div id="formerrors" style="color:red"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.view.inventoryitem")}}</legend>
	<table>
			<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>
					
				<tr>
				<td>
                    <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
                    <input type="hidden" value="dd MMMM yyyy" name="dateFormat" id="dateFormat">
				</td>
				</tr>
                <tr>
               	<td align="right">
					<label for="purchaseDate">{{=$ctx.doI18N("form.label.item.purchasedate")}}</label>
               	</td>
               	<td>
                 <input id="purchaseDate" name="purchaseDate" title="" type="text"  class="text ui-widget-content ui-corner-all datepickerfield" value="{{=$ctx.globalDate(purchaseDate)}}"size="22"  />
             	</td> 
				</tr>
				<tr>
				<td align="right">
					<label for="supplierId">{{=$ctx.doI18N("form.label.item.supplierid")}}</label>
				</td>
				<td>
					<select id="supplierId" name="supplierId" title="" style="width: 178px;">
     				<option value="">{{=$ctx.doI18N("option.supplier.first.choice")}}</option>
   					  {{#each supplierData}}
     				  <option value="{{=$ctx.number(id)}}">{{=supplierCode}}</option>
   					  {{/each}}
   					 </select>
				</td>
				</tr>
				<tr>
				<td align="right">
					<label for="officeId">{{=$ctx.doI18N("form.label.item.officeid")}}</label>
				</td>
				<td>
					<select id="officeId" name="officeId" title="" style="width: 178px;">
     				<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
   					  {{#each officeData}}
     				  <option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
   					  {{/each}}
   					 </select>
				</td>
				</tr>				            
			</table>
 		</td>
		<td valign="top" style="padding-right: 15px;">
			<table>
				<tr>
				<td align="right">
					<label for="itemMasterId">{{=$ctx.doI18N("form.label.item.itemmasterid")}}</label>
				</td>
				<td>
					<select id="itemMasterId" name="itemMasterId" title="" style="width: 178px;">
     				<option value="">{{=$ctx.doI18N("option.itemMaster.first.choice")}}</option>
   					  {{#each itemData}}
     				  <option value="{{=$ctx.number(id)}}">{{=itemCode}}</option>
   					  {{/each}}
   					 </select>
				</td>
				</tr>
			 <tr>
               	<td align="right">
					<label for="orderdQuantity">{{=$ctx.doI18N("form.label.item.orderdquantity")}}</label>
               	</td>
               	<td>
		        	<input type="text" id="orderdQuantity" name="orderdQuantity" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=$ctx.globalDate(orderdQuantity)}}" size="22"/>
             	</td> 
				</tr>
			</table>	
		</td>
</tr>
</table>

	</fieldset>

</form>
</script>

	<script id="addressFormTemplate" type="text/x-jquery-tmpl">

<form id="entityform">
     <div id="formerrors"></div>
	    <fieldset>
		    <legend>{{=$ctx.doI18N("dialog.title.add.address")}}</legend>
               <table>
                    
					<tr>
						<td valign="top" style="padding-right: 15px;">
							<table>
                                   <tr>
				                       <td>
					                    <label for="addressType">{{=$ctx.doI18N("form.label.address.type")}}</label>
				                          </td>
				                          <td>
					                         <select id="addressType" name="addressType" title="" onChange="setDisableButton(options[selectedIndex].value)" style="width: 250px; ">
     				                            <option value="">{{=$ctx.doI18N("option.example.first.choice")}}</option>
   					                              {{#each addressOptionsData}}
                                                         {{#if $ctx.number($parent.parent.data.addressKey)===$ctx.number(id)}}
 					                                           <option value="{{=value}}" selected="selected">{{=value}}</option>
                                                       {{#else}}
     	                                                        <option value="{{=value}}">{{=value}}</option>
                                                        {{/if}}
                                                       
   					                              {{/each}}
   					                       </select>
				                        </td>
				              </tr>
							 <tr>
                            <td align="right">
                          		<label for="priority">{{=$ctx.doI18N("form.label.Address1")}}</label>
                           </td>
                           <td>
                           
                                      <input id="addressNo" name="addressNo" title="" type="text" value="{{=addressNo}}" size="33" />
                        </td>
                       </tr>
                 	   <tr>
		                 <td align="right">
                                <label for="street">{{=$ctx.doI18N("form.label.Address2")}}</label>
                         </td>
                         <td>
                          
                                    <input id="street" name="street" title="" type="text" value="{{=street}}" size="33" />
                      
                      </td>
						<td colspan="1"></td>
						<td align="center">
						<label id="enterNewDetails">&nbsp;&nbsp;{{=$ctx.doI18N("form.label.enternewdetails")}}</label>
						</td>
                    </tr>
                    <tr>
                      <td align="right">
                          <label for="city">{{=$ctx.doI18N("form.label.city")}}</label>
                      </td>
                      <td>
                        		
			                       <input id="city" name="city" title="" type="text" onChange="setCountryandState()" value="{{=city}}" />
	                    
						</td>
						<td>
						
					
						<span class="ui-button-text">
						<input type="button" value="New" id="addNewCity" style="width:80px;" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" aria-disabled="false"/>
						</span>
						
						</td>
                		<td>&nbsp;&nbsp;
						<input type="text" name="entityCode" value="Enter Code" style="height:20px;" id="entityCode"/>
						</td>
			<tr>
                 <td align="right">
                         <label for="state">{{=$ctx.doI18N("form.label.state")}}</label>
                 </td>
                 <td>
                    
                                <input id="state" name="state" title="" type="text" value="{{=state}}" />
	               
                </td>
				<td>	
						
						<span class="ui-button-text">
						<input type="button"  value="New" id="addNewState" style="width:80px;" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" role="button" aria-disabled="false"/>
						</span>	
				</td>
				<td>&nbsp;&nbsp;
				<input type="text" name="entityName" value="Enter Name" style="height:20px;" id="entityName"/>
				</td>
			</tr>
			 <tr>
                <td align="right">
                       <label for="country">{{=$ctx.doI18N("form.label.country")}}</label>
                </td>
                <td>
                 
                              <input id="country" name="country" title="" type="text" value="{{=country}}" />
              </td>
				<td>	
						
						<span class="ui-button-text">
						<input type="button" value="New" id="addNewCountry" style="width:80px;" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" role="button" aria-disabled="false"/>
						</span>
						
				</td>
				<td>&nbsp;&nbsp;
				<select id="parentEntityId" name="parentEntityId"  title="" style="width: 170px;" >
			            	<option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
                            		
		                </select>
				</td>
            </tr>
			 <tr>

                <td align="right">
                       <label for="zipCode">{{=$ctx.doI18N("form.label.zip")}}</label>
                </td>
               <td>
                  		
			              <input id="zipCode" name="zipCode" title="" type="text" value="{{=zip}}" size="33" />
	            
              </td>
			<td></td>
			<td align="right"><input type="button" value="Add Data" id="addEntityData" style="width:170px;" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" role="button" aria-disabled="false">
			</input></td>
           </tr>
 <tr>
                       <td align="right">
                              <label for="clientId"></label>
                       </td>
                      <td>
                           
                        <input id="clientId" name="clientId" title="" type="hidden" value="{{=clientId}}" size="33" />
                    
                     </td>
                                    <td></td>
                               
                                </tr>
		 </table>
		</td>
		
	</tr>
</table>
	</fieldset>

</form>
</script>


	<script id="eventmasterListTemplate" type="text/x-jquery-tmpl">
<table id='eventmasterstable' width='100%'>
<button id="newevent{{=id}}" onClick="addEvent();return false;" class="newtaxmap ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add Event
</span>
</button>
<thead>
	<tr>
		<th>Id</th>
		<th>Event Name</th>
		 <th>Event Description</th>
		 <th>Created Date</th>
        <th>Status</th>

		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=eventName}}</td>
	<td>{{=eventDescription}}</td>
	<td>{{=$ctx.globalDate(createdDate)}}</td>
    <td>{{=status}}</td>
	<td>
		<a id='updateEvent{{=id}}' class='updateEvent' href='#' style='margin-right: 5px;'  onclick="updateEvent('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteEvent{{=id}}' class='deleteEvent' href='#' style='margin-right: 5px;' onclick="deleteEvent('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.delete")}}</a>
		<a id='addEventPricing{{=id}}' class='addEventPricing' href='#' style='margin-right: 5px;' onclick="viewEventPricing('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.viewprice")}}</a>
        <a id='newpricebtn{{=id}}' class='newpricebtn' href='#' style='margin-right: 5px;' onclick="addEventPricing('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.addprice")}}</a>
	
	</td>
</tr>

{{/each}}
</tbody>
<table>
</script>

	<script id="eventmasterFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("dialog.title.event.details")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>
		              <td align="right"><label for="eventName">{{=$ctx.doI18N("form.label.event.code")}}</label>
                      </td>
                      <td>
	                     <input id="eventName" name="eventName" title="" style="height:20px;" class="text ui-widget-content ui-corner-all" type="text" value="{{=eventName}}" size="25"/>
                      <td>
                   </tr>
					<tr>
				        <td align="right">
                              <label for="units">{{=$ctx.doI18N("form.label.event.description")}}</label>
                        </td>
                         <td>
                             <input id="eventDescription" name="eventDescription" style="height:20px;" class="text ui-widget-content ui-corner-all" title="" type="text" value="{{=eventDescription}}" size="25"/>
                         </td>
                    <tr>
                         <td align="right">
	                             <input type="hidden" value="dd MMMM yyyy" name="dateFormat" id="dateFormat">
	                             <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		                         <label for="startDate">{{=$ctx.doI18N("form.label.start.date")}}</label>
                        </td>
	                    <td>
                              <input id="eventStartDate" name="eventStartDate" title="" style="height:20px;" type="text" value="{{=$ctx.globalDate(eventStartDate)}}"size="25" class="text ui-widget-content ui-corner-all datepickerfield" />
                        </td>
                   </tr>
                   <tr>
                         <td align="right"><label for="chargeCode">{{=$ctx.doI18N("form.label.loan.charge.code")}}</label>
                         </td>
                         <td>
                            <select id="chargeCode" name="chargeCode"  title=""  style="width:199px;>
                                <option value="None">None</option>
                                     {{#each chargeData}}
                                        {{#if $ctx.number($parent.parent.data.chargeId)===$ctx.number(id)}}
				                              <option value="{{=chargeCode}}" selected="selected">{{=chargeDescription}}</option>
                                        {{#else}}
                                              <option value="{{=chargeCode}}">{{=chargeDescription}}</option>
                                        {{/if}}
                                     {{/each}}
                     		</select>
                         </td>
                     </tr>
                </table>
              </td>
              <td valign="top" style="padding-left: 5px; padding-right: 5px;">
                  <table>
					 <tr>
				        <td align="right">
                            <label for="status">{{=$ctx.doI18N("form.label.plan.status")}}</label>
                        </td>
	                    <td>
                            <select id="status" name="status"  title="" style="width: 145px;">
			                      <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		                                {{#each statusData}}
                                            {{#if $ctx.number($parent.parent.data.status)===$ctx.number(id)}}
                             					<option value="{{=id}}" selected="selected">{{=value}}</option>
                                            {{#else}}
     	                                         <option value="{{=id}}">{{=value}}</option>
                                            {{/if}}
                                        {{/each}}	
		                        </select>
                        </td>
                    </tr>
                    <tr>
                       <td>
                         <tr>
                            <td align="right">
                                 <label for="allowCancellation">{{=$ctx.doI18N("form.label.event.cancel")}}</label>
                            </td>
	                       <td>
                                <input type = "checkbox" id="allowCancellation" name="allowCancellation" class="text ui-widget-content ui-corner-all" value="{{=allowCancellation}}" title="" style="width: 145px;"/>
                          </td>
                      </tr>
	             </tr>
                 <tr>
                     <td align="right">
                            <label for="endDate">{{=$ctx.doI18N("form.label.end.date")}}</label>
                     </td>
	                  <td>	
                            <input id="eventEndDate" name="eventEndDate" style="height:20px;" title="" type="text" value="{{=$ctx.globalDate(eventEndDate)}}" size="17" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint" />
                      </td>
                 <tr>
                      <td align="right">
                            <label for="validity">{{=$ctx.doI18N("form.label.event.validity")}}</label>
                      </td>
	                  <td>
                           	<input id="eventValidity" name="eventValidity" style="height:20px;" title="" type="text" value="{{=$ctx.globalDate(eventValidity)}}" size="17" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint" />
                      </td>
				
             </table>
          </td>
        </tr>
    </table>
    <label for="units">{{=$ctx.doI18N("form.label.event.media")}}</label></td></tr>

<div class="multiselectwidget">
			<label for="notSelectedMedia">{{=$ctx.doI18N("form.label.user.available.media")}}</label>
			<select id="notSelectedMedia" name="notSelectedMedia" title="Available Media Assets." class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:370px;height:125px;">
			{{#each mediaAsset}}
				<option value="{{=mediaId}}">{{=mediaTitle}}</option>
            {{/each}}
			</select>
			<a href="#" id="addMedia" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
		</div>
		
		<div class="multiselectwidget">
			<label for="media">{{=$ctx.doI18N("form.label.user.selected.media")}}</label>
			<select id="mediaData" name="mediaData" title="User selected Media Assets." class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:370px;height:125px;">
			{{#each selectedMedia}}
				<option value="{{=mediaId}}" selected="selected">{{=mediaTitle}}</option>
            {{/each}}
			</select>
			<a href="#" id="removeMedia" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
    	</div>
	</fieldset>
</form>
</script>

	<script id="eventPricingFormListTemplate" type="text/x-jquery-tmpl">
<table id='eventPricingtable' width='100%'>
<thead>
	<tr>
		<th>Id</th>
        <th>event Id</th>
		<th>Format Type</th>
		<th>Opt Type</th>
		<th>client Type</th>
		<th>Discount</th>
		<th>price</th>
      <th>&nbsp</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
    <tr>
       <td>{{=id}}</td>
       <td>{{=eventId}}</td>
       <td>{{=formatType}}</td>
      <td>{{=optType}}</td>
      <td>{{=clientType}}</td>
	  <td>{{=discount}}</td>
      <td>{{=$ctx.decimal(price, 2)}}</td>
      <td>
        <a id='updateEventPrice{{=id}}' class='updateEventPrice' href='#' style='margin-right: 5px;' >{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteEventPrice{{=id}}' class='deleteEventPrice' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
     </td>
  </tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="eventPriceFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
<legend>{{=$ctx.doI18N("dialog.title.add.price")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>

<td align="right">	
		<label for="eventId">{{=$ctx.doI18N("form.label.event.id")}}</label></td>

		<td><input id="eventId" name="eventId" style="height:20px;" title="" type="text" class="text ui-widget-content ui-corner-all" value="{{=eventId}}" readonly  size="17"/></td></tr>


<tr><td align="right"><label for="formatType">{{=$ctx.doI18N("form.label.loan.format.code")}}</label></td>
    <td> <select id="formatType" name="formatType"  title=""  style="width: 143px;>
               <option value="None">None</option>
                  {{#each format}}
                        <option value="{{=formatType}}">{{=formatType}}</option>
                   {{/each}}
  
		</select></td></tr>


	<tr><td align="right">	<label for="optType">{{=$ctx.doI18N("form.label.opt.code")}}</label></td>
 <td><select id="optType" name="optType"  title=""  style="width: 143px;>
			 <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		{{#each optTypes}}
          {{#if $parent.parent.data.optType===value}}
  	<option value="{{=value}}" selected = "selected">{{=value}}</option>
{{#else}}
  	<option value="{{=value}}">{{=value}}</option>
{{/if}}
  {{/each}}	
		</select>
		</td></tr>
</table>
</td>
		<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>
<td align="right"><label for="clientType">{{=$ctx.doI18N("form.label.loan.client.variant")}}</label></td>
	<td><select id="clientType" name="clientType"  title="" style="width: 143px;">
			 <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		
{{#each clientTypes}}
		{{#if $parent.parent.data.clientType===type}}
  	<option value="{{=id}}" selected = "selected">{{=type}}</option>
{{#else}}
<option value="{{=id}}">{{=type}}</option>
{{/if}}

  {{/each}}	
		</select></td></tr>
<tr><td align="right">
<label for="discountId">{{=$ctx.doI18N("form.label.loan.discount.code")}}</label></td>
	<td><select id="discountId" name="discountId"  title="" style="width: 143px;">
		
{{#each discountdata}}

                           {{#if $ctx.number($parent.parent.data.discountId)===$ctx.number(id)}}
					<option value="{{=discountMasterId}}" selected="selected" >{{=discountDescription}}</option>
      
{{#else}}
  	<option value="{{=discountMasterId}}">{{=discountDescription}}</option>
{{/if}}
	{{/each}}
		</select></td></tr>


      <tr><td align="right">   <label for="price">{{=$ctx.doI18N("form.label.price.amount")}}</label></td>
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
<td><input id="price" name="price" title="" type="text" style="height:20px;" class="text ui-widget-content ui-corner-all" value="{{=$ctx.decimal(price, 2)}}" size="17"/></td></tr>


</table>
</td></tr>
</table>
	</fieldset>
</form>
</script>
	<script id="allocationDetailsFormListTemplate"	type="text/x-jquery-tmpl">
<table id='orderpricetable' width='100%'>
<thead>
	<tr>
		<th>Id</th>
        <th>Item Description</th>
		<th>Serial NumBer</th>
		<th>Allocation Date</th>
	</tr>
</thead>
<tbody>
{{#each allocationData}}
    <tr>
       <td>{{=id}}</td>
       <td>{{=itemDescription}}</td>
       <td>{{=serialNo}}</td>
      <td>{{=$ctx.globalDate(allocationDate)}}</td>
     
  </tr>
{{/each}}
</tbody>
</table>
</script>
	<script id="ticketsListTemplate1" type="text/x-jquery-tmpl">

<table id='ticketslisttable' width='100%'>
<thead>
	<tr>
		<th>TicketId</th>
		<th>Created on</th>
		<th>Category</th>
		<th>Priority</th>
		<th>Assigned To</th>		
		<th>Status</th>
		<th>Time Elapsed</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
{{#if status==="OPEN"}}
<tr>
	<td> {{=id}} </td>
	<td>{{=$ctx.globalDate(ticketDate)}}</td>
	<td>{{=problemDescription}}</td>
	<td>{{=priority}}</td>
	<td>{{=userName}}</td>
	<td> {{=status}} </td>
	<td>{{=timeElapsed}}</td>	
	<td><a id='viewticket{{=id}}' href='#' style='margin-right: 5px;' onclick="showILClient({{=clientId}}); return false;">{{=$ctx.doI18N("link.action.view")}}</a></td>
</tr>
{{/if}}
{{/each}}
</tbody>
</table></script>

	<script id="mediaFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" method="POST">
    <div id="formerrors"></div>
    
 <div id ="mediaformdetails" style="margin-top: 5px;">
  <fieldset>
     <legend>{{=$ctx.doI18N("dialog.title.add.media")}}</legend>
      <table>
       <tr>
	   <td valign="top" style="padding-left: 15px;">
		<table>
			 <tr>	
		      <td align="right"><label for="mediaTitle">{{=$ctx.doI18N("form.label.media.title")}}</label></td>
		      <td><input id="mediaTitle" name="mediaTitle" style="height:20px;" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=mediaTitle}}"size="22"/></td>  
		      </tr>
		      <tr> 	
		     <td align="right"><label for="mediaType">{{=$ctx.doI18N("form.label.media.type")}}</label></td>
		      <td><select id="mediaType" name="mediaType"  title="" style="width: 178px;">
                      {{#each mediaTypeData}}
                           {{#if $parent.parent.data.mediatype===id}}
					             <option value="{{=id}}" selected="selected" >{{=value}}</option>
                          {{#else}}
  	                             <option value="{{=id}}">{{=value}}</option>
                          {{/if}}
	                  {{/each}}
		         </select>
               </td>
		      </tr>
		      <tr> 
		      <td align="right"><label for="mediaCategoryId">{{=$ctx.doI18N("form.label.media.categoryId")}}</label></td>
		      <td><select id="mediaCategoryId" name="mediaCategoryId"  title="" style="width: 178px;">
                      {{#each mediaCategeorydata}}
                           {{#if $parent.parent.data.catageoryId===id}}
					             <option value="{{=id}}" selected="selected" >{{=mCodeValue}}</option>
                          {{#else}}
  	                             <option value="{{=id}}">{{=mCodeValue}}</option>
                          {{/if}}
	                  {{/each}}
		         </select></td>
		     </tr>
		      <tr> 
		      <td align="right"><label for="image">{{=$ctx.doI18N("form.label.media.image")}}</label></td>
		      <td><input id="image" name="image" title="" style="height:20px;" class="text ui-widget-content ui-corner-all" type="text" value="{{=mediaImage}}"size="22"/></td>
		     </tr>
		       <tr> 
		       <td align="right"> <label for="duration">{{=$ctx.doI18N("form.label.media.duration")}}</label></td>
		      <td><input id="duration" name="duration" style="height:20px;" class="text ui-widget-content ui-corner-all" title="" type="text" value="{{=duration}}"size="22"/></td>
		      </tr>
		       <tr> 
		       <td align="right"><label for="Genre">{{=$ctx.doI18N("form.label.media.Genre")}}</label></td>
		      <td><input id="genre" name="genre" style="height:20px;" class="text ui-widget-content ui-corner-all" title="" type="text" value="{{=genre}}"size="22"/></td>
		      </tr>
		       <tr>
		       <td align="right"><label for="subject">{{=$ctx.doI18N("form.label.media.subject")}}</label></td>
		       <td><input id="subject" name="subject" style="height:20px;" class="text ui-widget-content ui-corner-all" title="" type="text" value="{{=subject}}"size="30"/></td>
               </tr>
               <tr>
		       <td align="right"><label for="overview">{{=$ctx.doI18N("form.label.media.overview")}}</label></td>
		       <td>
		       <textarea rows="3" cols="50" id="overview" name="overview" class="text ui-widget-content ui-corner-all">{{=overview}}</textarea> 

		       </td>
               </tr>
       </table>
       </td>
       
	  <td valign="top" style="padding-right: 15px;">
       <table>
           <tr>
            <td align="right"> <label for="contentProvider">{{=$ctx.doI18N("form.label.media.contentProvider")}}</label></td>
            <td><input id="contentProvider" name="contentProvider" style="height:20px;" class="text ui-widget-content ui-corner-all" title="" type="text" value="{{=contentProvider}}"size="22"/><td>	
          </tr>
          <tr>
              <td align="right"><label for="rated">{{=$ctx.doI18N("form.label.media.rated")}}</label></td>
	          <td><input id="rated" name="rated" title="" style="height:20px;" class="text ui-widget-content ui-corner-all"  type="text" value="{{=rated}}"size="22"/></td>		
          </tr>
           <tr>
		       <td align="right"><label for="rating">{{=$ctx.doI18N("form.label.media.rating")}}</label></td>
		       <td><input id="rating" name="rating" title="" style="height:20px;" class="text ui-widget-content ui-corner-all" type="text" value="{{=rating}}"size="22"/></td>	
          </tr>
          <tr>   
		      <td align="right"><label for="status">{{=$ctx.doI18N("form.label.media.status")}}</label></td>
					<td><select id="status" name="status" title="" style="width: 178px;">
						<option value="">{{=$ctx.doI18N("option.example.first.choice")}}</option>
						{{#each mediaStatus}}
							{{#if $parent.parent.data.status===value}}
						          <option value="{{=value}}" selected="selected">{{=value}}</option>
							{{#else}}
								<option value="{{=value}}">{{=value}}</option>
							{{/if}}
				        {{/each}}
					</select></td>
          </tr>
           <tr>
              <td align="right">
               <input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
               <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}"  />
               <label for="releasingDate">{{=$ctx.doI18N("form.label.process.date")}}</label></td>
               <td> 
               <input id="releaseDate" name="releaseDate" style="height:20px;" class="text ui-widget-content ui-corner-all" title="" type="text" value="{{=$ctx.globalDate(releaseDate)}}" size="22" class="datepickerfield" />
                </td>
           </tr>

       </table> </td> </tr>
</table>
</fieldset> 
    
<fieldset>

	<legend>{{=$ctx.doI18N("Media detail")}}</legend>
		<div>
			<b>{{=$ctx.doI18N("label.add.addon.mediadetails")}}</b>
			<button id="addAddOnmediadetails">{{=$ctx.doI18N("button.addon.add")}}</button>
		</div>
		<div id="mediadetails">
			
		</div>

</fieldset>

<fieldset>
	<legend>{{=$ctx.doI18N("Media Location")}}</legend>
		<div>
			<b>{{=$ctx.doI18N("label.add.addon.medialocations")}}</b>
			<button id="addAddOnmedialocation">{{=$ctx.doI18N("button.addon.add")}}</button>
		</div>
		<div id="medialocation">	
		
		</div>
</fieldset>
				
</div>			
</form>
</script>

	<script id="mediadetailsFormTemplate" type="text/x-jquery-tmpl">
<p>
    <label for="{{=attributeType}}" style="display: inline">
		<input type="text" id="{{=attributeType}}" value="Cast" readonly />
	</label>
	<label for="{{=attributeName}}" style="display: inline">
		<select id="{{=attributeName}}"  name="attributeName" title="">
			<option value="">{{=$ctx.doI18N("option.media.first.caption")}}</option>
			{{#each mediaAttributesdata}}
			       {{#if $ctx.number($parent.parent.data.Name)===$ctx.number(id)}}
			              <option value="{{=id}}" selected="selected">{{=mediaName}}</option>\
			       {{#else}}
     	                  <option value="{{=id}}">{{=mediaName}}</option>
                   {{/if}}
			{{/each}}
		</select> </label>
		
	<label for="{{=attributevalue}}" style="display: inline">
		<input type="text" id="{{=attributevalue}}" value="{{=Value}}" placeholder="caption Value"/>
	</label>
	<label for="{{=attributeNickname}}" style="display: inline">
		<input type="text" id="{{=attributeNickname}}" value="{{=Nickname}}" placeholder="caption Nickname"/>
	</label>
	<label for="{{=attributeImage}}" style="display: inline">
		<input type="text" id="{{=attributeImage}}" value="{{=Image}}" placeholder=" caption Image"/>
	</label>
	<button id="{{=deleteButtonId}}"> {{=activity}} </button>
</p>
</script>

	<script id="mediaAssetLocationFormTemplate" type="text/x-jquery-tmpl">
<p>
     <label for="{{=languageId}}" style="display: inline">
		<select id="{{=languageId}}" name="languageId" title="">
			<option value="">{{=$ctx.doI18N("option.media.first.lang")}}</option>
			{{#each servicesLanguageData}}
			        {{#if $ctx.number($parent.parent.data.LanguageId)===$ctx.number(id)}}
			     <option value="{{=id}}" selected="selected">{{=mCodeValue}}</option>
			        {{#else}}
     	                  <option value="{{=id}}">{{=mCodeValue}}</option>
                   {{/if}}
			{{/each}}
			  
		</select> 
	 </label>
	 
	<label for="{{=formatType}}" style="display: inline">
		<select id="{{=formatType}}" name="formatType" title="">
			<option value="">{{=$ctx.doI18N("option.media.first.format")}}</option>
			{{#each servicesmediaFormat}}
			     {{#if $parent.parent.data.FormatType=== mediaName}}
			           <option value="{{=mediaName}}" selected="selected">{{=mediaName}}</option>
			             {{#else}}
     	                  <option value="{{=mediaName}}">{{=mediaName}}</option>
                   {{/if}}
			{{/each}}
		</select> </label>
		
			      
	<label for="{{=location}}" style="display: inline">
		<input type="text" id="{{=location}}" value="{{=Location}}" placeholder="Location"/>
	</label>
	
	<button id="{{=deleteButtonId}}"> {{=activity}} </button>
</p>
</script>

	<script id="mediaFormListTemplate" type="text/x-jquery-tmpl">
<table id='mediatable' width='100%'>
<button id="addmedias{{=eventId}}"  class="addmediass ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add Media
</span>
</button>
<thead>
	<tr>
		<th>Id</th>
        <th>Media Title</th>
        <th>Media Rating</th>
        <th>Release Date</th>
        <th>Status</th>
        <th>&nbsp</th>
	
	</tr>
</thead>
<tbody>
{{#each crudRows}}
    <tr>
       <td>{{=mediaId}}</td>
       <td>{{=mediaTitle}}</td>
       <td>{{=mediaRating}}</td>
        <td>{{=$ctx.globalDate(releaseDate)}}</td>
      <td>{{=status}}</td>
     
    
         <td>
        <a id='updateMedia{{=mediaId}}' class='updateMedia' href='#' style='margin-right: 5px;' >{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteMedia{{=mediaId}}' class='deleteMedia' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
     </td>
  
  </tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="renewalOrderFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	           <fieldset>
                       <table>
                            <tr>
                               <td align="right">
                                        <label for="renewalPeriod">{{=$ctx.doI18N("form.label.order.renewalperiod")}}</label>
                               </td>
		                       <td>          <select id="{{=renewalPeriod}}" name="renewalPeriod" title="">
			                                   <option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
			                                     {{#each subscriptiondata}}
			                                           <option value="{{=id}}">{{=Contractdata}}</option>
			                                     {{/each}}
		                                 </select> 
                                       </label>
                               </td>
                          </tr>   
                           <tr>
                               <td align="right" valign="top">		
                                      <label for="message">{{=$ctx.doI18N("form.label.order.description")}}</label>
                              </td>
                              <td>
                                       <textarea rows="3" cols="45" id="description" name="description" cssClass="text ui-widget-content ui-corner-all">{{=description}}</textarea>
                             </td>
                       </tr>
                  </table>
	</fieldset>
</form>
</script>


	<script id="disconnectOrderFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	           <fieldset>
                       <table>
                            <tr>
                               <td align="right">
                                        <label for="disconnectReason">{{=$ctx.doI18N("form.label.order.disconnectreason")}}</label>
                               </td>
		                       <td>          <select id="disconnectReason" name="disconnectReason" title="">
			                                  <option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
			                                     {{#each disconnectDetails}}
			                                           <option value="{{=mCodeValue}}">{{=mCodeValue}}</option>
			                                     {{/each}}
		                                 </select> 
                                       </label>
                               </td>
                          </tr>   
                          
                  </table>
	</fieldset>
</form>
</script>


	<script id="chargecodeListTemplate" type="text/x-jquery-tmpl">
<table id='chargecodestable' width='100%'>

<button id="newchargecode" onClick="addChargeCode();return false;"class="newchargecode ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add Charge Code
</span>
</button>

<thead>
	<tr>
		 <th>Id</th>
		 <th>Charge Code</th>
		 <th>Charge Description</th>
		 <th>Charge Type</th>
         <th>Charge Duration</th>
		 <th>Duration Type</th>
		 <th>Tax Inclusive</th>
		 <th>Bill Frequency Code</th>
		 <th>Edit</th>
          <th>&nbsp;</th>
          <th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=chargeCode}}</td>
	<td>{{=chargeDescription}}</td>
	<td>{{=chargeType}}</td>
    <td>{{=chargeDuration}}</td>
	<td>{{=durationType}}</td>
	<td>
	{{#if taxInclusive == 1}}
	Yes
	{{else}}
	No
	{{/if}}
	</td>
	<td>{{=billFrequencyCode}}</td>
	<td><a id='editchargecode{{=id}}' class='editchargecode' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit.chargecode")}}</a></td>
    <td><a id='viewTax{{=id}}' class='viewTax' href='#' style='margin-right: 5px;' onclick="viewTax('{{=chargeCode}}'); return false;">{{=$ctx.doI18N("link.action.viewtax")}}</a></td>
    <td><a id='addTax' class='addTax' href='#' style='margin-right: 5px;' onclick="addTax('{{=chargeCode}}'); return false;">{{=$ctx.doI18N("link.action.addtax")}}</a></td>
</tr>

{{/each}}
</tbody>
<table>
</script>

	<script id="chargecodeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">

	    <div id="formerrors" style="color:red"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.view.addchargecode")}}</legend>
	<table>
	<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>
					
				<tr>
               	<td align="right">
					<label for="chargeCode">{{=$ctx.doI18N("form.label.chargecode.chargecode")}}</label>
               	</td>
               	<td>
		        	<input id="chargeCode" name="chargeCode" title="" style="height:20px;" class="text ui-widget-content ui-corner-all" type="text" value="{{=chargeCode}}" size="22" />
					<input type="hidden" value="dd MMMM yyyy" name="dateFormat" id="dateFormat">
             	</td> 
				</tr>
				
				<tr>
				<td align="right">
					<label for="chargeDescription">{{=$ctx.doI18N("form.label.chargecode.chargeDescription")}}</label>
				</td>
				<td>
					<input type="text" id="chargeDescription" name="chargeDescription"  style="height:20px;" title="" class="text ui-widget-content ui-corner-all" value="{{=chargeDescription}}" size="22" />
				</td>
				</tr>            
				<tr>
					<td align="right">
						<label for="chargeType">{{=$ctx.doI18N("form.label.chargecode.chargeType")}}</label>
					</td>
					<td>
                    	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
						 
						<select id="chargeType" name="chargeType"  title="" style="width: 178px;" >
				        <option value="-1">{{=$ctx.doI18N("option.chargetype.first.choice")}}</option>
						{{#each chargeTypeData}}
							
          				{{#if chargeType}}
            				{{#if $parent.parent.parent.data.chargeType === chargeType}}
             					<option value="{{=chargeType}}" selected="selected">{{=chargeType}}</option>
            				{{#else}}
                			<option value="{{=chargeType}}">{{=chargeType}}</option>
            			{{/if}}
            			{{/if}}
            
			            {{/each}}    
						</select>
						
					</td>
				</tr>

				<tr>
					<td align="right">
						<label for="chargeDuration">{{=$ctx.doI18N("form.label.chargecode.chargeduration")}}</label>
					</td>
					<td>
						<input type="text" id="chargeDuration" class="text ui-widget-content ui-corner-all" style="height:20px;" name="chargeDuration" title="" value="{{=chargeDuration}}" size="22" />
					</td>
				</tr>				
			</table>
 		</td>
		<td valign="top" style="padding-right: 15px;">
			<table>
				<tr>
					<td align="right">
						<label for="durationType">{{=$ctx.doI18N("form.label.chargecode.durationtype")}}</label>
					</td>
					<td>
						<select id="durationType" name="durationType"  title="" style="width: 182px;" >
			            	<option value="-1">{{=$ctx.doI18N("option.durationtype.first.choice")}}</option>
						{{#each durationTypeData}}
							{{#if durationType}}
								{{#if $parent.parent.parent.data.durationType === durationType}}
								<option value="{{=durationType}}" selected="selected">{{=durationType}}</option>
								{{#else}}
								<option value="{{=durationType}}">{{=durationType}}</option>
						{{/if}}
						{{/if}}
			            {{/each}}  
		                </select>
					</td>
				</tr>
				<tr>
					<td align="right">
						<label for="taxInclusive">{{=$ctx.doI18N("form.label.chargecode.taxInclusive")}}<label>
					</td>
					<td>
					{{#if taxInclusive === 1}}
					<input type="checkbox" name="taxInclusive" id="taxInclusive" title="" value="{{=taxInclusive}}" checked/>
					{{#else}}
					<input type="checkbox" name="taxInclusive" class="text ui-widget-content ui-corner-all" id="taxInclusive" title="" value="{{=taxInclusive}}" />	
					{{/if}}
					</td>
				</tr>
				<tr>
				<td align="right">
					<label for="billFrequencyCode">{{=$ctx.doI18N("form.label.chargecode.billfrequencycode")}}</label>
				</td>
				<td>
					<select name="billFrequencyCode" id="billFrequencyCode" title="" style="width: 182px;">
						<option value="-1">{{=$ctx.doI18N("option.billfrequenctcode.first.choice")}}</option>
						{{#each billFrequencyCodeData}}
							{{#if billFrequencyCode}}
								{{#if $parent.parent.parent.data.billFrequencyCode === billFrequencyCode}}
									<option value="{{=billFrequencyCode}}" selected="selected">{{=billFrequencyCode}}</option>	
								{{#else}}
									<option value="{{=billFrequencyCode}}">{{=billFrequencyCode}}</option>
							{{/if}}
						{{/if}}
			            {{/each}}  
					</select>
				</td>
				</tr>

			</table>
		</td>
	</tr>
</table>

	</fieldset>

</form>
</script>

	<script id="taxmapListTemplate" type="text/x-jquery-tmpl">
<table id='taxmapstable' width='100%'>
<thead>
	<tr>
		 <th>Id</th>
		 <th>Charge Code</th>
		 <th>Tax Code</th>
		 <th>Start Date</th>
         <th>Type</th>
		 <th>Rate</th>
          <th>Tax Region</th>
		<th>Edit</th>
		 
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=chargeCode}}</td>
	<td>{{=taxCode}}</td>
	<td>{{=$ctx.globalDate(startDate)}}</td>
    <td>{{=type}}</td>
	<td>{{=rate}}</td>
    <td>{{=TaxRegion}}</td>
	<td><a id='edittaxmap{{=id}}' class='edittaxmap' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit.taxmap")}}</a></td>
</tr>

{{/each}}
</tbody>
<table>
</script>


	<script id="taxmapFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">

	    <div id="formerrors" style="color:red"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.view.addtaxmap")}}</legend>
	<table>
	<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>
					
				<tr>
               	<td align="right">
					<label for="chargeCode">{{=$ctx.doI18N("form.label.taxmap.chargecode")}}</label>
               	</td>
               	<td>
		        	<input type="text" id="chargeCode" name="chargeCode"  title="" style="height:20px;" class="text ui-widget-content ui-corner-all" value="{{=chargeCode}}" size="22" readonly/>
					<input type="hidden" value="dd MMMM yyyy" name="dateFormat" id="dateFormat">
             	</td> 
				</tr>
				
				<tr>
				<td align="right">
					<label for="taxCode">{{=$ctx.doI18N("form.label.taxmap.taxcode")}}</label>
				</td>
				<td>
					<input type="text" id="taxCode" name="taxCode"  title="" style="height:20px;" class="text ui-widget-content ui-corner-all" value="{{=taxCode}}" size="22" />
				</td>
				</tr>            
				<tr>
					<td align="right">
						<label for="startDate">{{=$ctx.doI18N("form.label.taxmap.startdate")}}</label>
					</td>
					<td>
                    	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
						 
						<input id="startDate" name="startDate" title="" type="text" style="height:20px;" value="{{=$ctx.globalDate(startDate)}}" size="22" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint" />
						
					</td>
				</tr>
								
			</table>
 		</td>
		<td valign="top" style="padding-right: 15px;">
			<table>
				<tr>
					<td align="right">
						<label for="type">{{=$ctx.doI18N("form.label.taxmap.type")}}</label>
					</td>
					<td>
						<select name="type" id="type" title="" style="width:178px;">
						<option value="-1">{{=$ctx.doI18N("option.taxmaptype.first.choice")}}</option>
						{{#each taxMapData}}
							{{#if type}}
								{{#if $parent.parent.parent.data.type === type}}
									<option vlaue="{{value}}" selected="selected">{{=type}}</option>
								{{#else}}
									<option value="{{=type}}">{{=type}}</option>
								{{/if}}
							{{/if}}
			            {{/each}}  
					</select>
					</td>
				</tr>

				<tr>
					<td align="right">
						<label for="rate">{{=$ctx.doI18N("form.label.taxmap.rate")}}</label>
					</td>
					<td>
						<input type="text" id="rate" name="rate" title="" style="height:20px;" class="text ui-widget-content ui-corner-all" value="{{=rate}}" size="22" />
					</td>
				</tr>
                 <tr>
					<td align="right">
						<label for="type">{{=$ctx.doI18N("form.label.taxmap.region")}}</label>
					</td>
					<td>
						<select id="taxRegion" name="taxRegion"  title="" style="width:178px;">
               <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
              {{#each priceRegionData}}
                     {{#if $parent.parent.data.TaxRegion===priceregion}}
 
     					<option value="{{=id}}" selected="selected" >{{=priceregion}}</option>
                     {{#else}}
  	                   <option value="{{=id}}">{{=priceregion}}</option>
                    {{/if}}
	          {{/each}}
		</select>
					</td>
				</tr>
			</table>
		</td>
	</tr>

</table>

</fieldset>

</form>
</script>
	<script id="transactionhistoryListTemplate" type="text/x-jquery-tmpl">
<table id='transactionhistorystable' width='100%'>

</button>

<thead>
	<tr>
		 <th>Id</th>
		 <th>Transaction Type</th>
		 <th>Transaction Date</th>
         <th>User</th>
         <th>History</th>
		 
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=transactionType}}&nbsp;&nbsp;</td>
	<td>{{=transactionDate}}</td>
    <td>{{=user}}&nbsp;&nbsp;</td>
    <td>{{=history}}</td>
</tr>

{{/each}}
</tbody>
<table>
</script>

	<script id="batchListTemplate" type="text/x-jquery-tmpl">
<table id='batchstable' width='100%'>
<button id="newbatch" onClick="addBatch();return false;" class="newbatch ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add Batch
</span>
</button>

<thead>
	<tr>
		 <th>Id</th>
		 <th>Batch Name</th>
		 <th>Query</th>
		
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=batchName}}</td>
	<td>{{=query}}</td>
	
</tr>

{{/each}}
</tbody>
</table>
</script>

	<script id="batchFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
		<div id="formerrors" style="color:red"></div>
	
	<fieldset>
		<legend>
			{{=$ctx.doI18N("dialog.title.view.addbatch")}}
		</legend>
	
		<table>
			<tr>
				<td>
					<table>
						<tr>
							<td align="right">
								<label for="batchName">{{=$ctx.doI18N("form.label.batch.batchname")}}</label>
							</td>
							<td>
								<input type="text" name="batchName" id="batchName" class="text ui-widget-content ui-corner-all" style="height:20px;" title="" vlaue="{{=batchName}}" size=22/>
							</td>
						</tr>
						<tr>
							<td align="right" >
								<label for="query" valing="top">{{=$ctx.doI18N("form.label.batch.query")}}</label>
							</td>
							<td>
								<textarea title="" id="query" name="query" value="{{=query}}" class="text ui-widget-content ui-corner-all" rows="4" cols="50" ></textarea>
							</td>
						</tr>
							
					</table>
				</td>
			</tr>
		</table>
	
	</fieldset>

</form>
</script>

	<script id="jobscheduleListTemplate" type="text/x-jquery-tmpl">
<table id='jobschedulestable' width='100%'>
<button id="addnewjobschedule" class="addnewjobschedule ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add Schedules
</span>
</button>
<thead>
	<tr>
		 <th>Id</th>
		 <th>Batch Name</th>
		 <th>Process</th>
		 <th>Process Params</th> 
		 <th>Schedule Type</th>
		 <th>ScheduleTime</th>
		 <th>Status</th>
		
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=batchName}}</td>
	<td>{{=process}}</td>
	<td>{{=msgTemplateDescription}}</td>	
	<td>
	{{#if scheduleType === 'R'}}
	Recurring
	{{/if}}
	{{#if scheduleType === 'O'}}
	Once
	{{/if}}
		
	</td>
	<td>{{=$ctx.globalDateTime(scheduleTime)}}</td>
	<td>
	{{#if status === 'N'}}
	No
	{{/if}}
	{{#if status === 'Y'}}
	Yes
	{{/if}}
	
</tr>

{{/each}}
</tbody>
</table>
</script>


<script id="jobscheduleFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">

	    <div id="formerrors" style="color:red"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.view.addschedule")}}</legend>
	<table>
	<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>
				<tr>
               	  <td align="right">
					 <label for="batchName">{{=$ctx.doI18N("form.label.schedule.batchname")}}</label>
               	 </td>
               	 <td>
		        	<select name="batchName" id="batchName" title=""  class="chosen-select chosen-rtl" style="width: 182px; ">
						<option value="-1">{{=$ctx.doI18N("option.schedulingbatchname.first.choice")}}</option>
						{{#each batchNameData}}
							{{#if batchName}}
								{{#if $parent.parent.parent.data.batchName === batchName}}
									<option value="{{=batchName}}" selected="selected">{{=batchName}}</option>	
								{{#else}}
									<option value="{{=batchName}}">{{=batchName}}</option>
							{{/if}}
						{{/if}}
			            {{/each}}  
					</select>
             	 </td> 
			</tr>
			<tr>
				<td align="right">
					<label for="process">{{=$ctx.doI18N("form.label.schedule.processtype")}}</label>
				</td>
				<td>
					<select name="process" id="process" title="" style="width: 182px;">
						<option value="-1">{{=$ctx.doI18N("option.scheduling.first.choice")}}</option>
					{{#each processTypeData}}
							{{#if process}}
								{{#if $parent.parent.parent.data.process === process}}
									<option value="{{=process}}" selected="selected">{{=process}}</option>	
								{{#else}}
									<option value="{{=process}}">{{=process}}</option>
							{{/if}}
						{{/if}}
			            {{/each}}  	
					</select>
                     <input type="hidden" value="dd MMMM yyyy" name="dateFormat" id="dateFormat">
				</td>
	    	</tr>            
	  </table>
    </td>
		<td valign="top" style="padding-right: 15px;">
			<table>
				<tr>
					<td align="right">
						<label for="scheduleType">{{=$ctx.doI18N("form.label.schedule.batchtype")}}</label>
					</td>
					<td>
						<select name="scheduleType" id="scheduleType" title="" style="width: 184px;">
						<option value="-1">{{=$ctx.doI18N("option.scheduling.first.choice")}}</option>
						{{#each scheduleTypeData}}
							{{#if scheduleType}}
								{{#if $parent.parent.parent.data.scheduleType === scheduleType}}
									<option value="{{=scheduleType}}" selected="selected">{{=scheduleType}}</option>	
								{{#else}}
									<option value="{{=scheduleType}}">{{=scheduleType}}</option>
							{{/if}}
						{{/if}}
			            {{/each}}  
					</select>
					</td>
				</tr>
				<tr>
					<td align="right">
						<label for="scheduleTime">{{=$ctx.doI18N("form.label.schedule.scheduletime")}}</label>
					</td>
					<td>
                        <input id="scheduleTime" name="scheduleTime" type="text" size="23" style="height:20px;" class="text ui-widget-content ui-corner-all datepickerfield" />  
						<input type="hidden" name="status" id="status" size=22 value="{{=status}}"/>
						<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
					</td>
				</tr>
			</table>
		</td>
	</tr>

</table>

</fieldset>

</form>


</script>

	<script id="messageFormListTemplate" type="text/x-jquery-tmpl">
<table id='messagetable' width='100%'>
<button id="addMessages{{=id}}"  class="addMessages ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add New Message
</span>
</button>

<thead>
	<tr>
		<th>Id</th>
        <th>templateDescription</th>
        <th>subject</th>
        <th>header</th>
        <th>body</th>
        <th>footer</th>
        <th>Parameters</th>
        <th>&nbsp</th>
	
	</tr>
</thead>
<tbody>
{{#each crudRows}}
    <tr>
       <td>{{=id}}</td>
       <td>{{=templateDescription}}</td>
       <td>{{=subject}}</td>
        <td>{{=header}}</td>
      <td>{{=body}}</td>
      <td>{{=footer}}</td>
      <td>{{=messageParameters}}</td>
     
      <td>
        <a id='updateMessage{{=id}}' class='updateMessage' href='#' style='margin-right: 5px;' >{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteMessage{{=id}}' class='deleteMessage' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
     </td>
  </tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="messageFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" method="POST">
    <div id="formerrors"></div>
    
 <div id ="messageformdetails" style="margin-top: 5px;">
  <fieldset>
		
		     <legend>{{=$ctx.doI18N("dialog.title.add.message")}}</legend>
                   <table>
		              <tr>
			             <td valign="top" style="padding-right: 15px;">
				             <table>
					              <tr>
                              		 <td>
                                           <label for="templateDescription">{{=$ctx.doI18N("form.label.message.templateDescription")}}</label>
                                     </td>
                                     </tr>
                                   <tr>
                                     <td> 
	                                      <input id="templateDescription" name="templateDescription" style="height:20px;" class="text ui-widget-content ui-corner-all" title="" type="text" value="{{=templateDescription}}"size="42"/>
                                     <td>
                                 </tr>
					            
                                     <td>
                                           <label for="header">{{=$ctx.doI18N("form.label.message.header")}}</label>
                                     </td>
                                   </tr>
                                   <tr>
	                                 <td>
                                         <textarea rows="2" cols="40" id="header" name="header"  class="text ui-widget-content ui-corner-all" cssClass="text ui-widget-content ui-corner-all">{{=header}}</textarea> 
                                    </td>
                                </tr>
                           </table>
                       </td>
                       <td valign="top" style="padding-left: 5px; padding-right: 5px;">
                            <table>
					              <tr>
				                     <td>
                                      
                                            <label for="subject">{{=$ctx.doI18N("form.label.message.subject")}}</label>
                                     </td>
                                        </tr>
                                   <tr>
	                                 <td>
                                           
                                          <input id="subject" name="subject" title="" style="height:20px;" class="text ui-widget-content ui-corner-all" type="text" value="{{=subject}}"size="42"/>
                                      </td>
                                    </tr>
                                 <tr>
                                    <td>
                                         <tr>
                                                <td>
                                                      <label for="footer">{{=$ctx.doI18N("form.label.message.footer")}}</label>
                                                 </td>
                                                </tr>
                                              <tr>
	                                             <td>
                                                       <textarea rows="2" cols="40" id="footer" name="footer" class="text ui-widget-content ui-corner-all" cssClass="text ui-widget-content ui-corner-all">{{=footer}}</textarea> 
                                                 </td>
                                             </tr>
	                                     </tr>
                                     </table>
                                   </td>
                                </tr>
                                 <tr>
                                  <td>   
                             </table>
                       <label for="body">{{=$ctx.doI18N("form.label.message.body")}}</label>
                        
                       <textarea rows="3" cols="40" id="body" name="body" class="text ui-widget-content ui-corner-all" cssClass="text ui-widget-content ui-corner-all">{{=body}}</textarea>    
    </fieldset>
<fieldset>

	<legend>{{=$ctx.doI18N("Message Params")}}</legend>
		<div>
			<b>{{=$ctx.doI18N("label.add.addon.messageparams")}}</b>
			<button id="addAddOnmessagedetails">{{=$ctx.doI18N("button.addon.add")}}</button><br/><br/>
		</div>
		<div id="messageparameters">	
		</div>

</fieldset>

</div>			
</form>
</script>

	<script id="messageparamFormTemplate" type="text/x-jquery-tmpl">
<p id="msgsize">
    <label for="{{=parameter}}" style="display: inline">
		<input type="text" id="{{=parameter}}" value="{{=param}}" placeholder="Parameter Name" />
	
	<button id="{{=deleteButtonId}}"> {{=activity}} </button>
</p>
</script>

	<script id="prospectListTemplate" type="text/x-jquery-tmpl">
<table id='prospectstable' width='100%'>
<button id="newprospect" onClick="addProspect();return false;" class="newprospect ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Make Prospect
</span>
</button>

<thead>
	<tr>
		 <th>Prospect Id</th>
		 <th>Name</th>
		 <th>Email Id</th>
		 <th>Phone Number</th>
		 <th>Address</th>
		 <th>Note</th>
		 <th>Status</th>
		 <th>Edit</th>
		 <th>Cancle</th>
		 <th>Convert</th>
		 

		
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td><a onclick="viewHistoryOfProspect('{{=id}}'); return false;" href='#' style='margin-right: 5px;'>{{=id}}</a></td>
	<td>{{=firstName}}&nbsp;{{=lastName}}</td>
	<td>{{=email}}</td>		
	<td>{{=mobileNumber}}</td>
	<td>{{=address}}&nbsp;{{=streetArea}}&nbsp;{{=cityDistrict}}&nbsp;{{=state}}&nbsp;{{=country}}</td>
	<td>{{=note}}</td>
	<td>{{=status}}</td>
	{{#if status ==='Closed'}}
		<td>{{=$ctx.doI18N("link.action.edit.prospect")}}</td>
		<td>{{=$ctx.doI18N("link.action.delete.prospect")}}</td>
		<td>{{=$ctx.doI18N("link.action.convert.prospect")}}</td>
	{{#else}}
	{{#if isDeleted ==='N'}}
	<td><a onclick="appendProspectClient('{{=id}}'); return false;" href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.edit.prospect")}}</a></td>
	<td><a onclick="cancelProspectClient('{{=id}}'); return false;" href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete.prospect")}}</a></td>
	<td><a onclick="convertProspectToClient('{{=id}}'); return false;" href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.convert.prospect")}}</a></td>
	{{#else}}
	<td>{{=$ctx.doI18N("link.action.edit.prospect")}}</td>
	<td>{{=$ctx.doI18N("link.action.delete.prospect")}}</td>
	<td>{{=$ctx.doI18N("link.action.convert.prospect")}}</td>
	{{/if}}
	{{/if}}
</tr>

{{/each}}
</tbody>
</table>
</script>

	<script id="prospectFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">

	    <div id="formerrors" style="color:red"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.view.prospect")}}</legend>
	<table>
	<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>

				<tr>
				<td align="right">
					<label for="prospectType">{{=$ctx.doI18N("form.label.prospect.type")}}</label>
				</td>
				<td>
					<input type="radio" name="prospectType" value="1" checked="true">{{=$ctx.doI18N("label.individual")}}</input>
					<input type="radio" name="prospectType" value="2">{{=$ctx.doI18N("label.corporate")}}</input>
				</td>
				</tr>

				<tr>
				<td align="right">
					<label for="firstName">{{=$ctx.doI18N("form.label.prospect.firstname")}}</label>
				</td>
				<td>
					<input id="firstName" name="firstName"  class="text ui-widget-content ui-corner-all" type="text" value="{{=firstName}}" size=22/>
				</td>
				</tr>

				<tr>
				<td align="right">
					<label for="middleName">{{=$ctx.doI18N("form.label.prospect.middlename")}}</label>
				</td>
				<td>
					<input id="middleName" name="middleName" type="text"  class="text ui-widget-content ui-corner-all" value="{{=middleName}}" size=22/>
				</td>
				</tr>

				<tr>
				<td align="right">
					<label for="lastName">{{=$ctx.doI18N("form.label.prospect.lastname")}}</label>
				</td>
				<td>
					<input id="lastName" name="lastName" type="text"  class="text ui-widget-content ui-corner-all" value="{{=lastName}}" size=22/>
				</td>
				</tr>   												
			</table>
			
 		</td>
		<td valign="top" style="padding-right: 15px;">
			<table>
				<tr>
				<td align="right">
					<label for="homePhoneNumber">{{=$ctx.doI18N("form.label.prospect.homephonenumber")}}</label>
				</td>
				<td>
					<input id="homePhoneNumber" name="homePhoneNumber" type="text"  class="text ui-widget-content ui-corner-all" value="{{=homePhoneNumber}}" size=22/>
				</td>
				</tr>

				<tr>
				<td align="right">
					<label for="workPhoneNumber">{{=$ctx.doI18N("form.label.prospect.workphonenumber")}}</label>
				</td>
				<td>
					<input id="workPhoneNumber" name="workPhoneNumber" type="text" value="{{=workPhoneNumber}}"  class="text ui-widget-content ui-corner-all" size=22/>
				</td>
				</tr>

				<tr>
				<td align="right">
					<label for="mobileNumber">{{=$ctx.doI18N("form.label.prospect.mobilenumber")}}</label>
				</td>
				<td>
					<input id="mobileNumber" name="mobileNumber" type="text"  class="text ui-widget-content ui-corner-all" value="{{=mobileNumber}}" size=22/>
				</td>
				</tr>

				<tr>
				<td align="right">
					<label for="email">{{=$ctx.doI18N("form.label.prospect.email")}}</label>
				</td>
				<td>
					<input id="email" name="email" type="text" value="{{=email}}" size=22  class="text ui-widget-content ui-corner-all" />
					<input id="locale" name="locale" type="hidden" value="{{=$ctx.currentLocale()}}" size=22/>
				</td>
				</tr>
				
			</table>
		</td>
	</tr>
</table>
</fieldset>
<fieldset>
	<legend>{{=$ctx.doI18N("dialog.title.view.prospect.address")}}</legend>

		<table>
			<tr>
				<td valign="top" style="padding-right: 15px;" style="border:thick solid black;border-width:2px;">
					<table>
						<tr>
							<td align="right">
								<label for="address">{{=$ctx.doI18N("form.label.prospect.address")}}</label>
							</td>
							<td>
								<input id="address" name="address" type="text" value="{{=address}}" style="height:20px;width:256px;" size=33  class="text ui-widget-content ui-corner-all" />
							</td>
						</tr>
						<tr>
							<td align="right">
								<label for="streetArea">{{=$ctx.doI18N("form.label.prospect.area")}}</label>
							</td>
							<td>
								<input id="streetArea" name="streetArea" type="text" value="{{=streetArea}}"  style="height:20px;width:256px;" class="text ui-widget-content ui-corner-all" size=33/>
							</td>
						</tr>
						<tr>
							<td align="right">
								<label for="cityDistrict">{{=$ctx.doI18N("form.label.prospect.district")}}</label>
							</td>
							<td>
								<input id="cityDistrict" name="cityDistrict" type="text" value="{{=cityDistrict}}" size=22  class="text ui-widget-content ui-corner-all" />
							</td>
						</tr>
						<tr>
							<td align="right">
								<label for="state">{{=$ctx.doI18N("form.label.prospect.region")}}</label>
							</td>
							<td>
								<input id="state" name="state" type="text" value="{{=state}}" size=22  class="text ui-widget-content ui-corner-all" />
							</td>
						</tr>
					
						<tr>
							<td align="right">
								<label for="country">{{=$ctx.doI18N("form.label.prospect.city")}}</label>
							</td>
							<td>
								<input id="country" name="country" type="text" value="{{=country}}" size=22  class="text ui-widget-content ui-corner-all"/>
							</td>
						</tr>
						<tr>
							<td align="right">
								<label for="zipCode">{{=$ctx.doI18N("form.label.prospect.zipCode")}}</label>
							</td>
							<td>
								<input id="zipCode" name="zipCode" type="text" value="{{=zipCode}}" style="height:20px;width:256px;"  class="text ui-widget-content ui-corner-all" size=33/>
							</td>
						</tr>
																		
					</table>
				</td>
				<td valign="top" style="padding-right: 15px;">
					<table>
						<tr>
							<td align="right">
								<label for="source">{{=$ctx.doI18N("form.label.prospect.source")}}</label>
							</td>
							<td>
								<select name="sourceOfPublicity" id="source" title="" style="width: 178px;">
									<option value="">{{=$ctx.doI18N("option.prospect.source.first.choice")}}</option>
										{{#each sourceOfPublicityData}}
											{{#if mCodeValue}}
												{{#if $parent.parent.parent.data.sourceOfPublicity === mCodeValue}}
													<option value="{{=id}}" selected="selected">{{=mCodeValue}}</option>	
											{{#else}}
													<option value="{{=id}}">{{=mCodeValue}}</option>
												{{/if}}
											{{/if}}
			            				{{/each}}  
								</select>
							</td>
						</tr>
						<tr>
							<td align="right">
								<label for="preferredPlan">{{=$ctx.doI18N("form.label.prospect.plan")}}</label>
							</td>
							<td>
								<select name="preferredPlan" id="plan" title="" style="width: 178px;">
									<option value="">{{=$ctx.doI18N("option.prospect.plan.first.choice")}}</option>
										{{#each planData}}
												<option value="{{=id}}">{{=planDescription}}</option>	
			            				{{/each}}  
								</select>
							</td>
						</tr>		
						<tr>
							<td align="right">
								<label for="preferredCallingTime">{{=$ctx.doI18N("form.label.prospect.preferred.calling.time")}}</label>
							</td>
							<td>
								<input id="preferredCallingTime" name="preferredCallingTime" type="text" class="text ui-widget-content ui-corner-all datepickerfield" size=22/>
							</td>
						</tr>
						<tr>
							<td align="right">
                                  <label for="note">{{=$ctx.doI18N("form.label.prospect.note")}}</label>
							</td>	
							<td>
								
								<textarea name="note" cols="25" rows="5">{{=note}}</textarea>
							</td>	
						</tr>
					</table>
				</td>
			</tr>
		</table>
</fieldset>
</form>
</script>

	<script id="prospectdetailFormTemplate" type="text/x-jquery-tmpl">
	
	<form id="entityform">
		<div id="formerrors"></div>
		<fieldset>
				<legend>{{=$ctx.doI18N("dialog.title.view.prospectdetail")}}</legend>
		<table>
			<tr>
				<td valign="top" style="padding-right: 15px;">
					<table>
						<tr>
							<td align="right">
								<label for="callStatus">{{=$ctx.doI18N("form.label.prospectdetail.callstatus")}}</label>
							</td>
							<td>
								<select name="callStatus" id="callStatus" title="" style="width: 182px;">
									<option value="">{{=$ctx.doI18N("option.prospectdetail.callstatus.first.choice")}}</option>'
									{{#each callStatusData}}
										<option value="{{=statusId}}">{{=callStatus}}</option>
									{{/each}}	
								</select>
							</td>
						</tr>
						<tr>
							<td align="right">
								<label for="preferredCallingTime">{{=$ctx.doI18N("form.label.prospectdetail.nextcalltime")}}</label>
							</td>
							<td>
								<input id="locale" name="locale" type="hidden">
								<input id="preferredCallingTime" name="preferredCallingTime" type="text" class="datepickerfield" size=22/>
								
							</td>
						</tr>
						<tr>
							<td align="right"><label for="assignedTo">{{=$ctx.doI18N("form.label.prospectdetail.assignedto")}}</label></td>
							<td>
								<select name="assignedTo" id="assignedTo" title="" style="width: 182px;">
									<option value="">{{=$ctx.doI18N("form.label.prospectdetail.assignedto")}}</option>
									{{#each assignedToData}}
										<option value="{{=assignId}}">{{=assignedTo}}</option>
									{{/each}}										
								</select>
							</td>
						</tr>	
						<tr>		
							<td align="right">
								
							</td>
							<td>
								<label for="notes">{{=$ctx.doI18N("form.label.prospectdetail.notes")}}:</label>
								<textarea rows="5" cols="50" id="notes" name="notes">{{=notes}}</textarea>
							</td>
						</tr>
					
					</table>
				</td>
			</tr>
		</table>
	
					


		</fieldset>
	</form>
	
</script>
	<script id="prospecthistoryFormTemplate" type="text/x-jquery-tmpl">

<table id="generictable" width='100%'>
<thead>
<tr>
<th>Call Status</th>
<th>Next Calling Time</th>
<th>Notes</th>
<th>Assigned To</th>
</tr>
</thead>
<tbody>
{{#each prospectDetailData}}
    <tr>
       <td>{{=callStatus}}</td>
		<td>{{=$ctx.globalDateTime(nextTime)}}</td>
		<td>{{=notes}}</td>
		<td>{{=assignedTo}}</td>
     
  </tr>
{{/each}}
</tbody>
</table></script>

	<script id="cancelprospectFormTemplate" type="text/x-jquery-tmpl">
	<form>
		<div id="formerrors"></div>

	<table>
		<tr>
			<td align="right">
				<label for="statusRemark">{{=$ctx.doI18N("form.label.prospectdetail.status.remark")}}</label>
			</td>
			<td>
				<select name="statusRemark" id="statusRemark" title="" style="width: 182px;"">
						<option value="">{{=$ctx.doI18N("option.prospectdetail.status.remark.first.choice")}}</option>
					{{#each statusRemarkData}}
						<option value="{{=statusRemarkId}}">{{=statusRemark}}</option>
					{{/each}}
				</select>		
			</td>
		</tr>
	</table>
	</form>
</script>

	<script id="ownedhardwareListTemplate" type="text/x-jquery-tmpl">
<button id="newownedhardware" class="newownedhardware ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add Owned Hardware
</span>
</button>
<table id='ownedhardwaretable' width='100%'>
<thead>
	<tr>
	
		 <th>Id</th>
		 <th>Serial Number</th>
		 <th>Provisioning SerialNumber</th>
		 <th>Allocation Date</th>
		 <th>Status</th>
		 <th>Item Type</th>		
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	
	<td>{{=id}}</td>	
	<td>{{=serialNumber}}</td>
	<td>{{=provisioningSerialNumber}}</td>
	<td>{{=$ctx.globalDate(allocationDate)}}</td>
	<td>{{=status}}</td>
	<td>{{=itemType}}</td>
</tr>
{{/each}}
</tbody>
</table>
</script>




	<script id="ownedhardwareFormTemplate" type="text/x-jquery-tmpl">
	<form id="entityform">
    <div id="formerrors"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.add.item")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>
    	               	<td>
                         <label for="itemType">{{=$ctx.doI18N("form.label.ownedhardware.itemType")}}</label>
                        </td>
                    </tr>
				    <tr>
                        <td>
	                        <select name="itemType" id="itemType" title="" style="width:179px;"">
							  <option value="">{{=$ctx.doI18N("option.ownedhardware.itemtype.first.choice")}}</option>
							 {{#each itemDatas}}
							    <option value="{{=id}}">{{=itemDescription}}</option>
							 {{/each}}	
						   </select>
                    <td>
                </tr>
				<tr>
     				<td>
                      <label for="serialNumber">{{=$ctx.doI18N("form.label.ownedhardware.serialNumber")}}</label>
                      <input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
	                  <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
                   </td>
                </tr>
				<tr>
                  <td>
                     <input type="text" name="serialNumber" id="serialNumber" class="text ui-widget-content ui-corner-all" value="{{=serialNumber}}" size="22" title=""/>
                </td>
             </tr>
         </table>
      </td>
      <td valign="top" style="padding-left: 5px; padding-right: 5px;">
               <table>
					<tr>
				       <td>
                            <label for="provisioningSerialNumber">{{=$ctx.doI18N("form.label.ownedhardware.provisioningSerialNumber")}}</label>
                       </td>
                    </tr>
                    <tr> 
                 	   <td> 
                         <input type="text" name="provisioningSerialNumber" class="text ui-widget-content ui-corner-all"  id="provisioningSerialNumber" value="{{=provisioningSerialNumber}}" title="" size="22"/>
                     </td>
               </tr>
               <tr>
                 <td>
                 <label for="allocationDate">{{=$ctx.doI18N("form.label.ownedhardware.allocationdate")}}</label>
               </td>
                 </tr>
               <tr>
              <td>
               <input id="allocationDate" name="allocationDate" title="" type="text" class="text ui-widget-content ui-corner-all datepickerfield" size="22" value="{{=$ctx.globalDate(allocationDate)}}" />
               	<input type="hidden" name="status" id="status" title="" size="22" value="{{=status}}"/>
	         </td>
           </tr>
           
	</table>
   </td>
  </tr>
</table>
</fieldset>
</form>
</script>

	<script id="inventoryHomeTemplate" type="text/x-jquery-tmpl">
<div id="inventorytabs">
    <ul>
         <li><a href="#items-tab">{{=$ctx.doI18N("tab.inventory.grn.items")}}</a></li>
         <li><a href="#supplier-tab">{{=$ctx.doI18N("tab.supplier")}}</a></li>
        <li><a href="#grn-tab">{{=$ctx.doI18N("tab.inventory.grn")}}</a></li>
        <li><a href="#itemdetails-tab">{{=$ctx.doI18N("tab.inventory.grn.item.details")}}</a></li>
        <li><a href="#mrndetails-tab">{{=$ctx.doI18N("tab.inventory.mrn.details")}}</a></li>
		<li><a href="#mrndetailshistory-tab">{{=$ctx.doI18N("tab.inventory.mrn.detailshistory")}}</a></li>
		
    </ul>
   <div id="items-tab">
    </div>
   <div id="supplier-tab">
    </div>
    <div id="grn-tab">
    </div>
    <div id="itemdetails-tab">
    </div>
<div id="mrndetails-tab">
    </div>
	<div id="mrndetailshistory-tab">
    </div>
	
    
</div>
</script>

	<script id="countrycurrencyListTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
<table id='countrycurrencystable' width='100%'>
<button id="newcurrency" onClick="addCurrency();return false;"class="newtaxmap ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add
</span>
</button>
<thead>
	<tr>
		<th>Id</th>
		<th>Country</th>
		<th>Currency</th>
		<th>Status</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td> {{=id}} </td>
	<td> {{=country}} </td>
	<td> {{=currency}} </td>
	<td> {{=status}} </td>
	<td>
       <a id='editcountrycurrency{{=id}}' class='editcountrycurrency' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletecountrycurrency{{=id}}' class='deletecountrycurrency' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
    </td>
</tr>

{{/each}}
</tbody>
</table>
</form>
</script>

	<script id="countrycurrencyFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.currency.details")}}</legend>
		<table cellspacing="4px" cellpadding="8px">
			<tr>
				
			</tr>
			<tr>
				<td>
					<label for="country">{{=$ctx.doI18N("label.country")}}</label>
						<select id="country" name="country" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each countryData}}
                                
							{{#if $parent.parent.data.country===$data}}
								<option value="{{=$data}}" selected="selected">{{=$data}}</option>
							{{#else}}
								<option value="{{=$data}}">{{=$data}}</option>
							{{/if}}
				        {{/each}}
					</select>

				</td>
				<td>	
					<label for="lastname">{{=$ctx.doI18N("label.currency")}}</label>
						<select id="currency" name="currency" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each currencydata}}
                                {{#each currencyOptions}}
							{{#if $parent.parent.parent.data.currency===code}}
								<option value="{{=code}}" selected="selected">{{=displayLabel}}</option>
							{{#else}}
								<option value="{{=code}}">{{=displayLabel}}</option>
							{{/if}}
				        {{/each}}
                     {{/each}}
					</select>

				</td>
			</tr>
			<tr>
				<td colspan="2">
					<label for="status">{{=$ctx.doI18N("label.status")}}</label>
						<select id="status" name="status" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each currencystatus}}
							{{#if  $parent.parent.data.status===value}}
								<option value="{{=value}}" selected="selected">{{=value}}</option>
							{{#else}}
								<option value="{{=value}}">{{=value}}</option>
							{{/if}}
				        {{/each}}
					</select>

				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>

<script id="regionListTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
<table id='regionstable' width='100%'>
<button id="newregion" onClick="addregion();return false;"class="newtaxmap ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add New Region
</span>
</button>
<thead>
	<tr>
		<th>Id</th>
		<th>Region Code</th>
		<th>Region Name</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td> {{=id}} </td>
	<td> {{=regionCode}} </td>
	<td> {{=regionName}} </td>
	<td>
       <a id='editregion{{=id}}' class='editregion' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteregion{{=id}}' class='deleteregion' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
    </td>
</tr>

{{/each}}
</tbody>
</table>
</form>
</script>

<script id="regionFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.region.details")}}</legend>
<table> 
         <tr>
          <td>
		   <label for="regionCode">{{=$ctx.doI18N("label.regioncode")}}</label>
         </td>
       </tr>
       <tr>
          <td>
		     <input id="regionCode" name="regionCode" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=regionCode}}" size="22"/>
            </td>
          </tr>
           <tr>
           <td>
        <label for="regionName">{{=$ctx.doI18N("label.regionName")}}</label>
           </td>
          </tr>
          <tr>
            <td>
		<input id="regionName" name="regionName" title="" type="text" class="text ui-widget-content ui-corner-all"  value="{{=regionName}}" size="22"/>
            </td>
          </tr>
          <tr>
           <td>
 		<label for="countryId">{{=$ctx.doI18N("label.country")}}</label>
          </td>
         </tr>
          <tr>
             <td>
		
		<select id="countryId" name="countryId" title="" style="width:178px;">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each countryData}}
				{{#if $ctx.number($parent.parent.data.countryId)===$ctx.number(id)}}
					<option value="{{=$ctx.number(id)}}" selected="selected">{{=countryName}}</option>
				{{#else}}
					<option value="{{=$ctx.number(id)}}">{{=countryName}}</option>
				{{/if}}
            {{/each}}
					</select>
                 {{#if isDefault == "Y"}}
               <input type="checkbox" id="all" name="all" title="" style="width: 30px;" checked>{{=$ctx.doI18N("form.label.region.all")}}</input>
              {{#else}}
                    <input type="checkbox" id="all" name="all" title="" style="width: 30px;">{{=$ctx.doI18N("form.label.region.all")}}</input>
              {{/if}}
		</td>
       </tr>
     </table>

		<div id="cover" class="multiselectwidget">
			<label for="notSelectedStates">{{=$ctx.doI18N("form.label.region.available.states")}}</label>
			<select id="notSelectedStates" name="notSelectedStates" title="Available states." class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:450px;height:125px;">
			{{#each statesData}}
				<option value="{{=id}}">{{=stateName}}</option>
            {{/each}}
			</select>
			<a href="#" id="addstates" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
		</div>
		
		<div class="multiselectwidget">
			<label for="states">{{=$ctx.doI18N("form.labelregion.selected.states")}}</label>
			<select id="states" name="states" title=" selected states." class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:450px;height:125px;">
			{{#each regionDetails}}
				<option value="{{=id}}" selected="selected">{{=stateName}}</option>
            {{/each}}
			</select>
			<a href="#" id="removestates" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
		</div>
	</fieldset>
</form>
</script>

<script id="discountListTemplate" type="text/x-jquery-tmpl">
<table id='discountstable' width='100%'>
<button id="newdiscount" onClick="addDiscount();return false;" class="newdiscount ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add Discount
</span>
</button>

<thead>
	<tr>
		 <th>Id</th>
		 <th>Discount Code</th>
		 <th>Discount Description</th>
		 <th>Discount Type</th>
		 <th>Discount Rate</th>
		 <th>Start Date</th>
		 <th>Status</th>
		 <th>&nbsp;</th>

		
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=discountMasterId}}</td>
	<td>{{=discountCode}}</td>
	<td>{{=discountDescription}}</td>		
	<td>{{=discounType}}</td>
	<td>{{=$ctx.decimal(discountRate, 2)}}</td>
	<td>{{=$ctx.globalDate(discountStartDate)}}</td>
	<td>{{=discountstatus}}</td>
    <td>
       <a id='editdiscount{{=discountMasterId}}' class='editdiscount' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletediscount{{=discountMasterId}}' class='deletediscount' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
    </td>
</tr>

{{/each}}
</tbody>
</table>
</script>

<script id="discountFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">

	    <div id="formerrors" style="color:red"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.view.adddiscount")}}</legend>
	<table>
	<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>
				<tr>
               	  <td align="right">
					 <label for="chargeCode">{{=$ctx.doI18N("form.label.discount.discountCode")}}</label>
               	 </td>
               	 <td>
		        	<input type="text" id="discountCode" name="discountCode"  title="" class="text ui-widget-content ui-corner-all" value="{{=discountCode}}" size="22" />
					<input type="hidden" value="dd MMMM yyyy" name="dateFormat" id="dateFormat">
             	 </td> 
			</tr>
			<tr>
				<td align="right">
					<label for="taxCode">{{=$ctx.doI18N("form.label.discount.discription")}}</label>
				</td>
				<td>
					<input type="text" id="discountDescription" name="discountDescription" class="text ui-widget-content ui-corner-all" title="" value="{{=discountDescription}}" size="22" />
				</td>
	    	</tr>            
			<tr>
		       <td align="right">
		 			<label for="startDate">{{=$ctx.doI18N("form.label.taxmap.startdate")}}</label>
			   </td>
				<td>
                 	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
					<input id="startDate" name="startDate" title="" type="text" value="{{=$ctx.globalDate(discountStartDate)}}" size="22" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint" />
   			   </td>
		   </tr>
	  </table>
    </td>
		<td valign="top" style="padding-right: 15px;">
			<table>
				<tr>
					<td align="right">
						<label for="type">{{=$ctx.doI18N("form.label.discount.type")}}</label>
					</td>
					<td>
						<select name="discountType" id="discountType" title="" style="width: 177px;">
						<option value="">{{=$ctx.doI18N("option.taxmaptype.first.choice")}}</option>
						 {{#each discounTypeData}}
                              {{#if $parent.parent.data.discounType===mCodeValue}}
     					          <option value="{{=mCodeValue}}" selected="selected" >{{=mCodeValue}}</option>
                        {{#else}}
  	                           <option value="{{=mCodeValue}}">{{=mCodeValue}}</option>
                        {{/if}}
	                 {{/each}}
					</select>
					</td>
				</tr>
				<tr>
					<td align="right">
						<label for="rate">{{=$ctx.doI18N("form.label.discount.rate")}}</label>
					</td>
					<td>
						<input type="text" id="discountRate" name="discountRate" title="" class="text ui-widget-content ui-corner-all" value="{{=discountRate}}" size="22" />
					</td>
				</tr>
                 <tr>
					<td align="right">
						<label for="type">{{=$ctx.doI18N("form.label.discount.status")}}</label>
					</td>
					<td>
						<select id="status" name="status"  title="" style="width: 177px;">
                          <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
                             {{#each status}}
                                 {{#if $parent.parent.data.discountstatus===value}}
     					           <option value="{{=value}}" selected="selected" >{{=value}}</option>
                                {{#else}}
  	                              <option value="{{=value}}">{{=value}}</option>
                               {{/if}}
	                       {{/each}}
		              </select>
					</td>
				</tr>
			</table>
		</td>
	</tr>

</table>

</fieldset>

</form>
</script>
<div id="chart_div"></div>

<script id="MRNDetailsListTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
	<button id="addMNRDetails" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
	<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
	</span>
	<span class="ui-button-text">
		{{=$ctx.doI18N("button.mrn.addmrn")}}
	</span>
	</button>
	<button id="moveMNRDetails" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" role="button" aria-disabled="false">
	<span class="ui-icon ui-icon-transfer-e-w"></span>
	<span class="ui-button-text">{{=$ctx.doI18N("button.mrn.movemrn")}}</span>
	</button>

<table id='mrndetailslisttable' width='100%'>

<thead>
	<tr>
		<th>Id</th>
		<th>Requested Date</th>
		<th>Item</th>
		<th>From</th>
		<th>To</th>
		<th>Requested Quantity</th>
       <th>Received Quantity</th>
       <th>Status</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
<td>{{=id}}</td>
<td>{{=$ctx.globalDate(requestedDate)}}</td>
<td>{{=itemDescription}}</td>
<td>{{=fromOffice}}</td>
<td>{{=toOffice}}</td>
<td>{{=orderdQuantity}}</td>
<td>{{=receivedQuantity}}</td>
<td>{{=status}}</td>
</tr>
{{/each}}
</tbody>
</table>
</form>
</script>

<script id="MRNDetailsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">

	    <div id="formerrors" style="color:red"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.view.mrn")}}</legend>
	<table>
			<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>
					
				<tr>
				<td>
                    <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
                    <input type="hidden" value="dd MMMM yyyy" name="dateFormat" id="dateFormat">
				</td>
				</tr>
                <tr>
               	<td align="right">
					<label for="requestedDate">{{=$ctx.doI18N("form.label.mrn.requesteddate")}}</label>
               	</td>
               	<td>
		        	<input type="text" id="requestedDate" name="requestedDate" title="" value="{{=$ctx.globalDate(requestedDate)}}" size="22" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint" />
             	</td> 
				</tr>
				<tr>
				<td align="right">
					<label for="itemDescription">{{=$ctx.doI18N("form.label.mrn.itemdescription")}}</label>
				</td>
				<td>
					<select id="itemDescription" name="itemDescription" title="" style="width: 177px;">
     				<option value="">{{=$ctx.doI18N("option.fromoffice.first.choice")}}</option>
   					  {{#each itemMasterData}}
     				  <option value="{{=$ctx.number(itemId)}}">{{=itemDescription}}</option>
   					  {{/each}}
   					 </select>
				</td>
				</tr>
				<tr>
				<td align="right">
					<label for="fromOffice">{{=$ctx.doI18N("form.label.mrn.fromoffice")}}</label>
				</td>
				<td>
					<select id="fromOffice" name="fromOffice" title="" style="width: 177px;">
     				<option value="">{{=$ctx.doI18N("option.fromoffice.first.choice")}}</option>
   					  {{#each officeData}}
     				  <option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
   					  {{/each}}
   					 </select>
				</td>
				</tr>
				<tr>
               	<td align="right">
					<label for="orderdQuantity">{{=$ctx.doI18N("form.label.item.orderdquantity")}}</label>
               	</td>
               	<td>
		        	<input type="text" id="orderdQuantity" name="orderdQuantity" title="" class="text ui-widget-content ui-corner-all" value="{{=orderdQuantity}}" size="22"/>
             	</td> 
			</tr>				            
			</table>
 		</td>
		<td valign="top" style="padding-right: 15px;">
			<table>
			 <tr></tr>
			<tr>
				<td align="right">
					<label for="toOffice">{{=$ctx.doI18N("form.label.mrn.tooffice")}}</label>
				</td>
				<td>
					<select id="toOffice" name="toOffice" title="" style="width: 177px;">
     				<option value="">{{=$ctx.doI18N("option.tooffice.first.choice")}}</option>
   					  {{#each officeData}}
     				  <option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
   					  {{/each}}
   					 </select>
				</td>
				</tr>
			</table>	
		</td>
</tr>
</table>

	</fieldset>

</form>
</script>

<script id="MRNDetailsMoveFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">

	    <div id="formerrors" style="color:red"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.view.movemrn")}}</legend>
	<table>
			<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>
				<tr>
				<td align="right">
					<label for="mrnId">{{=$ctx.doI18N("form.label.mrn.mrnId")}}</label>
				</td>
				<td>
					<select id="mrnId" name="mrnId" title="" style="width: 177px;">
     				<option value="">{{=$ctx.doI18N("option.mrnId.first.choice")}}</option>
   					  {{#each mrnIds}}
     				  <option value="{{=$ctx.number(mrnId)}}">{{=mrnId}}&nbsp;&nbsp;{{=itemDescription}}</option>
   					  {{/each}}
   					 </select>
				</td>
				</tr>
				<tr>
               	<td align="right">
					<label for="serialNumber">{{=$ctx.doI18N("form.label.item.serialnumber")}}</label>
               	</td>
               	<td>
		        	<input type="text" id="serialNumber" name="serialNumber" title="" class="text ui-widget-content ui-corner-all" value="{{=serialNumber}}" size="22"/>
					<input type="hidden" id="locale" name="locale" title="" value="{{=$ctx.currentLocale()}}" size="22"/>
					<input type="hidden" id="movedDate" name="movedDate" title="" value="" />
             	</td> 
			</tr>				            
			</table>
 		</td>
		<td valign="top" style="padding-right: 15px;">
			<table>
			</table>	
		</td>
</tr>
</table>
	
	</fieldset>

</form>
</script>

<script id="MRNDetailsHistoryListTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
<table id='mrndetailshistorylisttable' width='100%'>

<thead>
	<tr>
		<th>Id</th>
		<th>Ref Id</th>
		<th>Ref Type</th>
		<th>Item</th>
		<th>Serial Number</th>
		<th>Moved Date</th>
		<th>Movement</th>
		<th>Moved From</th>
       <th>Move To</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
<td>{{=id}}</td>
<td>{{=mrnId}}</td>
<td>{{=refType}}</td>
<td>{{=itemDescription}}</td>
<td>{{=serialNumber}}</td>
<td>{{=$ctx.globalDate(transactionDate)}}</td>
<td>{{=movement}}</td>
<td>{{=fromOffice}}</td>
<td>{{=toOffice}}</td>
</tr>
{{/each}}
</tbody>
</table>
</form>
</script>
<script id="supplierListTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
<button id="addnewsupplier" class="addnewsupplier ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
{{=$ctx.doI18N("supplier.add.supplier")}}
</span>
</button>

<table id='supplierlisttable' width='100%'>

<thead>
	<tr>
		<th>Id</th>
		<th>Supplier Code</th>
		<th>Supplier Description</th>
		<th>Supplier Address</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td> {{=id}} </td>
	<td> {{=supplierCode}} </td>
	<td> {{=supplierDescription}} </td>
	<td> {{=supplierAddress}} </td>	
</tr>

{{/each}}
</tbody>
</table>
</form>
</script>
<script id="supplierFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">

	    <div id="formerrors"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.view.supplier")}}</legend>
	<table>
			<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>
			<tr>
				<td align="right">
					<label for="supplierCode">{{=$ctx.doI18N("form.label.supplier.suppliercode")}}</label>
				</td>
				<td>
					<input type="text" id="supplierCode" name="supplierCode" title="" class="text ui-widget-content ui-corner-all" value="{{=supplierCode}}" size="22"/>
				</td>
				</tr>
			<tr>
               	<td align="right">
					<label for="supplierDescription">{{=$ctx.doI18N("form.label.supplier.supplierdescription")}}</label>
               	</td>
               	<td>
		        	<input type="text" id="supplierDescription" name="supplierDescription" title="" class="text ui-widget-content ui-corner-all" value="{{=supplierDescription}}" size="22"/>
             	</td> 
			</tr>
			<tr>
               	<td align="right">
					<label for="supplierAddress">{{=$ctx.doI18N("form.label.supplier.supplieraddress")}}</label>
               	</td>
		        <td><textarea id="supplierAddress" class="text ui-widget-content ui-corner-all" name="supplierAddress" cols="25" rows="5">{{=supplierAddress}}</textarea></td> 
			</tr>				            
			</table>
 		</td>
		<td valign="top" style="padding-right: 15px;">
			<table>
			</table>	
		</td>
</tr>
</table>
	
	</fieldset>

</form>
</script>
<script id="randomgeneratorFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	 
	<fieldset>
	   <legend>{{=$ctx.doI18N("form.legend.randomGenerator.details")}}</legend>
	   <table> 
           <tr>
	         <td valign="top" style="padding-left: 15px;">
	              <table>
					    <tr>
					          <td align="right">
								<label for="batchName">{{=$ctx.doI18N("label.randomGenerator.batchName")}}</label>
						      </td>
							  <td>
								<input id="batchName" name="batchName" title="" class="text ui-widget-content ui-corner-all" type="text" value="{{=batchName}}" size="22"/>
							  </td>
						</tr>
						<tr>
						      <td align="right">
								<label for="batchDescription">{{=$ctx.doI18N("label.randomGenerator.batchDescription")}}</label>
							  </td>
							  <td>	
								<input id="batchDescription" name="batchDescription" class="text ui-widget-content ui-corner-all" title="" type="text" value="{{=batchDescription}}" size="22"/>
						      </td>
						</tr>
						<tr>						   
							  <td align="right">	
								<label for="length">{{=$ctx.doI18N("label.randomGenerator.length")}}</label>
							  </td>
							  <td>		
								<input id="length" name="length" title="" type="text" class="text ui-widget-content ui-corner-all" value="{{=length}}" size="22"/>
						      </td>  
						</tr>
						<tr>
						      <td align="right">
								<label for="beginWith">{{=$ctx.doI18N("label.randomGenerator.beginWith")}}</label>
							  </td>
							  <td>	
								<input id="beginWith" name="beginWith" title="" type="text" class="text ui-widget-content ui-corner-all" value="{{=beginWith}}" size="22"/>
                              </td>						
						</tr>
				        <tr>
				              
						        {{#if pinCategoryData.length > 0}}
						      <td align="right">
								<label for="pinCategoryData">{{=$ctx.doI18N("form.label.randomGenerator.pinCategory")}}</label>
							  </td>
							  <td>
								<select id="pinCategory" name="pinCategory" title="" style="width:177px">
						            <option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
									{{#each pinCategoryData}}
										{{#if $ctx.number($parent.parent.data.parentId)===$ctx.number(id)}}
											<option value="{{=value}}" selected="selected">{{=value}}</option>
										{{#else}}
											<option value="{{=value}}">{{=value}}</option>
										{{/if}}
						            {{/each}}
								</select>
							   </td>	
								{{/if}}
						</tr>
				  </table>
				</td> 
				<td valign="top" style="padding-left:36px;">
			       <table>		
						<tr>
						      <td align="right">
								<label for="quantity">{{=$ctx.doI18N("label.randomGenerator.quantity")}}</label>
							  </td>	
							  <td>	
								<input id="quantity" name="quantity" title="" type="text" class="text ui-widget-content ui-corner-all" value="{{=quantity}}" size="22"/>
						      </td>
						</tr>
						<tr>
						      <td align="right" > 
								<label for="serialNo">{{=$ctx.doI18N("label.randomGenerator.serialNo")}}</label>
							  </td>
							  <td>
								<input id="serialNo" name="serialNo" title="" type="text" class="text ui-widget-content ui-corner-all" value="{{=serialNo}}" size="22"/>
						      </td>
						</tr>
						<tr>
								 {{#if pinTypeData.length > 0}}
							  <td align="right">	 
								<label for="pinTypeData">{{=$ctx.doI18N("form.label.randomGenerator.pinType")}}</label>
							  </td>	
							  <td>
								<select id="pinType" name="pinType" style="width:85px" onChange="showPinGroup(options[selectedIndex].value);">
						            <option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
									{{#each pinTypeData}}
										{{#if $ctx.number($parent.parent.data.parentId)===$ctx.number(id)}}
											<option value="{{=value}}" selected="selected">{{=value}}</option>
										{{#else}}
											<option value="{{=value}}">{{=value}}</option>
											
										{{/if}}
						            {{/each}}
								</select>
								<input id="pinValue" name="pinValue" title="" type="text" class="text ui-widget-content ui-corner-all" value="{{=pinValue}}" size="9"/>
								<input id="pinExtention" name="pinExtention" title="" class="text ui-widget-content ui-corner-all" type="text" value="" size="6" readonly/>
							   </td>	
								{{/if}}
								
								
				        </tr>
				        <tr>   
				             <td align="right">
				               <label for="expiryDate">{{=$ctx.doI18N("form.label.randomGenerator.expiryDate")}}</label>
							 </td>
							 <td> 	
								<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
								<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />	
								<input id="expiryDate" name="expiryDate" title="" type="text" value="" size="22" class="text ui-widget-content ui-corner-all datepickerfieldnoconstraint" />
				             </td>
				        </tr>
				  </table>
				 </td>
				</tr>        
       </table>
	</fieldset>
</form>
</script>

<script id="randomgeneratorListTemplate" type="text/x-jquery-tmpl">
<table id='randomgeneratorstable' width='100%'>
<button id="newrandomgeneratorbtn" onClick="addRandomGenerator();return false;" class="newrandomgeneratorbtn ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary myclass" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add 
</span>
</button>
	<thead>
		<tr>
		    <th>{{=$ctx.doI18N("table.heading.id")}}</th>
			<th>{{=$ctx.doI18N("table.heading.batchName")}}</th>
			<th>{{=$ctx.doI18N("table.heading.batchDescription")}}</th>
			<th>{{=$ctx.doI18N("table.heading.length")}}</th>
			<th>{{=$ctx.doI18N("table.heading.beginWith")}}</th>
			<th>{{=$ctx.doI18N("table.heading.pinCategory")}}</th>
			<th>{{=$ctx.doI18N("table.heading.quantity")}}</th>
			<th>{{=$ctx.doI18N("table.heading.serialNo")}}</th>
			<th>{{=$ctx.doI18N("table.heading.pinType")}}</th>
			<th>{{=$ctx.doI18N("table.heading.pinValue")}}</th>
			<th>{{=$ctx.doI18N("table.heading.expiryDate")}}</th>
		</tr>
	</thead
	<tbody>
{{#each crudRows}}
<tr>
    <td>{{=id}}</td>
	<td>{{=batchName}}</td>
	<td>{{=batchDescription}}</td>
	<td>{{=length}}</td>
	<td>{{=beginWith}}</td>
	<td>{{=pinCategory}}</td>
	<td>{{=quantity}}</td>
	<td>{{=serialNo}}</td>
	<td>{{=pinType}}</td>
	<td>{{=pinValue}}</td>
	<td>{{=$ctx.globalDate(expiryDate)}}</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

<script id="showSchedulerStatusFormTemplate" type="text/x-jquery-tmpl">
	<table>
		<tr>
			<td width="450px" align="right"><b>{{=$ctx.doI18N("label.scheduler.job.status.label")}}</b></td>
			<td>
				{{#if active}}&nbsp;
					{{=$ctx.doI18N("label.scheduler.job.status.active")}}
				{{#else}}&nbsp;
					{{=$ctx.doI18N("label.scheduler.job.status.standby")}}
				{{/if}}
			</td>
			<td align="right" width="150px">
				{{#if active}}
					<button id="suspendScheduler" class="suspendScheduler">{{=$ctx.doI18N("button.job.suspend.scheduler")}}</button>
				{{#else}}
					<button id="activateScheduler" class="activateScheduler">{{=$ctx.doI18N("button.job.activate.scheduler")}}</button>
				{{/if}}
			</td>
		</tr>
	</table>
</script>

<script id="batchJobFormTemplate" type="text/x-jquery-tmpl">

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.job.details")}}</legend>
		<div id="showschedulerstatus"></div>
		<div id="schedularjobsSentForExecution"></div>
		<div id="selectAllDiv" style="background-color:#b0c4de;">
			<table>
				<td class="paddingL65 paddingR65"><input type = "checkbox" id="selectAllJobs" class="selectAllJobs"/></td>
				<td><label for="selectAll"><b>{{=$ctx.doI18N("label.batchjob.selectAll")}}</b></label></td> 
			</table>
		</div>
		<br/><br/>
		<div id="jobDetails">
			<table>
				{{#each crudRows}}
					<tr>
						<td class="paddingL65 paddingR65"><input type="checkbox" class="scheduleJob" id="jobId{{=jobId}}" value="{{=jobId}}"/></td>
						<td>
							<b>{{=displayName}}</b>
						</td>
						<td class="paddingL65">
							<button id="editjob{{=jobId}}" class="editjobbtn">{{=$ctx.doI18N("label.batchjob.edit.job.details")}}</button>&nbsp;
							<button id="jobHistory{{=jobId}}" class="jobHistory">{{=$ctx.doI18N("label.batchjob.view.history")}}</button>&nbsp;
							
						</td>
					</tr>
					<tr>
						<td>&nbsp;</td>
						<td>
							{{=$ctx.doI18N("form.label.schedularjobs.nextRunTime")}} {{=$ctx.globalDateTime(nextRunTime)}}
						</td>
						<td class="paddingL65">
							{{=$ctx.doI18N("form.label.schedularjobs.previous.run.status")}} 
							{{#if lastRunHistory}}
								{{=lastRunHistory.status}}&nbsp;
								
							{{/if}}
						</td>
					</tr>
					<tr>
						<td>&nbsp;</td>
						<td>
							{{=$ctx.doI18N("form.label.schedularjobs.lastRunTime")}} 
							{{#if lastRunHistory}}
								{{=$ctx.globalDateTime(lastRunHistory.jobRunStartTime)}}
							{{/if}}
						</td>
						<td class="paddingL65">
							{{=$ctx.doI18N("form.label.schedularjobs.currentlyRunning")}} 
							{{#if currentlyRunning}}
								{{=$ctx.doI18N("schedularjob.currently.running.yes")}}
							{{#else}}
								{{=$ctx.doI18N("schedularjob.currently.running.no")}}
							{{/if}}
						</td>
					</tr>
				{{/each}}
			</table>
		</div>
		<br/><br/>
		<div id="executeBatchDiv">
			<table>
				<td class="paddingL65 paddingR65">&nbsp;</td>
				<td class="alignCenter paddingR65"><button id="runSelectedJobs" class="runSelectedJobs">{{=$ctx.doI18N("form.button.schedularjobs.run.jobs")}}</button></td>
				<td class ="paddingL65"><button id="refreshSchedulerJobPage" class="refreshSchedulerJobPage">{{=$ctx.doI18N("form.button.schedularjobs.refresh.page")}}</button></td>
			</table>
		</div>
	</fieldset>
</script>

<script id="schedularJobErrorDialogFormTemplate" type="text/x-jquery-tmpl">
	<span class="ui-icon ui-icon-alert floatleft" style="margin: 0 7px 20px 0;"></span> 
	{{=$ctx.doI18N("error.msg.select.atleast.one.schedule.job")}}
</script>

<script id="executingJobDetailsFormTemplate" type="text/x-jquery-tmpl">
	
		<legend>{{=$ctx.doI18N("form.legend.jobs.sent.for.execution")}}</legend>
		<table>
		{{#each jobDetails}}
			<tr>
				<td><span class="ui-icon ui-icon-circle-check floatleft"></span> </td>
				<td>{{=name}}</td>
			</tr>
		{{/each}}
	</table>
	<br/><br/>
	
</script>

<script id="viewJobHistoryFormTemplate" type="text/x-jquery-tmpl">
	<table id='orderpricetable' width='100%' class="display">
		<thead>
			<tr>
				<th><b>{{=$ctx.doI18N("table.heading.schedulerjob.version")}}</b></th>
				<th><b>{{=$ctx.doI18N("table.heading.schedulerjob.start.time")}}</b></th>
				<th><b>{{=$ctx.doI18N("table.heading.schedulerjob.status")}}</b></th>
				<th><b>{{=$ctx.doI18N("table.heading.schedulerjob.type")}}</b></th>
			</tr>
		</thead>
		<tbody>
				{{#each pageItems}}
                  <tr>
                      <td>{{=version}}</td>
                      <td>{{=$ctx.globalDate(jobRunStartTime)}}</td>   
                     <td>{{=status}}</td>
                     <td>{{=triggerType}}</td>
                  </tr>
                {{/each}}  
		</tbody>
	</table>
</script>

<script id="jobHistoryTableTemplate" type="text/x-jquery-tmpl">
	<table id='schedulerjobstable' width='100%' class="display">
		<thead>
			<tr>
				<th>{{=$ctx.doI18N("table.heading.schedulerjob.version")}}</th>
				<th>{{=$ctx.doI18N("table.heading.schedulerjob.start.time")}}</th>
				<th>{{=$ctx.doI18N("table.heading.schedulerjob.status")}}</th>
				<th>{{=$ctx.doI18N("table.heading.schedulerjob.type")}}</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				{{#each pageItems}}
               <td>{{=jobRunEndTime}}</td>
                {{/each}}  
			</tr>
		</tbody>
	</table>
</script>

<script id="viewJobErrorInfoFormTemplate" type="text/x-jquery-tmpl">
	<form>
		<fieldset>
			<legend>{{=jobRunErrorMessage}}</legend>
			<br/><br/>
			{{=jobRunErrorLog}}
		</fieldset>
	</form>
</script>

<script id="editSchedulerJobFormTemplate" type="text/x-jquery-tmpl">
	<form id="entityform">
		<div id="formerrors"></div>
		
			<legend>{{=$ctx.doI18N("form.legend.job.details")}}</legend>
			<table>
				<tr>
					<td><label for="displayName">{{=$ctx.doI18N("label.job.name")}}</label></td>
					<td><input id="displayName" name="displayName" title="" type="text" value="{{=displayName}}" style="width: 250px"/></td>
				</tr>
				<tr>
					<td><label for="cronExpression">{{=$ctx.doI18N("label.job.expression")}}</label></td>
					<td><input id="cronExpression" name="cronExpression" title="" type="text" value="{{=cronExpression}}" style="width: 250px"/></td>
				</tr>
				<tr>
					<td><label for="active">{{=$ctx.doI18N("label.job.is.active")}}</label></td>
					<td>
						{{#if active}}
							<input type = "checkbox" id="active" name="active" value="{{=active}}" checked=checked/>
						{{#else}}
							<input type = "checkbox" id="active" name="active" value="{{=active}}" />
						{{/if}}
					</td>
				</tr>
			</table>
			<br/>
			<span class="newLine">{{=$ctx.doI18N("resource.link.for.generating.cron.expression")}}</span>
		
	</form>
</script>


<!-- end of Billing -->



</body>
</html>